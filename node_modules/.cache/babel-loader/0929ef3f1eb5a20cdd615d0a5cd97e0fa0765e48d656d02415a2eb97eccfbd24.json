{"ast":null,"code":"import _objectSpread from\"/home/poodle/Work/TimeBoxing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useRef}from'react';import{Button as UIButton}from'./components/ui/Button';// Renamed to avoid conflict\nimport{Card as UICard,CardHeader as UICardHeader,CardTitle as UICardTitle,CardContent as UICardContent}from'./components/ui/Card';// Renamed\nimport TaskFormC from'./components/TaskForm';// Renamed\nimport TaskListC from'./components/TaskList';// Renamed\nimport{Toaster}from'./components/Toaster';import{toast}from'./hooks/use-toast';import confetti from'canvas-confetti';import{PromptDialog}from'./components/ui/PromptDialog';import SpiralFormC from'./components/SpiralForm';// Renamed\nimport SpiralListC from'./components/SpiralList';// Renamed\nimport DashboardViewC from'./components/DashboardView';// Renamed\nimport*as statsHistory from'./lib/statsHistory';import{Timer,CheckCircle,Award,Coffee,AlertTriangle,Play,Moon,Sun,Volume2,VolumeX,BrainCircuit,Clock,Plus,Pause,ChevronDown,ChevronRight,ListChecks,SlidersHorizontal,PieChart,AlertCircle}from'lucide-react';// Removed unused icons\n// Different quote categories\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const quoteCategories={nagging:[\"You won't be able to do it... Prove me wrong!\",\"Don't disappoint future you.\",\"Less scrolling, more doing!\",\"That task isn't going to complete itself.\",\"Are you a talker or a doer?\",\"Time is ticking. Are you?\",\"Stop procrastinating. Start dominating.\",\"Is this the best use of your time right now?\",\"The clock is your boss. Don't get fired.\"],rude:[\"Are you actually going to finish this time?\",\"Your procrastination is impressive, really.\",\"Oh look, another task you'll abandon.\",\"Half-finished tasks won't impress anyone.\",\"You call that productivity? I've seen snails move faster.\",\"Your to-do list is laughing at you right now.\",\"Great, another project for your 'abandoned' collection.\",\"Are you even trying at this point?\",\"Your focus is as stable as a house of cards.\"],annoying:[\"Tick tock! Time is passing! Tick tock!\",\"Hey! Hey! Hey! You should be working!\",\"Don't stop! Keep going! Don't stop! Keep going!\",\"Are you distracted yet? How about now? Now?\",\"This won't complete itself! This won't complete itself!\",\"Focus! Focus! Focus! Are you focused yet?\",\"Hey, remember that deadline? It's coming! Coming! Coming!\",\"Still working? Still working? Still working?\",\"Did you finish yet? No? How about now? Now? Now?\"],abusive:[\"Your productivity is an absolute joke.\",\"Even a child could finish this faster than you.\",\"Pathetic effort as usual.\",\"You'll never amount to anything at this rate.\",\"Everyone else finished hours ago. What's your excuse?\",\"Failure is your only consistent achievement.\",\"No wonder nobody takes your work seriously.\",\"This is why you're always behind everyone else.\",\"Your lack of discipline is embarrassing.\"]};const POINTS_DEDUCTION_FOR_EXTENSION=2;// Penalty for extending a task\n// Moved helper functions before their usage in useCallback hooks\nconst formatTime=totalSeconds=>{const minutes=Math.floor(totalSeconds/60);const seconds=totalSeconds%60;return\"\".concat(String(minutes).padStart(2,'0'),\":\").concat(String(seconds).padStart(2,'0'));};const formatDurationToHoursMinutes=totalSecondsInput=>{const totalSeconds=Math.floor(totalSecondsInput);if(isNaN(totalSeconds)||totalSeconds<0)return\"0 min\";const hours=Math.floor(totalSeconds/3600);const minutes=Math.floor(totalSeconds%3600/60);if(hours>0)return\"\".concat(hours,\" hour\").concat(hours>1?'s':'',\" \").concat(minutes,\" min\");if(minutes>0)return\"\".concat(minutes,\" min\");return\"0 min\";};function App(){const[motivationalQuote,setMotivationalQuote]=useState(\"\");const[tasks,setTasks]=useState([]);const[spirals,setSpirals]=useState([]);// For spirals feature\nconst focusCardRef=useRef(null);// Ref for the Focus view card\nconst[currentTaskIndex,setCurrentTaskIndex]=useState(-1);// Index of the active task in the tasks array\nconst[timeRemaining,setTimeRemaining]=useState(0);// In seconds\nconst[isTimerActive,setIsTimerActive]=useState(false);// Is the countdown interval running?\nconst[isBreakTime,setIsBreakTime]=useState(false);const timerIntervalId=useRef(null);// Using useRef to hold interval ID to avoid re-renders causing issues\nconst[score,setScore]=useState(0);const notificationSound=useRef(null);const quoteIntervalId=useRef(null);// Settings state\nconst[quoteType,setQuoteType]=useState(\"abusive\");// Default quote type\nconst[soundEnabled,setSoundEnabled]=useState(true);// Default sound setting\nconst[theme,setTheme]=useState(\"dark\");// Default theme setting\nconst[breakDuration,setBreakDuration]=useState(5);// Default break duration in minutes\nconst[allowExtendBreak,setAllowExtendBreak]=useState(true);// Default setting for extending breaks\nconst[dailyResetTime,setDailyResetTime]=useState(\"00:00\");// Default daily reset time\nconst[lastResetTimestamp,setLastResetTimestamp]=useState(null);// When the last daily reset occurred (timestamp)\nconst[customFinishTime,setCustomFinishTime]=useState(null);// Custom finish time for today\nconst[isLoaded,setIsLoaded]=useState(false);// To prevent saves before loads complete\nconst[activeView,setActiveView]=useState('focus');// 'focus', 'plan', 'spirals', 'settings', 'dashboard'\nconst[sessionStartTime,setSessionStartTime]=useState(null);// Timestamp when the first task of the session started\nconst[displayedIdleTime,setDisplayedIdleTime]=useState(0);// Idle time in seconds\nconst[isSessionEndTimeExpanded,setIsSessionEndTimeExpanded]=useState(false);// State for PromptDialog\nconst[isPromptOpen,setIsPromptOpen]=useState(false);const[promptConfig,setPromptConfig]=useState({title:'',message:'',inputLabel:'',defaultValue:'',confirmText:'Confirm',cancelText:'Cancel',onConfirm:()=>{},placeholder:''});const navItems=[{id:'focus',label:'Focus',icon:Timer,color:'violet-500',activeColor:'violet-500'},{id:'plan',label:'Plan',icon:ListChecks,color:'emerald-500',activeColor:'emerald-500'},{id:'spirals',label:'Spirals',icon:BrainCircuit,color:'sky-400',activeColor:'indigo-500'},{id:'settings',label:'Settings',icon:SlidersHorizontal,color:'slate-400',activeColor:'gray-400'},{id:'dashboard',label:'Stats',icon:PieChart,color:'amber-500',activeColor:'yellow-500'}];const getIconClass=(isActive,itemColor)=>{if(isActive){if(itemColor==='violet-500')return'text-violet-500';if(itemColor==='sky-400')return'text-sky-400';if(itemColor==='orange-500')return'text-orange-500';if(itemColor==='cyanAccent')return'text-cyanAccent';if(itemColor==='emerald-500')return'text-emerald-500';if(itemColor==='rose-500')return'text-rose-500';if(itemColor==='emerald-600')return'text-emerald-600';if(itemColor==='slate-400')return'text-slate-400';if(itemColor==='amber-500')return'text-amber-500';if(itemColor==='black-600')return'text-gray-600';// Assuming black-600 should be gray when inactive\nreturn'text-white';// Default fallback\n}return'text-subtleText group-hover:text-subtleText/70';};// Calculate total focus time from completed tasks - Wrapped in useCallback\n// DEFINED HERE, INSIDE App and BEFORE its usage in other hooks/functions\nconst calculateFocusTime=useCallback(()=>{return tasks.reduce((total,task)=>{if(task.completed){return total+(task.timeSpentSeconds||0);}else if(task.id===(tasks[currentTaskIndex]&&tasks[currentTaskIndex].id)&&!task.completed&&!isBreakTime){const now=Date.now();const timeElapsedSinceStart=Math.floor((now-tasks[currentTaskIndex].timerStartTime)/1000);return total+(task.timeSpentSeconds||0)+timeElapsedSinceStart;}return total+(task.timeSpentSeconds||0);},0);},[tasks,currentTaskIndex,isBreakTime]);// Load settings from localStorage on initial render\nuseEffect(()=>{// eslint-disable-line react-hooks/exhaustive-deps\nconst savedQuoteType=localStorage.getItem('quoteType');const savedSoundEnabled=localStorage.getItem('soundEnabled');const savedTheme=localStorage.getItem('theme');const savedBreakDuration=localStorage.getItem('breakDuration');const savedAllowExtendBreak=localStorage.getItem('allowExtendBreak');const initialDailyResetTime=localStorage.getItem('dailyResetTime')||\"00:00\";// Get saved or default\nsetDailyResetTime(initialDailyResetTime);// Load other settings\nif(savedQuoteType)setQuoteType(savedQuoteType);if(savedSoundEnabled!==null)setSoundEnabled(savedSoundEnabled==='true');if(savedTheme)setTheme(savedTheme);if(savedBreakDuration)setBreakDuration(parseInt(savedBreakDuration,10));if(savedAllowExtendBreak!==null)setAllowExtendBreak(savedAllowExtendBreak==='true');// --- Daily Reset Logic ---\nconst now=Date.now();const[resetHour,resetMinute]=initialDailyResetTime.split(':').map(Number);const todayDateObj=new Date(now);const todaysResetDateTime=new Date(todayDateObj.getFullYear(),todayDateObj.getMonth(),todayDateObj.getDate(),resetHour,resetMinute,0,0).getTime();const yesterdayDateObj=new Date(now);yesterdayDateObj.setDate(yesterdayDateObj.getDate()-1);const yesterdaysResetDateTime=new Date(yesterdayDateObj.getFullYear(),yesterdayDateObj.getMonth(),yesterdayDateObj.getDate(),resetHour,resetMinute,0,0).getTime();const savedLastResetTs=localStorage.getItem('lastResetTimestamp');let currentLastResetTs=savedLastResetTs?parseInt(savedLastResetTs,10):null;let performReset=false;if(currentLastResetTs===null){// First run or cleared storage. Establish baseline. States are already at defaults from useState.\ncurrentLastResetTs=now>=todaysResetDateTime?todaysResetDateTime:yesterdaysResetDateTime;// No data state reset calls (like setTasks([])) needed here, useState did that.\n// localStorage for these items will be updated by the save hook if they are new.\n}else{if(now>=todaysResetDateTime&&currentLastResetTs<todaysResetDateTime){performReset=true;currentLastResetTs=todaysResetDateTime;// Update to today's reset time\n}}setLastResetTimestamp(currentLastResetTs);// Set state for lastResetTimestamp\n// --- Load or Reset Data States ---\nif(performReset){// Save the previous day's stats before resetting\nconst previousDayStats={date:new Date(currentLastResetTs-86400000).toISOString().split('T')[0],// Yesterday's date\nfocusTime:calculateFocusTime(),// Usage of calculateFocusTime\nidleTime:displayedIdleTime,tasksCompleted:tasks.filter(t=>t.completed).length,score:score,totalTasks:tasks.length,totalPlannedTime:tasks.reduce((total,task)=>total+task.estimatedDuration,0)};// Save stats to history\nstatsHistory.saveDailyStats(previousDayStats);// Now reset current day's data\nsetTasks([]);setScore(0);setSessionStartTime(null);setCurrentTaskIndex(-1);setTimeRemaining(0);setIsTimerActive(false);setIsBreakTime(false);setDisplayedIdleTime(0);// Spirals are NOT reset. Settings are NOT reset.\n// The save useEffect will persist these new default values because isLoaded is still false.\n}else{// No reset due. Load data if it wasn't the very first run (i.e., savedLastResetTs was not null).\n// If savedLastResetTs was null, it means it's effectively a first run for data, and useState defaults are appropriate.\nif(savedLastResetTs){const sTasks=localStorage.getItem('tasks');if(sTasks){try{setTasks(JSON.parse(sTasks));}catch(e){console.error(\"Error parsing tasks from localStorage\",e);setTasks([]);}}else{setTasks([]);}const sScore=localStorage.getItem('score');setScore(sScore?parseInt(sScore,10)||0:0);const sSessionStart=localStorage.getItem('sessionStartTime');setSessionStartTime(sSessionStart?parseInt(sSessionStart,10)||null:null);const sCurrentTaskIndex=localStorage.getItem('currentTaskIndex');setCurrentTaskIndex(sCurrentTaskIndex?parseInt(sCurrentTaskIndex,10)||-1:-1);const sTimeRemaining=localStorage.getItem('timeRemaining');setTimeRemaining(sTimeRemaining?parseInt(sTimeRemaining,10)||0:0);const sIsTimerActive=localStorage.getItem('isTimerActive');setIsTimerActive(sIsTimerActive==='true');const sIsBreakTime=localStorage.getItem('isBreakTime');setIsBreakTime(sIsBreakTime==='true');}}// Spirals are always loaded as they don't reset (or set to empty if not found)\nconst savedSpirals=localStorage.getItem('spirals');if(savedSpirals){try{setSpirals(JSON.parse(savedSpirals));}catch(e){console.error(\"Error parsing spirals from localStorage\",e);setSpirals([]);}}else{setSpirals([]);}setIsLoaded(true);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// ESLint disabled due to complex, time-sensitive logic that uses state values from *before* potential reset\n// Save settings and data to localStorage whenever they change\nuseEffect(()=>{if(!isLoaded)return;localStorage.setItem('quoteType',quoteType);localStorage.setItem('soundEnabled',soundEnabled.toString());localStorage.setItem('theme',theme);localStorage.setItem('breakDuration',breakDuration.toString());localStorage.setItem('allowExtendBreak',allowExtendBreak.toString());localStorage.setItem('dailyResetTime',dailyResetTime);if(lastResetTimestamp!==null){localStorage.setItem('lastResetTimestamp',lastResetTimestamp.toString());}else{localStorage.removeItem('lastResetTimestamp');}try{localStorage.setItem('tasks',JSON.stringify(tasks));}catch(e){console.error(\"Error stringifying tasks for localStorage\",e);}try{localStorage.setItem('spirals',JSON.stringify(spirals));}catch(e){console.error(\"Error stringifying spirals for localStorage\",e);}localStorage.setItem('score',score.toString());if(sessionStartTime!==null)localStorage.setItem('sessionStartTime',sessionStartTime.toString());else localStorage.removeItem('sessionStartTime');localStorage.setItem('currentTaskIndex',currentTaskIndex.toString());localStorage.setItem('timeRemaining',timeRemaining.toString());localStorage.setItem('isTimerActive',isTimerActive.toString());localStorage.setItem('isBreakTime',isBreakTime.toString());// Destructure tasks for clarity, though not strictly necessary for the fix\nconst currentTasks=tasks;const currentScore=score;const currentDisplayedIdleTime=displayedIdleTime;if(currentTasks.length>0&&sessionStartTime!==null){const today=new Date().toISOString().split('T')[0];const currentStats={date:today,focusTime:calculateFocusTime(),idleTime:currentDisplayedIdleTime,// use destructured\ntasksCompleted:currentTasks.filter(t=>t.completed).length,// use destructured\nscore:currentScore,// use destructured\ntotalTasks:currentTasks.length,// use destructured\ntotalPlannedTime:currentTasks.reduce((total,task)=>total+task.estimatedDuration,0)};statsHistory.saveDailyStats(currentStats);}},[quoteType,soundEnabled,theme,breakDuration,allowExtendBreak,dailyResetTime,tasks,spirals,score,sessionStartTime,currentTaskIndex,timeRemaining,isTimerActive,isBreakTime,isLoaded,lastResetTimestamp,displayedIdleTime,calculateFocusTime]);// Apply theme class to body when it changes\nuseEffect(()=>{if(theme==='light'){document.body.classList.add('light-theme');}else{document.body.classList.remove('light-theme');}},[theme]);// Initialize motivational quote, sound, and notification permissions\nuseEffect(()=>{// Sound initialization (runs once)\nnotificationSound.current=new Audio();notificationSound.current.src=\"\".concat(process.env.PUBLIC_URL,\"/assets/annoyingNotification.mp3\");// Notification permission request (runs once)\nif(Notification.permission!==\"granted\"&&Notification.permission!==\"denied\"){Notification.requestPermission().then(permission=>{if(permission===\"granted\")console.error(\"Desktop notification permission granted.\");});}},[]);// Empty dependency array: runs only on mount and unmount\n// Motivational quote initialization and updates (runs when quoteType changes)\nuseEffect(()=>{const getRandomQuote=()=>{const quotes=quoteCategories[quoteType];return quotes[Math.floor(Math.random()*quotes.length)];};setMotivationalQuote(getRandomQuote());},[quoteType]);const playNotificationSound=useCallback(()=>{console.log(\"playNotificationSound\");if(soundEnabled&&notificationSound.current){// Ensure src is set (it should be from the initial useEffect, but as a fallback)\nif(!notificationSound.current.src){notificationSound.current.src=\"\".concat(process.env.PUBLIC_URL,\"/assets/annoyingNotification.mp3\");}notificationSound.current.currentTime=0;// Reset sound to start\nnotificationSound.current.play().then(()=>{// console.error(\"Notification sound played successfully.\"); // Optional: for debugging\n}).catch(error=>{console.error(\"Error playing sound:\",error);if(error.name==='NotSupportedError'){console.error(\"NotSupportedError: Please ensure the audio file at \\\"\".concat(notificationSound.current.src,\"\\\" exists in the public/assets/ folder, is a valid audio format (e.g., MP3), and that the browser can access it.\"));toast({title:\"Sound Playback Error\",description:\"Could not play notification sound. Check file path and format.\",variant:\"destructive\"});}else{toast({title:\"Sound Error\",description:\"An issue occurred while trying to play the sound.\",variant:\"destructive\"});}});}},[soundEnabled]);// Removed process.env.PUBLIC_URL from deps as it's constant\nconst pauseNotificationSound=useCallback(()=>{if(notificationSound.current&&!notificationSound.current.paused){notificationSound.current.pause();notificationSound.current.currentTime=0;// Reset to beginning\n}},[]);const showDesktopNotification=useCallback((title,body)=>{if(Notification.permission===\"granted\")new Notification(title,{body});},[]);// Motivational quote logic\nconst updateMotivationalQuote=useCallback(()=>{const getRandomQuote=()=>{const quotes=quoteCategories[quoteType];return quotes[Math.floor(Math.random()*quotes.length)];};setMotivationalQuote(getRandomQuote());},[quoteType]);const startMotivationalQuoteInterval=useCallback(()=>{if(!isTimerActive&&!quoteIntervalId.current){updateMotivationalQuote();quoteIntervalId.current=setInterval(updateMotivationalQuote,30000);}},[isTimerActive,updateMotivationalQuote]);const stopMotivationalQuoteInterval=useCallback(()=>{if(quoteIntervalId.current){clearInterval(quoteIntervalId.current);quoteIntervalId.current=null;}},[]);useEffect(()=>{if(isTimerActive){stopMotivationalQuoteInterval();}else{startMotivationalQuoteInterval();}return()=>stopMotivationalQuoteInterval();// Cleanup on unmount\n},[isTimerActive,startMotivationalQuoteInterval,stopMotivationalQuoteInterval]);// Task Management\nconst handleAddTask=useCallback(newTaskData=>{setTasks(prevTasks=>[...prevTasks,{id:Date.now(),name:newTaskData.name,duration:newTaskData.duration,// user input in minutes\nestimatedDuration:newTaskData.duration,completed:false,started:false,timeSpentSeconds:0,timerStartTime:null,completionTimestamp:null}]);toast({title:\"Task Added\",description:\"\\\"\".concat(newTaskData.name,\"\\\" added to your list.\")});},[setTasks]);// Added setTasks\nconst handleRemoveTask=useCallback(taskId=>{var _tasks$currentTaskInd;const taskToRemove=tasks.find(t=>t.id===taskId);setTasks(prevTasks=>prevTasks.filter(task=>task.id!==taskId));if(taskToRemove){toast({title:\"Task Removed\",description:\"\\\"\".concat(taskToRemove.name,\"\\\" has been removed.\"),variant:\"destructive\"});}if(currentTaskIndex!==-1&&((_tasks$currentTaskInd=tasks[currentTaskIndex])===null||_tasks$currentTaskInd===void 0?void 0:_tasks$currentTaskInd.id)===taskId){if(timerIntervalId.current)clearInterval(timerIntervalId.current);timerIntervalId.current=null;setCurrentTaskIndex(-1);setTimeRemaining(0);setIsTimerActive(false);setIsBreakTime(false);}},[tasks,currentTaskIndex,setTasks,setCurrentTaskIndex,setTimeRemaining,setIsTimerActive,setIsBreakTime]);// Added missing dependencies\n// Timer Core Logic: Start, Pause, Resume, Done, Extend\nconst startTimer=useCallback(taskIndex=>{// Guard 1: Basic validity and completion check\nif(taskIndex<0||taskIndex>=tasks.length||!tasks[taskIndex]){toast({title:\"Invalid Task\",description:\"Task not found or index is out of bounds.\",variant:\"destructive\"});return;}if(tasks[taskIndex].completed){toast({title:\"Task Completed\",description:\"\\\"\".concat(tasks[taskIndex].name,\"\\\" is already completed.\"),variant:\"default\"});return;}// Guard 2: Check if another task is active or this specific one\nif(isTimerActive&&!isBreakTime&&currentTaskIndex===taskIndex){toast({title:\"Already Active\",description:\"\\\"\".concat(tasks[taskIndex].name,\"\\\" is already running.\"),variant:\"default\"});return;}if(isTimerActive&&!isBreakTime&&currentTaskIndex!==-1&&currentTaskIndex!==taskIndex){var _tasks$currentTaskInd2;toast({title:\"Timer Busy\",description:\"\\\"\".concat(((_tasks$currentTaskInd2=tasks[currentTaskIndex])===null||_tasks$currentTaskInd2===void 0?void 0:_tasks$currentTaskInd2.name)||'Another task',\"\\\" is in progress. Complete or stop it first.\"),variant:\"destructive\"});return;}pauseNotificationSound();// Stop any ongoing notification sound\n// Guard 3: Handle active break\nif(isBreakTime){if(timerIntervalId.current)clearInterval(timerIntervalId.current);timerIntervalId.current=null;setIsBreakTime(false);// Stop the break\ntoast({title:\"Break Interrupted\",description:\"Starting a new task.\"});}// Set session start time if this is the very first task being started\nif(!sessionStartTime){setSessionStartTime(Date.now());}const taskToStart=tasks[taskIndex];// This extra check is for absolute safety, though guards above should cover it.\nif(!taskToStart||typeof taskToStart.duration==='undefined'){console.error(\"Critical error: taskToStart is invalid despite guards. taskIndex:\",taskIndex,\"task:\",taskToStart);toast({title:\"Task Data Error\",description:\"Cannot start task due to incomplete data. Please check console.\",variant:\"destructive\"});return;}setTasks(prevTasks=>prevTasks.map((task,idx)=>idx===taskIndex?_objectSpread(_objectSpread({},task),{},{started:true,timerStartTime:Date.now(),timeSpentSeconds:task.timeSpentSeconds||0}):task));setCurrentTaskIndex(taskIndex);// If task was partially worked on, resume from remaining, else from full duration\nconst timeToSet=taskToStart.duration*60-(taskToStart.timeSpentSeconds||0);setTimeRemaining(timeToSet>0?timeToSet:taskToStart.duration*60);// Ensure it doesn't start negative\nsetIsTimerActive(true);setIsBreakTime(false);// Ensure break mode is off\ntoast({title:\"Task Started\",description:\"Timer for \\\"\".concat(taskToStart.name,\"\\\" has begun.\")});},[tasks,isTimerActive,isBreakTime,currentTaskIndex,sessionStartTime,setSessionStartTime,setTasks,setCurrentTaskIndex,setTimeRemaining,setIsTimerActive,setIsBreakTime]);// Added missing dependencies\nconst handlePauseTimer=useCallback(()=>{if(timerIntervalId.current){clearInterval(timerIntervalId.current);timerIntervalId.current=null;setIsTimerActive(false);toast({title:isBreakTime?\"Break Paused\":\"Timer Paused\"});}},[isBreakTime,setIsTimerActive]);// Added setIsTimerActive\nconst handleResumeTimer=useCallback(()=>{if(!isTimerActive&&timeRemaining>0&&(currentTaskIndex!==-1&&tasks[currentTaskIndex]&&!tasks[currentTaskIndex].completed&&!isBreakTime||isBreakTime)){setIsTimerActive(true);toast({title:isBreakTime?\"Break Resumed\":\"Timer Resumed\"});}},[isTimerActive,timeRemaining,currentTaskIndex,tasks,isBreakTime,setIsTimerActive]);// Added setIsTimerActive\nconst handleTaskDone=useCallback(()=>{if(currentTaskIndex===-1||!tasks[currentTaskIndex]||tasks[currentTaskIndex].completed){toast({title:\"No Active Task\",description:\"No task to mark as done.\",variant:\"default\"});return;}pauseNotificationSound();// Stop any ongoing notification sound\nconst task=tasks[currentTaskIndex];let pointsEarnedThisTask=0;const timeWhenDoneSeconds=task.timerStartTime?(Date.now()-task.timerStartTime)/1000:task.timeSpentSeconds;const actualTimeSpentMinutes=Math.round(timeWhenDoneSeconds/60);// Round to nearest minute for scoring\n// Base score: 1 point per minute of focus time\npointsEarnedThisTask+=actualTimeSpentMinutes;// Bonus for finishing early: 1 point per minute saved\nconst estimatedSeconds=task.estimatedDuration*60;const secondsSaved=Math.max(0,estimatedSeconds-timeWhenDoneSeconds);const bonusMinutes=Math.round(secondsSaved/60);// Round saved seconds to nearest minute\npointsEarnedThisTask+=bonusMinutes;// Ensure score is not negative (shouldn't happen with this logic, but as a safeguard)\npointsEarnedThisTask=Math.max(0,pointsEarnedThisTask);setScore(prevScore=>prevScore+pointsEarnedThisTask);// Confetti centered on the focus card\nif(focusCardRef.current){const rect=focusCardRef.current.getBoundingClientRect();const originX=(rect.left+rect.width/2)/window.innerWidth;const originY=(rect.top+rect.height/2)/window.innerHeight;confetti({particleCount:150,spread:100,origin:{x:originX,y:originY},disableForReducedMotion:true// Good practice for accessibility\n});}else{// Fallback to default origin if ref is not available\nconfetti({particleCount:150,spread:100,origin:{y:0.6}});}// Use actualTimeSpent (which could be > estimated if they let timer run out and clicked done)\n// for the task's final timeSpentSeconds for record keeping.\nconst finalTimeSpentSeconds=timeWhenDoneSeconds;setTasks(prevTasks=>prevTasks.map((t,idx)=>idx===currentTaskIndex?_objectSpread(_objectSpread({},t),{},{completed:true,timeSpentSeconds:finalTimeSpentSeconds,duration:finalTimeSpentSeconds/60,// Update duration to reflect actual time spent\ncompletionTimestamp:Date.now()}):t));if(timerIntervalId.current){clearInterval(timerIntervalId.current);timerIntervalId.current=null;}setIsTimerActive(false);showDesktopNotification(\"Task Finished!\",\"\\\"\".concat(task.name,\"\\\" is complete.\"));toast({title:\"Task Finished!\",description:\"\\\"\".concat(task.name,\"\\\" complete. Points: +\").concat(pointsEarnedThisTask)});setIsBreakTime(true);setTimeRemaining(breakDuration*60);setCurrentTaskIndex(-1);setIsTimerActive(true);toast({title:\"Break Time!\",description:\"Taking a \".concat(breakDuration,\" minute break.\")});},[tasks,currentTaskIndex,playNotificationSound,showDesktopNotification,breakDuration,setScore,setTasks,setIsBreakTime,setTimeRemaining,setCurrentTaskIndex,setIsTimerActive,focusCardRef]);// Dependencies unchanged\nconst handleSkipBreak=useCallback(()=>{if(isBreakTime&&isTimerActive){if(timerIntervalId.current){clearInterval(timerIntervalId.current);timerIntervalId.current=null;}pauseNotificationSound();// Stop any ongoing notification sound\nsetIsTimerActive(false);setIsBreakTime(false);setTimeRemaining(0);setCurrentTaskIndex(-1);toast({title:\"Break Skipped\",description:\"Break ended. Ready for the next task?\"});}else{toast({title:\"No Active Break\",description:\"There is no active break to skip.\",variant:\"default\"});}},[isBreakTime,isTimerActive,setIsTimerActive,setIsBreakTime,setTimeRemaining,setCurrentTaskIndex]);// Added missing dependencies\nconst handleExtendTimer=useCallback(()=>{// If no task active AND not break time, nothing to extend\nif(currentTaskIndex===-1&&!isBreakTime){toast({title:\"No Timer Active\",description:\"Start a task or break to extend its time.\",variant:\"default\"});return;}pauseNotificationSound();// Stop any ongoing notification sound\n// If it's a task, check if it's completed \n// (This check is also in the button's disabled logic, but good for safety)\nif(!isBreakTime&&tasks[currentTaskIndex]&&tasks[currentTaskIndex].completed){toast({title:\"Task Completed\",description:\"Task \\\"\".concat(tasks[currentTaskIndex].name,\"\\\" is already completed and cannot be extended.\"),variant:\"default\"});return;}// If it's a break, check if extending breaks is allowed\nif(isBreakTime&&!allowExtendBreak){toast({title:\"Extend Break Disabled\",description:\"Extending break time is currently disabled in settings.\",variant:\"default\"});return;}// For tasks, time must be 0. For breaks, this check is skipped if allowExtendBreak is true.\n// if (!isBreakTime && timeRemaining > 0) { // Removed check as we can extend while timer is running\n//     toast({title: \"Timer Still Running\", description: \"Task time can only be extended when the timer reaches 0.\", variant: \"default\"});\n//     return;\n// }\nconst context=isBreakTime?\"break\":tasks[currentTaskIndex]?\"task \\\"\".concat(tasks[currentTaskIndex].name,\"\\\"\"):\"task\";const defaultExtension=\"5\";const currentTimerValue=formatTime(timeRemaining);setPromptConfig({title:\"Extend \".concat(context),message:isBreakTime&&timeRemaining>0?\"Current break time is \".concat(currentTimerValue,\". How many additional minutes would you like to add?\"):\"How many minutes would you like to add to the \".concat(context,\"? \").concat(!isBreakTime&&tasks[currentTaskIndex]?\"Timer is currently at \".concat(formatTime(timeRemaining),\".\"):''),// Updated message\ninputLabel:'Minutes to add:',defaultValue:defaultExtension,confirmText:'Extend',cancelText:'Cancel',placeholder:'Enter minutes',onConfirm:extendMinutesText=>{const extendMinutes=parseInt(extendMinutesText,10);if(!isNaN(extendMinutes)&&extendMinutes>0){const newTimeRemaining=timeRemaining+extendMinutes*60;setTimeRemaining(newTimeRemaining);let toastDescription=\"Added \".concat(extendMinutes,\" minutes to \").concat(context,\".\");if(!isBreakTime&&currentTaskIndex!==-1&&tasks[currentTaskIndex]){setTasks(prevTasks=>prevTasks.map((t,idx)=>idx===currentTaskIndex?_objectSpread(_objectSpread({},t),{},{duration:t.duration+extendMinutes,estimatedDuration:t.estimatedDuration+extendMinutes}):t));setScore(prevScore=>prevScore-POINTS_DEDUCTION_FOR_EXTENSION);toastDescription+=\" Points: -\".concat(POINTS_DEDUCTION_FOR_EXTENSION);}if(!isTimerActive&&newTimeRemaining>0){setIsTimerActive(true);}toast({title:\"Timer Extended\",description:toastDescription});}else{toast({title:\"Invalid Input\",description:\"Please enter a valid number of minutes.\",variant:\"destructive\"});}}});},[currentTaskIndex,isBreakTime,isTimerActive,timeRemaining,tasks,allowExtendBreak,setPromptConfig,setTasks,setScore,setTimeRemaining,setIsTimerActive]);// Added missing dependencies\n// Effect for Timer Countdown\nuseEffect(()=>{// Added missing dependencies\nif(isTimerActive&&timeRemaining>0){// If timer should be active and there's time, start the interval\ntimerIntervalId.current=setInterval(()=>{setTimeRemaining(prevTime=>{if(prevTime<=1){// Stop the interval first\nif(timerIntervalId.current)clearInterval(timerIntervalId.current);timerIntervalId.current=null;setIsTimerActive(false);// Timer is no longer active\nif(isBreakTime){playNotificationSound();showDesktopNotification(\"Break Over!\",\"Your break time is up.\");toast({title:\"Break Finished!\",description:\"Ready for the next task?\"});setIsBreakTime(false);// Break is over\nsetCurrentTaskIndex(-1);// No active task\n}else if(currentTaskIndex!==-1&&tasks[currentTaskIndex]){const task=tasks[currentTaskIndex];// Increment timeSpentSeconds one last time for the final second\nsetTasks(prevTasks=>prevTasks.map((t,idx)=>idx===currentTaskIndex?_objectSpread(_objectSpread({},t),{},{timeSpentSeconds:(t.timeSpentSeconds||0)+1}):t));playNotificationSound();showDesktopNotification(\"Time's Up!\",\"Time for \\\"\".concat(task.name,\"\\\" is up.\"));toast({title:\"Time's Up!\",description:\"\\\"\".concat(task.name,\"\\\" timer finished. Mark done or extend.\")});// User needs to manually mark done or extend. isTimerActive is false.\n}return 0;// Time is up\n}// Increment timeSpentSeconds for active task during normal countdown\nif(currentTaskIndex!==-1&&!isBreakTime&&tasks[currentTaskIndex]){setTasks(prevTasks=>prevTasks.map((task,idx)=>idx===currentTaskIndex?_objectSpread(_objectSpread({},task),{},{timeSpentSeconds:(task.timeSpentSeconds||0)+1}):task));}return prevTime-1;// Countdown\n});},1000);}else{// If timer shouldn't be active or time is up, ensure interval is cleared\nif(timerIntervalId.current){clearInterval(timerIntervalId.current);timerIntervalId.current=null;}}// Cleanup function: always clear interval when dependencies change or component unmounts\nreturn()=>{if(timerIntervalId.current){clearInterval(timerIntervalId.current);timerIntervalId.current=null;}};},[isTimerActive,timeRemaining,tasks,currentTaskIndex,isBreakTime,playNotificationSound,showDesktopNotification,setTasks,breakDuration]);// Removed duplicate showDesktopNotification\n// Effect for Idle Time Calculation\nuseEffect(()=>{if(!isTimerActive&&sessionStartTime!==null){const updateIdleTime=()=>{// Calculate time elapsed since the session started in seconds\nconst now=Date.now();const totalSessionTimeSeconds=Math.floor((now-sessionStartTime)/1000);// Calculate total focus time (sum of time spent on completed tasks)\nconst totalFocusTimeSeconds=calculateFocusTime();// Idle time = total session time - total focus time\nconst calculatedIdleTime=Math.max(0,totalSessionTimeSeconds-totalFocusTimeSeconds);setDisplayedIdleTime(calculatedIdleTime);};// Update immediately and then every minute\nupdateIdleTime();const intervalId=setInterval(updateIdleTime,60000);// 60 seconds\nreturn()=>clearInterval(intervalId);}},[isTimerActive,sessionStartTime,calculateFocusTime,setDisplayedIdleTime]);// Added missing dependencies\n// Formatting and Display Logic\nconst timerDisplayColor=()=>{if(isBreakTime)return'text-emerald-400';// Specific color for break time\n// Idle state: timer is not active, no task index, or task completed\nif(!isTimerActive&&(currentTaskIndex===-1||!tasks[currentTaskIndex]||tasks[currentTaskIndex].completed))return'text-red-500';// Default/idle color\nconst task=tasks[currentTaskIndex];const totalTaskSeconds=task.estimatedDuration*60;// If task has no duration or timer is active but timeRemaining is 0, default to teal\nif(totalTaskSeconds===0&&!isBreakTime||isTimerActive&&timeRemaining===0&&!isBreakTime)return'text-teal-400';const percentageRemaining=timeRemaining/totalTaskSeconds*100;if(percentageRemaining<=20)return'text-red-500';// Low time warning\nif(percentageRemaining<=50)return'text-yellow-500';// Mid time warning\n// Default color for active task when not in warning thresholds\nreturn'text-teal-400';};const calculateDailyStats=useCallback(()=>{const totalPlannedDuration=tasks.reduce((acc,task)=>acc+task.estimatedDuration,0);// in minutes\nlet accumulatedFocusTimeSeconds=tasks.reduce((acc,task)=>{if(task.completed){return acc+(task.timeSpentSeconds||0);}if(task.id===(tasks[currentTaskIndex]&&tasks[currentTaskIndex].id)&&!task.completed&&!isBreakTime){return acc+(task.timeSpentSeconds||0);// Ensure timeSpentSeconds is included for active task\n}return acc;},0);const remainingUncompletedTaskMinutes=tasks.filter(task=>!task.completed).reduce((acc,task)=>{if(task.id===(tasks[currentTaskIndex]&&tasks[currentTaskIndex].id)&&!isBreakTime){return acc+Math.max(0,Math.ceil(timeRemaining/60));}return acc+task.estimatedDuration;},0);const now=new Date();let timeLeftTodayMinutes=0;// Determine the end time for P(Not Finishing) based on customFinishTime or dailyResetTime\nlet endOfTodayTargetTime;if(customFinishTime){const[finishHour,finishMinute]=customFinishTime.split(':').map(Number);const customEndTime=new Date(now);customEndTime.setHours(finishHour,finishMinute,0,0);// If the custom time is in the past today, calculate until tomorrow's custom time\n// This handles cases where the user sets a time like 9 AM, but it's already 10 AM\nif(customEndTime.getTime()<now.getTime()){customEndTime.setDate(customEndTime.getDate()+1);}endOfTodayTargetTime=customEndTime;}else{// Fallback to dailyResetTime if no custom finish time is set\nconst[resetHour,resetMinute]=dailyResetTime.split(':').map(Number);const todayReset=new Date(now);todayReset.setHours(resetHour,resetMinute,0,0);const tomorrowReset=new Date(now);tomorrowReset.setDate(tomorrowReset.getDate()+1);tomorrowReset.setHours(resetHour,resetMinute,0,0);endOfTodayTargetTime=now.getTime()<todayReset.getTime()?todayReset:tomorrowReset;}const localMsLeft=endOfTodayTargetTime.getTime()-now.getTime();timeLeftTodayMinutes=Math.max(0,Math.floor(localMsLeft/(1000*60)));let probNotFinishingPercentage=0;if(remainingUncompletedTaskMinutes===0){probNotFinishingPercentage=0;}else if(timeLeftTodayMinutes<=0){probNotFinishingPercentage=100;}else{const P_base_workload=Math.min(1,remainingUncompletedTaskMinutes/timeLeftTodayMinutes);const totalSessionTimeSeconds=accumulatedFocusTimeSeconds+displayedIdleTime;let inefficiency_penalty_multiplier=1;// Default to no penalty\nif(totalSessionTimeSeconds>0){const efficiency_metric=accumulatedFocusTimeSeconds/totalSessionTimeSeconds;inefficiency_penalty_multiplier=1+(1-efficiency_metric);// Ranges [1, 2]\n}const raw_probability=P_base_workload*inefficiency_penalty_multiplier;probNotFinishingPercentage=Math.min(100,Math.round(raw_probability*100));}return{totalPlannedTime:totalPlannedDuration,accumulatedFocusTimeSeconds:accumulatedFocusTimeSeconds,estimatedRemainingTaskTimeMinutes:remainingUncompletedTaskMinutes,probNotFinishing:probNotFinishingPercentage};},[tasks,currentTaskIndex,timeRemaining,isBreakTime,displayedIdleTime,dailyResetTime,customFinishTime]);// Added missing dependencies\nconst dailyStats=calculateDailyStats();const activeTaskObject=currentTaskIndex!==-1&&tasks[currentTaskIndex]?tasks[currentTaskIndex]:null;const currentDisplayTaskName=isBreakTime?\"Break Time!\":activeTaskObject?activeTaskObject.name:\"No Active Task\";const activeTaskOriginalId=activeTaskObject?activeTaskObject.id:null;const handleClearAllTasks=useCallback(()=>{setTasks([]);localStorage.removeItem('tasks');// Also clear from localStorage immediately\ntoast({title:\"Tasks Cleared\",description:\"All tasks have been removed.\",variant:\"destructive\"});},[setTasks]);// Added setTasks dependency\n// Spirals handlers (to be implemented)\nconst handleAddSpiral=useCallback(spiralName=>{if(!spiralName.trim()){toast({title:\"Invalid Spiral\",description:\"Spiral name cannot be empty.\",variant:\"destructive\"});return;}setSpirals(prev=>[...prev,{id:Date.now(),name:spiralName.trim()}]);toast({title:\"Spiral Added\",description:\"\\\"\".concat(spiralName.trim(),\"\\\" added to spirals.\")});},[setSpirals]);// Added setSpirals dependency\nconst handleRemoveSpiral=useCallback(spiralId=>{const spiralToRemove=spirals.find(s=>s.id===spiralId);setSpirals(prev=>prev.filter(s=>s.id!==spiralId));if(spiralToRemove){toast({title:\"Spiral Removed\",description:\"\\\"\".concat(spiralToRemove.name,\"\\\" removed.\"),variant:\"destructive\"});}},[spirals,setSpirals]);// Added setSpirals dependency\nconst handleMoveSpiralToTasks=useCallback(spiralId=>{const spiralToMove=spirals.find(s=>s.id===spiralId);if(!spiralToMove)return;setPromptConfig({title:\"Move Spiral to Task\",message:\"Enter estimated duration (minutes) for task \\\"\".concat(spiralToMove.name,\"\\\":\"),inputLabel:\"Duration (minutes):\",defaultValue:\"30\",confirmText:\"Move to Tasks\",cancelText:\"Cancel\",placeholder:\"e.g., 30\",onConfirm:durationText=>{if(durationText===null)return;const duration=parseInt(durationText,10);if(duration&&duration>0){handleAddTask({name:spiralToMove.name,duration});setSpirals(prev=>prev.filter(s=>s.id!==spiralId));toast({title:\"Spiral Moved\",description:\"\\\"\".concat(spiralToMove.name,\"\\\" moved to tasks.\")});}else{toast({title:\"Invalid Duration\",description:\"Please enter a positive number for duration.\",variant:\"destructive\"});}}});setIsPromptOpen(true);},[spirals,handleAddTask,setIsPromptOpen,setPromptConfig,setSpirals]);// Added missing dependencies\nconst handleMasterPlayPause=()=>{if(isTimerActive){// If timer is supposed to be active (running or paused awaiting resume)\nhandlePauseTimer();// This will set isTimerActive = false and clear interval\n}else{// Timer is not supposed to be active (fully stopped or explicitly paused)\n// Check if we can resume an existing task or break\nif(timeRemaining>0&&(currentTaskIndex!==-1&&tasks[currentTaskIndex]&&!tasks[currentTaskIndex].completed&&!isBreakTime||isBreakTime)){handleResumeTimer();// This will set isTimerActive = true\n}else{// Otherwise, try to start the first available (uncompleted) task\nconst firstUncompletedTaskIndex=tasks.findIndex(t=>!t.completed);if(firstUncompletedTaskIndex!==-1){startTimer(firstUncompletedTaskIndex);// startTimer sets isTimerActive = true\n}else{toast({title:\"No Tasks\",description:\"Add a task or all tasks are complete.\",variant:\"default\"});}}}};// Added missing dependencies implicitly handled by called functions\n// JSX will be in the next part\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white relative overflow-hidden\",children:[\" \",/*#__PURE__*/_jsx(\"style\",{dangerouslySetInnerHTML:{__html:\"\\n        .custom-scrollbar.max-h-\\\\[450px\\\\], \\n        ul.max-h-\\\\[450px\\\\].custom-scrollbar {\\n          max-height: 500px !important;\\n        }\\n      \"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse\",style:{animationDelay:'2s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-pink-500/5 rounded-full blur-3xl animate-pulse\",style:{animationDelay:'4s'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 p-6 max-w-7xl mx-auto flex flex-col h-full\",children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center justify-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-4xl md:text-6xl font-bold flex gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bg-clip-text text-transparent\",style:{backgroundImage:'linear-gradient(90deg, #ff3b3b 0%, #ff8c00 100%)'},children:\"Annoying\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lightText\",children:\"Pomodoro\"})]}),motivationalQuote&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-1/2 left-0 transform -translate-y-1/2 flex items-center space-x-2 p-1 z-20\",children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.PUBLIC_URL,\"/assets/logo192.png\"),alt:\"Annoying Character\",className:\"h-10 w-10 md:h-12 md:w-12\"// Responsive size\n}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-gray-800/80 backdrop-blur-md border border-gray-700/70 rounded-lg px-3 py-2 max-w-[180px] md:max-w-[220px] shadow-xl\",children:[\" \",/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-200 italic text-xs md:text-sm leading-snug md:leading-relaxed\",children:[\"\\\"\",motivationalQuote,\"\\\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/2 -left-2 transform -translate-y-1/2 w-4 h-4 bg-gray-800/80 border-b border-l border-gray-700/70 rotate-45\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-2 border-t border-dark-300/60 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 justify-around items-center gap-3 sm:gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\",children:[/*#__PURE__*/_jsx(Award,{className:\"h-4 w-4 mr-1.5 text-cyanAccent transition-transform duration-300 group-hover:scale-110\"}),\"Score\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-cyanAccent/10 blur-md rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"score-display relative z-10 text-cyanAccent font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-brightAccent px-3\",children:score})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 mr-1.5 text-green-500 transition-transform duration-300 group-hover:scale-110\"}),\"Tasks Done\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-green-500/10 blur-md rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"relative z-10 text-green-500 font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-green-400 px-3\",children:tasks.filter(t=>t.completed).length})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\",children:[/*#__PURE__*/_jsx(Timer,{className:\"h-4 w-4 mr-1.5 text-blue-500 transition-transform duration-300 group-hover:scale-110\"}),\"Focus Time\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-blue-500/10 blur-md rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"relative z-10 text-blue-500 font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-blue-400 px-3\",children:formatDurationToHoursMinutes(dailyStats.accumulatedFocusTimeSeconds)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\",children:[/*#__PURE__*/_jsx(Coffee,{className:\"h-4 w-4 mr-1.5 text-amber-500 transition-transform duration-300 group-hover:scale-110\"}),\"Idle Time\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-amber-500/10 blur-md rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"relative z-10 text-amber-500 font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-amber-400 px-3\",children:formatDurationToHoursMinutes(displayedIdleTime)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4 mr-1.5 text-red-500 transition-transform duration-300 group-hover:scale-110\"}),\"P(Not Finish)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-red-500/10 blur-md rounded-full\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"relative z-10 text-red-500 font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-red-400 px-3\",children:[dailyStats.probNotFinishing,\"%\"]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row flex-grow overflow-hidden w-full gap-3 sm:gap-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex pt-1 flex-col gap-2.5 w-24 sm:w-32 flex-shrink-0\",children:[\" \",navItems.map(item=>{const IconComponent=item.icon;const isActive=activeView===item.id;return/*#__PURE__*/_jsxs(UIButton,{variant:isActive?'default':'outline',onClick:()=>setActiveView(item.id),className:\"py-3 flex flex-col items-center justify-center text-xs sm:text-sm rounded-xl flex-grow\\n                            \".concat(isActive?\"bg-gradient-to-br from-cyanAccent/20 to-brightAccent/10 shadow-lg shadow-cyanAccent/30 border border-cyanAccent/30\"// Always use cyan/bright accent for active\n:\"bg-dark-200/30 hover:bg-dark-200/50 hover:shadow-md hover:shadow-\".concat(item.color,\"/15\"),\"\\n                            transition-all duration-300 group\")// The rgba values would ideally come from Tailwind config, here using placeholder logic\n// For specific colors like cyanAccent, you might need to map them to RGB if not directly usable in rgba()\n,children:[/*#__PURE__*/_jsx(IconComponent,{className:\"h-6 w-6 mb-2 \".concat(getIconClass(isActive,item.color))}),/*#__PURE__*/_jsx(\"span\",{className:isActive?'font-medium text-lightText':'text-subtleText/90',children:item.label})]},item.id);})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-grow overflow-auto h-full\",children:[\" \",activeView==='focus'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8 h-full flex flex-col bg-gradient-to-br from-dark-100/90 to-dark-200/90 shadow-md hover:shadow-lg transition-all duration-500 rounded-xl p-4 sm:p-6 relative\",ref:focusCardRef// Attach the ref here\n,children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"text-center pt-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center gap-3 bg-gray-900/50 backdrop-blur-sm rounded-2xl px-6 py-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(isTimerActive&&!isBreakTime?'bg-gradient-to-r from-blue-500 to-cyan-500 animate-pulse':'bg-gray-600')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300 font-medium\",children:\"Current Task:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold \".concat(currentTaskIndex!==-1&&!isBreakTime?\"text-cyan-400\":\"text-gray-400\"),children:currentDisplayTaskName})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center flex-grow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-full blur-2xl scale-110\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-xl border border-gray-700/50 rounded-full w-64 h-64 sm:w-72 sm:h-72 md:w-80 md:h-80 flex flex-col items-center justify-center shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"absolute inset-0 w-full h-full -rotate-90\",viewBox:\"0 0 100 100\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"50\",cy:\"50\",r:\"45\",fill:\"none\",strokeWidth:\"2.5\",stroke:\"rgba(255,255,255,0.05)\"}),(currentTaskIndex!==-1||isBreakTime)&&/*#__PURE__*/_jsx(\"circle\",{cx:\"50\",cy:\"50\",r:\"45\",fill:\"none\",strokeWidth:\"2.5\",stroke:isBreakTime?\"#10b981\":\"#22d3ee\",strokeLinecap:\"round\",strokeDasharray:\"283\",strokeDashoffset:(()=>{// Calculate progress percentage (elapsed time relative to total)\nconst totalTime=isBreakTime?breakDuration*60:currentTaskIndex!==-1&&tasks[currentTaskIndex]?tasks[currentTaskIndex].estimatedDuration*60:0;if(totalTime<=0)return\"283\";// Default to empty if no total time\n// Calculate elapsed time\nconst elapsed=totalTime-timeRemaining;// Calculate progress (percentage of time elapsed)\nconst progress=1-elapsed/totalTime;// 283 is approximation of 2πr (2 * π * 45)\n// To show elapsed time from filled, use the progress percentage directly\nreturn 283*(1-progress);})()})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"timer-clock-react\",className:\"text-6xl sm:text-7xl font-mono font-bold \".concat(timerDisplayColor(),\" tabular-nums tracking-tight transition-all duration-500\"),children:[\" \",formatTime(timeRemaining)]}),isTimerActive&&!isBreakTime&&/*#__PURE__*/_jsx(\"div\",{className:\" mt-2 text-sm text-gray-400 uppercase tracking-widest animate-pulse\",children:\"FOCUS IN PROGRESS\"}),isTimerActive&&isBreakTime&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-sm text-emerald-400 uppercase tracking-widest animate-pulse\",children:\"BREAK IN PROGRESS\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-4 pb-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleMasterPlayPause,disabled:isTimerActive||!isTimerActive&&(tasks.findIndex(t=>!t.completed)===-1||currentTaskIndex!==-1&&timeRemaining===0&&!isBreakTime)// Disable if active, or if not active and (no uncompleted tasks OR (current task timer is 0 and not a break))\n,className:\"group relative overflow-hidden bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white px-7 py-3.5 sm:px-8 sm:py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center gap-2 sm:gap-3\",children:[isTimerActive?/*#__PURE__*/_jsx(Pause,{className:\"h-5 w-5\"}):/*#__PURE__*/_jsx(Play,{className:\"h-5 w-5\"}),isTimerActive?'Pause':timeRemaining>0?'Resume':'Start']})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{if(isBreakTime){handleSkipBreak();}else{handleTaskDone();confetti({particleCount:100,spread:70,origin:{y:0.6}});}},disabled:isBreakTime?!isTimerActive:currentTaskIndex===-1||!tasks[currentTaskIndex]||tasks[currentTaskIndex].completed,className:\"group relative overflow-hidden bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white px-7 py-3.5 sm:px-8 sm:py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center gap-2 sm:gap-3\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5\"}),isBreakTime?'Skip Break':'Done!']})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleExtendTimer,disabled:isBreakTime?!allowExtendBreak:timeRemaining>0||currentTaskIndex===-1||!tasks[currentTaskIndex]||!tasks[currentTaskIndex].started||tasks[currentTaskIndex].completed,className:\"group relative overflow-hidden bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 text-white px-5 py-3.5 sm:px-6 sm:py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center gap-2 sm:gap-3\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-5 w-5\"}),\"Extend\"]})]})]})]}),activeView==='plan'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-4 h-full\",children:[/*#__PURE__*/_jsxs(UICard,{className:\"lg:col-span-1 bg-gradient-to-br from-dark-100/90 to-dark-200/90 flex flex-col shadow-md hover:shadow-lg transition-all duration-500 border-0\",children:[\" \",/*#__PURE__*/_jsx(UICardHeader,{className:\"py-3 border-b border-dark-300/25\",children:/*#__PURE__*/_jsx(UICardTitle,{className:\"text-lg md:text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent text-center\",children:\"Plan Your Day\"})}),/*#__PURE__*/_jsxs(UICardContent,{className:\"flex-grow flex flex-col overflow-hidden p-6\",children:[\" \",/*#__PURE__*/_jsx(TaskFormC,{onAddTask:handleAddTask}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-dark-300/40 space-y-2.5 flex-grow overflow-y-auto\",children:[\" \",/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-cyanAccent mb-2\",children:\"Daily Stats\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 space-y-2.5 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-subtleText flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-block w-1.5 h-1.5 rounded-full bg-cyanAccent mr-1.5\"}),\"Total Tasks:\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-grey-400 font-semibold\",children:tasks.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-subtleText flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-block w-1.5 h-1.5 rounded-full bg-purple-500 mr-1.5\"}),\"Total Planned:\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-teal-400 font-semibold\",children:[dailyStats.totalPlannedTime,\" min\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-subtleText flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-block w-1.5 h-1.5 rounded-full bg-green-500 mr-1.5\"}),\"Remaining:\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-teal-400 font-semibold\",children:[dailyStats.estimatedRemainingTaskTimeMinutes,\" min\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-subtleText flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-block w-1.5 h-1.5 rounded-full bg-amber-500 mr-1.5\"}),\"P(Not Finishing):\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-teal-400 font-semibold\",children:[dailyStats.probNotFinishing,\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-dark-300/40 space-y-2.5\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsSessionEndTimeExpanded(!isSessionEndTimeExpanded),className:\"w-full flex justify-between items-center text-sm font-semibold text-cyanAccent mb-2 focus:outline-none hover:text-brightAccent transition-colors\",children:[\"Session End Time\",isSessionEndTimeExpanded?/*#__PURE__*/_jsx(ChevronDown,{className:\"h-5 w-5\"}):/*#__PURE__*/_jsx(ChevronRight,{className:\"h-5 w-5\"})]}),isSessionEndTimeExpanded&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 space-y-2.5 text-xs animate-fadeIn\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-3.5 w-3.5 mr-1 text-cyanAccent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xs md:text-sm\",children:\"Set End Time\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\",children:customFinishTime||'Not Set'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:customFinishTime||'',onChange:e=>setCustomFinishTime(e.target.value),className:\"w-full bg-dark-200/70 border border-dark-300/50 rounded p-1.5 text-xs md:text-sm focus:ring-cyanAccent focus:border-cyanAccent appearance-none\",style:{colorScheme:theme==='dark'?'dark':'light'}// Ensures native time picker matches theme\n}),/*#__PURE__*/_jsx(UIButton,{variant:\"destructive\",size:\"sm\",onClick:()=>setCustomFinishTime(null),disabled:!customFinishTime,className:\"py-1 px-2 text-xs\",children:\"Clear\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[9px] md:text-[10px] text-subtleText/70 mt-1.5 pl-0.5\",children:\"Set a temporary end time for today's session. Overrides Daily Reset Time for P(Not Finish).\"})]})]})]}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"mt-auto pt-4 border-t border-dark-300/40\",children:/*#__PURE__*/_jsx(UIButton,{variant:\"destructive\",size:\"sm\",onClick:handleClearAllTasks,disabled:tasks.length===0,className:\"w-full py-2 text-xs\",children:\"Clear All Tasks\"})})]})]}),/*#__PURE__*/_jsxs(UICard,{className:\"lg:col-span-2 bg-gradient-to-br from-dark-100/90 to-dark-200/90 flex flex-col shadow-md hover:shadow-lg transition-all duration-500 border-0\",children:[\" \",/*#__PURE__*/_jsx(UICardHeader,{className:\"py-3 border-b border-dark-300/25\",children:/*#__PURE__*/_jsx(UICardTitle,{className:\"text-lg md:text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent text-center\",children:\"Today's Tasks\"})}),/*#__PURE__*/_jsx(UICardContent,{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"tall-task-list\",children:/*#__PURE__*/_jsx(TaskListC,{className:\"task-list-override\",style:{\"--task-max-height\":\"400px\"}// CSS variable that will be used in TaskListC\n,tasks:[...tasks].sort((a,b)=>{// Sort uncompleted tasks first\nif(a.completed&&!b.completed)return 1;if(!a.completed&&b.completed)return-1;return 0;// Keep original order within each group\n}),onRemoveTask:handleRemoveTask,onStartTask:taskId=>{const currentTasks=tasks;const taskIndex=currentTasks.findIndex(t=>t.id===taskId);if(taskIndex!==-1){if(taskIndex<0||taskIndex>=currentTasks.length||!currentTasks[taskIndex]){console.error(\"[App onStartTask] taskIndex out of bounds for current tasks.\",{taskId,taskIndex,currentTasksLength:currentTasks.length});toast({title:\"Task Sync Issue\",description:\"State inconsistency before starting timer. Please try again.\",variant:\"destructive\"});return;}startTimer(taskIndex);}else{console.error(\"[App onStartTask] Task ID not found in current tasks:\",{taskId});toast({title:\"Task Not Found\",description:\"The selected task could not be found to start.\",variant:\"destructive\"});}},currentTaskIndex:currentTaskIndex,activeTaskOriginalId:activeTaskOriginalId,isTimerActive:isTimerActive,isBreakTime:isBreakTime,timeRemaining:timeRemaining})})})]})]}),activeView==='spirals'&&/*#__PURE__*/_jsxs(UICard,{className:\"bg-gradient-to-br from-dark-100/90 to-dark-200/90 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500 border-0\",children:[\" \",/*#__PURE__*/_jsx(UICardHeader,{className:\"py-3 border-b border-dark-300/25\",children:/*#__PURE__*/_jsx(UICardTitle,{className:\"text-lg md:text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent text-center\",children:\"Spirals (Ideas for Later)\"})}),/*#__PURE__*/_jsxs(UICardContent,{className:\"flex-grow flex flex-col overflow-hidden p-6 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNTAgOTBjMjIuMDkxIDAgNDAtMTcuOTA5IDQwLTQwUzcyLjA5MSAxMCA1MCAxMCAxMCAyNy45MDkgMTAgNTBzMTcuOTA5IDQwIDQwIDQweiIgc3Ryb2tlPSIjMkQzNzQ4IiBmaWxsPSJub25lIiBvcGFjaXR5PSIuMDMiLz48L3N2Zz4=')] bg-[length:80px_80px]\",children:[\" \",/*#__PURE__*/_jsx(SpiralFormC,{onAddSpiral:handleAddSpiral}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex-grow overflow-y-auto\",children:/*#__PURE__*/_jsx(SpiralListC,{spirals:spirals,onRemoveSpiral:handleRemoveSpiral,onMoveSpiralToTasks:handleMoveSpiralToTasks})})]})]}),activeView==='settings'&&/*#__PURE__*/_jsxs(UICard,{className:\"bg-gradient-to-br from-dark-100/90 to-dark-200/90 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500 border-0\",children:[\" \",/*#__PURE__*/_jsx(UICardHeader,{className:\"py-3 border-b border-dark-300/25\",children:/*#__PURE__*/_jsx(UICardTitle,{className:\"text-lg md:text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent text-center\",children:\"App Settings\"})}),/*#__PURE__*/_jsxs(UICardContent,{className:\"flex-grow flex flex-col p-6 text-sm md:text-base overflow-y-auto\",children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5 md:space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 md:p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Moon,{className:\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xs md:text-sm\",children:\"Theme\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5 bg-dark-200/80 rounded-full p-0.5\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"\".concat(theme==='dark'?'bg-dark-100 text-white':'text-subtleText',\" rounded-full px-2.5 py-1 text-[10px] md:text-xs flex items-center transition-all duration-300\"),onClick:()=>setTheme('dark'),children:[/*#__PURE__*/_jsx(Moon,{className:\"h-2.5 w-2.5 md:h-3 md:w-3 mr-1\"}),\"Dark\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"\".concat(theme==='light'?'bg-dark-100 text-white':'text-subtleText',\" rounded-full px-2.5 py-1 text-[10px] md:text-xs flex items-center transition-all duration-300\"),onClick:()=>setTheme('light'),children:[/*#__PURE__*/_jsx(Sun,{className:\"h-2.5 w-2.5 md:h-3 md:w-3 mr-1\"}),\"Light\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 md:p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xs md:text-sm\",children:\"Motivation Type\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\",children:quoteType.charAt(0).toUpperCase()+quoteType.slice(1)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-1.5 text-[10px] md:text-xs\",children:Object.keys(quoteCategories).map(type=>/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(quoteType===type?'bg-cyanAccent/30 text-cyanAccent font-semibold':'bg-dark-200/40 text-subtleText',\" rounded p-1.5 text-center cursor-pointer hover:bg-cyanAccent/20 hover:text-cyanAccent transition-colors\"),onClick:()=>setQuoteType(type),children:type.charAt(0).toUpperCase()+type.slice(1)},type))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 md:p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Volume2,{className:\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xs md:text-sm\",children:\"Sound Notifications\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(soundEnabled?'bg-dark-200/80 text-white':'bg-dark-200/30 text-subtleText opacity-60',\" hover:bg-dark-300/80 transition-colors rounded-full p-1 md:p-1.5\"),onClick:()=>setSoundEnabled(true),children:/*#__PURE__*/_jsx(Volume2,{className:\"h-3.5 w-3.5 md:h-4 md:w-4\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(!soundEnabled?'bg-dark-200/80 text-white':'bg-dark-200/30 text-subtleText opacity-60',\" hover:bg-dark-300/80 transition-colors rounded-full p-1 md:p-1.5\"),onClick:()=>setSoundEnabled(false),children:/*#__PURE__*/_jsx(VolumeX,{className:\"h-3.5 w-3.5 md:h-4 md:w-4\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 md:p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Timer,{className:\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xs md:text-sm\",children:\"Allow Extending Breaks\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(allowExtendBreak?'bg-dark-100 text-white':'text-subtleText',\" rounded-full px-2.5 py-1 text-[10px] md:text-xs flex items-center transition-all duration-300\"),onClick:()=>setAllowExtendBreak(true),children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(!allowExtendBreak?'bg-dark-100 text-white':'text-subtleText',\" rounded-full px-2.5 py-1 text-[10px] md:text-xs flex items-center transition-all duration-300\"),onClick:()=>setAllowExtendBreak(false),children:\"No\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 md:p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Timer,{className:\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xs md:text-sm\",children:\"Default Break Duration\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\",children:[breakDuration,\" minutes\"]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"1\",max:\"15\",step:\"1\",value:breakDuration,onChange:e=>setBreakDuration(parseInt(e.target.value,10)),className:\"w-full h-1.5 bg-dark-300 rounded-lg appearance-none cursor-pointer range-thumb-cyanAccent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-[10px] md:text-xs text-subtleText/80 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"1 min\"}),/*#__PURE__*/_jsx(\"span\",{children:\"15 min\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 md:p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Award,{className:\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xs md:text-sm\",children:\"Points System\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\",children:\"Enabled\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-1.5 mt-2 text-[10px] md:text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-200/40 rounded p-1.5 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Base Score (Focus):\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-cyanAccent\",children:\"1 pt per minute\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-200/40 rounded p-1.5 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Time Saved Bonus:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-cyanAccent\",children:\"1 pt per minute saved\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-200/40 rounded p-1.5 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Task Extension Penalty:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-500\",children:[\"-\",POINTS_DEDUCTION_FOR_EXTENSION,\" pts\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[9px] md:text-[10px] text-subtleText/70 mt-1.5 pl-0.5\",children:\"Score is based on total minutes focused and minutes saved compared to estimated duration. Extending tasks deducts points.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 md:p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xs md:text-sm\",children:\"Daily Reset Time\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\",children:dailyResetTime})]}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:dailyResetTime,onChange:e=>setDailyResetTime(e.target.value),className:\"w-full bg-dark-200/70 border border-dark-300/50 rounded p-1.5 text-xs md:text-sm focus:ring-cyanAccent focus:border-cyanAccent appearance-none\",style:{colorScheme:theme==='dark'?'dark':'light'}}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[9px] md:text-[10px] text-subtleText/70 mt-1.5 pl-0.5\",children:\"Time at which tasks, score, and timers reset daily. Spirals and historical stats are not affected.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-300/25 rounded-md p-3 md:p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(BrainCircuit,{className:\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-xs md:text-sm\",children:\"About\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] md:text-xs text-subtleText/80\",children:\"Annoying Pomodoro v0.2\"})]})]})]})]}),activeView==='dashboard'&&/*#__PURE__*/_jsx(DashboardViewC,{})]})]}),/*#__PURE__*/_jsx(Toaster,{}),/*#__PURE__*/_jsx(PromptDialog,{isOpen:isPromptOpen,onOpenChange:setIsPromptOpen,title:promptConfig.title,message:promptConfig.message,inputLabel:promptConfig.inputLabel,defaultValue:promptConfig.defaultValue,confirmText:promptConfig.confirmText,cancelText:promptConfig.cancelText,onConfirm:promptConfig.onConfirm,placeholder:promptConfig.placeholder})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","Button","UIButton","Card","UICard","CardHeader","UICardHeader","CardTitle","UICardTitle","CardContent","UICardContent","TaskFormC","TaskListC","Toaster","toast","confetti","PromptDialog","SpiralFormC","SpiralListC","DashboardViewC","statsHistory","Timer","CheckCircle","Award","Coffee","AlertTriangle","Play","Moon","Sun","Volume2","VolumeX","BrainCircuit","Clock","Plus","Pause","ChevronDown","ChevronRight","ListChecks","SlidersHorizontal","PieChart","AlertCircle","jsx","_jsx","jsxs","_jsxs","quoteCategories","nagging","rude","annoying","abusive","POINTS_DEDUCTION_FOR_EXTENSION","formatTime","totalSeconds","minutes","Math","floor","seconds","concat","String","padStart","formatDurationToHoursMinutes","totalSecondsInput","isNaN","hours","App","motivationalQuote","setMotivationalQuote","tasks","setTasks","spirals","setSpirals","focusCardRef","currentTaskIndex","setCurrentTaskIndex","timeRemaining","setTimeRemaining","isTimerActive","setIsTimerActive","isBreakTime","setIsBreakTime","timerIntervalId","score","setScore","notificationSound","quoteIntervalId","quoteType","setQuoteType","soundEnabled","setSoundEnabled","theme","setTheme","breakDuration","setBreakDuration","allowExtendBreak","setAllowExtendBreak","dailyResetTime","setDailyResetTime","lastResetTimestamp","setLastResetTimestamp","customFinishTime","setCustomFinishTime","isLoaded","setIsLoaded","activeView","setActiveView","sessionStartTime","setSessionStartTime","displayedIdleTime","setDisplayedIdleTime","isSessionEndTimeExpanded","setIsSessionEndTimeExpanded","isPromptOpen","setIsPromptOpen","promptConfig","setPromptConfig","title","message","inputLabel","defaultValue","confirmText","cancelText","onConfirm","placeholder","navItems","id","label","icon","color","activeColor","getIconClass","isActive","itemColor","calculateFocusTime","reduce","total","task","completed","timeSpentSeconds","now","Date","timeElapsedSinceStart","timerStartTime","savedQuoteType","localStorage","getItem","savedSoundEnabled","savedTheme","savedBreakDuration","savedAllowExtendBreak","initialDailyResetTime","parseInt","resetHour","resetMinute","split","map","Number","todayDateObj","todaysResetDateTime","getFullYear","getMonth","getDate","getTime","yesterdayDateObj","setDate","yesterdaysResetDateTime","savedLastResetTs","currentLastResetTs","performReset","previousDayStats","date","toISOString","focusTime","idleTime","tasksCompleted","filter","t","length","totalTasks","totalPlannedTime","estimatedDuration","saveDailyStats","sTasks","JSON","parse","e","console","error","sScore","sSessionStart","sCurrentTaskIndex","sTimeRemaining","sIsTimerActive","sIsBreakTime","savedSpirals","setItem","toString","removeItem","stringify","currentTasks","currentScore","currentDisplayedIdleTime","today","currentStats","document","body","classList","add","remove","current","Audio","src","process","env","PUBLIC_URL","Notification","permission","requestPermission","then","getRandomQuote","quotes","random","playNotificationSound","log","currentTime","play","catch","name","description","variant","pauseNotificationSound","paused","pause","showDesktopNotification","updateMotivationalQuote","startMotivationalQuoteInterval","setInterval","stopMotivationalQuoteInterval","clearInterval","handleAddTask","newTaskData","prevTasks","duration","started","completionTimestamp","handleRemoveTask","taskId","_tasks$currentTaskInd","taskToRemove","find","startTimer","taskIndex","_tasks$currentTaskInd2","taskToStart","idx","_objectSpread","timeToSet","handlePauseTimer","handleResumeTimer","handleTaskDone","pointsEarnedThisTask","timeWhenDoneSeconds","actualTimeSpentMinutes","round","estimatedSeconds","secondsSaved","max","bonusMinutes","prevScore","rect","getBoundingClientRect","originX","left","width","window","innerWidth","originY","top","height","innerHeight","particleCount","spread","origin","x","y","disableForReducedMotion","finalTimeSpentSeconds","handleSkipBreak","handleExtendTimer","context","defaultExtension","currentTimerValue","extendMinutesText","extendMinutes","newTimeRemaining","toastDescription","prevTime","updateIdleTime","totalSessionTimeSeconds","totalFocusTimeSeconds","calculatedIdleTime","intervalId","timerDisplayColor","totalTaskSeconds","percentageRemaining","calculateDailyStats","totalPlannedDuration","acc","accumulatedFocusTimeSeconds","remainingUncompletedTaskMinutes","ceil","timeLeftTodayMinutes","endOfTodayTargetTime","finishHour","finishMinute","customEndTime","setHours","todayReset","tomorrowReset","localMsLeft","probNotFinishingPercentage","P_base_workload","min","inefficiency_penalty_multiplier","efficiency_metric","raw_probability","estimatedRemainingTaskTimeMinutes","probNotFinishing","dailyStats","activeTaskObject","currentDisplayTaskName","activeTaskOriginalId","handleClearAllTasks","handleAddSpiral","spiralName","trim","prev","handleRemoveSpiral","spiralId","spiralToRemove","s","handleMoveSpiralToTasks","spiralToMove","durationText","handleMasterPlayPause","firstUncompletedTaskIndex","findIndex","className","children","dangerouslySetInnerHTML","__html","style","animationDelay","backgroundImage","alt","item","IconComponent","onClick","ref","viewBox","cx","cy","r","fill","strokeWidth","stroke","strokeLinecap","strokeDasharray","strokeDashoffset","totalTime","elapsed","progress","disabled","onAddTask","type","value","onChange","target","colorScheme","size","sort","a","b","onRemoveTask","onStartTask","currentTasksLength","onAddSpiral","onRemoveSpiral","onMoveSpiralToTasks","charAt","toUpperCase","slice","Object","keys","step","isOpen","onOpenChange"],"sources":["/home/poodle/Work/TimeBoxing/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Button as UIButton } from './components/ui/Button'; // Renamed to avoid conflict\nimport { Card as UICard, CardHeader as UICardHeader, CardTitle as UICardTitle, CardContent as UICardContent } from './components/ui/Card'; // Renamed\nimport TaskFormC from './components/TaskForm'; // Renamed\nimport TaskListC from './components/TaskList'; // Renamed\nimport { Toaster } from './components/Toaster';\nimport { toast } from './hooks/use-toast';\nimport confetti from 'canvas-confetti';\nimport { PromptDialog } from './components/ui/PromptDialog';\nimport SpiralFormC from './components/SpiralForm'; // Renamed\nimport SpiralListC from './components/SpiralList'; // Renamed\nimport DashboardViewC from './components/DashboardView'; // Renamed\nimport * as statsHistory from './lib/statsHistory';\nimport { Timer, CheckCircle, Award, Coffee, AlertTriangle, Play, Moon, Sun, Volume2, VolumeX, BrainCircuit, Clock, Plus, Pause, ChevronDown, ChevronRight, ListChecks, SlidersHorizontal, PieChart, AlertCircle } from 'lucide-react'; // Removed unused icons\n\n// Different quote categories\nconst quoteCategories = {\n  nagging: [\n    \"You won't be able to do it... Prove me wrong!\",\n    \"Don't disappoint future you.\",\n  \"Less scrolling, more doing!\",\n    \"That task isn't going to complete itself.\",\n  \"Are you a talker or a doer?\",\n  \"Time is ticking. Are you?\",\n  \"Stop procrastinating. Start dominating.\",\n  \"Is this the best use of your time right now?\",\n    \"The clock is your boss. Don't get fired.\"\n  ],\n  rude: [\n    \"Are you actually going to finish this time?\",\n    \"Your procrastination is impressive, really.\",\n    \"Oh look, another task you'll abandon.\",\n    \"Half-finished tasks won't impress anyone.\",\n    \"You call that productivity? I've seen snails move faster.\",\n    \"Your to-do list is laughing at you right now.\",\n    \"Great, another project for your 'abandoned' collection.\",\n    \"Are you even trying at this point?\",\n    \"Your focus is as stable as a house of cards.\"\n  ],\n  annoying: [\n    \"Tick tock! Time is passing! Tick tock!\",\n    \"Hey! Hey! Hey! You should be working!\",\n    \"Don't stop! Keep going! Don't stop! Keep going!\",\n    \"Are you distracted yet? How about now? Now?\",\n    \"This won't complete itself! This won't complete itself!\",\n    \"Focus! Focus! Focus! Are you focused yet?\",\n    \"Hey, remember that deadline? It's coming! Coming! Coming!\",\n    \"Still working? Still working? Still working?\",\n    \"Did you finish yet? No? How about now? Now? Now?\"\n  ],\n  abusive: [\n    \"Your productivity is an absolute joke.\",\n    \"Even a child could finish this faster than you.\",\n    \"Pathetic effort as usual.\",\n    \"You'll never amount to anything at this rate.\",\n    \"Everyone else finished hours ago. What's your excuse?\",\n    \"Failure is your only consistent achievement.\",\n    \"No wonder nobody takes your work seriously.\",\n    \"This is why you're always behind everyone else.\",\n    \"Your lack of discipline is embarrassing.\"\n  ]\n};\n\nconst POINTS_DEDUCTION_FOR_EXTENSION = 2; // Penalty for extending a task\n\n// Moved helper functions before their usage in useCallback hooks\nconst formatTime = (totalSeconds) => {\n  const minutes = Math.floor(totalSeconds / 60);\n  const seconds = totalSeconds % 60;\n  return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n};\n\nconst formatDurationToHoursMinutes = (totalSecondsInput) => {\n  const totalSeconds = Math.floor(totalSecondsInput);\n  if (isNaN(totalSeconds) || totalSeconds < 0) return \"0 min\";\n  const hours = Math.floor(totalSeconds / 3600);\n  const minutes = Math.floor((totalSeconds % 3600) / 60);\n  if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} ${minutes} min`;\n  if (minutes > 0) return `${minutes} min`;\n  return \"0 min\";\n};\n\nfunction App() {\n  const [motivationalQuote, setMotivationalQuote] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n  const [spirals, setSpirals] = useState([]); // For spirals feature\n  \n  const focusCardRef = useRef(null); // Ref for the Focus view card\n  \n  const [currentTaskIndex, setCurrentTaskIndex] = useState(-1); // Index of the active task in the tasks array\n  const [timeRemaining, setTimeRemaining] = useState(0); // In seconds\n  const [isTimerActive, setIsTimerActive] = useState(false); // Is the countdown interval running?\n  const [isBreakTime, setIsBreakTime] = useState(false);\n  const timerIntervalId = useRef(null); // Using useRef to hold interval ID to avoid re-renders causing issues\n  \n  const [score, setScore] = useState(0);\n  const notificationSound = useRef(null);\n  const quoteIntervalId = useRef(null);\n\n  // Settings state\n  const [quoteType, setQuoteType] = useState(\"abusive\"); // Default quote type\n  const [soundEnabled, setSoundEnabled] = useState(true); // Default sound setting\n  const [theme, setTheme] = useState(\"dark\"); // Default theme setting\n  const [breakDuration, setBreakDuration] = useState(5); // Default break duration in minutes\n  const [allowExtendBreak, setAllowExtendBreak] = useState(true); // Default setting for extending breaks\n  const [dailyResetTime, setDailyResetTime] = useState(\"00:00\"); // Default daily reset time\n  const [lastResetTimestamp, setLastResetTimestamp] = useState(null); // When the last daily reset occurred (timestamp)\n  const [customFinishTime, setCustomFinishTime] = useState(null); // Custom finish time for today\n  const [isLoaded, setIsLoaded] = useState(false); // To prevent saves before loads complete\n  const [activeView, setActiveView] = useState('focus'); // 'focus', 'plan', 'spirals', 'settings', 'dashboard'\n  const [sessionStartTime, setSessionStartTime] = useState(null); // Timestamp when the first task of the session started\n  const [displayedIdleTime, setDisplayedIdleTime] = useState(0); // Idle time in seconds\n  const [isSessionEndTimeExpanded, setIsSessionEndTimeExpanded] = useState(false);\n\n  // State for PromptDialog\n  const [isPromptOpen, setIsPromptOpen] = useState(false);\n  const [promptConfig, setPromptConfig] = useState({\n    title: '',\n    message: '',\n    inputLabel: '',\n    defaultValue: '',\n    confirmText: 'Confirm',\n    cancelText: 'Cancel',\n    onConfirm: () => {},\n    placeholder: '',\n  });\n\n  const navItems = [\n    { id: 'focus', label: 'Focus', icon: Timer, color: 'violet-500', activeColor: 'violet-500' },\n    { id: 'plan', label: 'Plan', icon: ListChecks, color: 'emerald-500', activeColor: 'emerald-500' },\n    { id: 'spirals', label: 'Spirals', icon: BrainCircuit, color: 'sky-400', activeColor: 'indigo-500' },\n    { id: 'settings', label: 'Settings', icon: SlidersHorizontal, color: 'slate-400', activeColor: 'gray-400' },\n    { id: 'dashboard', label: 'Stats', icon: PieChart, color: 'amber-500', activeColor: 'yellow-500' }\n  ];\n\n  const getIconClass = (isActive, itemColor) => {\n    if (isActive) {\n      if (itemColor === 'violet-500') return 'text-violet-500';\n      if (itemColor === 'sky-400') return 'text-sky-400';\n      if (itemColor === 'orange-500') return 'text-orange-500';\n      if (itemColor === 'cyanAccent') return 'text-cyanAccent';\n      if (itemColor === 'emerald-500') return 'text-emerald-500';\n      if (itemColor === 'rose-500') return 'text-rose-500';\n      if (itemColor === 'emerald-600') return 'text-emerald-600';\n      if (itemColor === 'slate-400') return 'text-slate-400';\n      if (itemColor === 'amber-500') return 'text-amber-500';\n      if (itemColor === 'black-600') return 'text-gray-600'; // Assuming black-600 should be gray when inactive\n      return 'text-white'; // Default fallback\n    }\n    return 'text-subtleText group-hover:text-subtleText/70';\n  };\n\n  // Calculate total focus time from completed tasks - Wrapped in useCallback\n  // DEFINED HERE, INSIDE App and BEFORE its usage in other hooks/functions\n  const calculateFocusTime = useCallback(() => {\n    return tasks.reduce((total, task) => {\n      if (task.completed) {\n        return total + (task.timeSpentSeconds || 0);\n      } else if (task.id === (tasks[currentTaskIndex] && tasks[currentTaskIndex].id) && !task.completed && !isBreakTime) {\n        const now = Date.now();\n        const timeElapsedSinceStart = Math.floor((now - tasks[currentTaskIndex].timerStartTime) / 1000);\n        return total + (task.timeSpentSeconds || 0) + timeElapsedSinceStart;\n      }\n      return total + (task.timeSpentSeconds || 0);\n    }, 0);\n  }, [tasks, currentTaskIndex, isBreakTime]);\n\n  // Load settings from localStorage on initial render\n  useEffect(() => { // eslint-disable-line react-hooks/exhaustive-deps\n    const savedQuoteType = localStorage.getItem('quoteType');\n    const savedSoundEnabled = localStorage.getItem('soundEnabled');\n    const savedTheme = localStorage.getItem('theme');\n    const savedBreakDuration = localStorage.getItem('breakDuration');\n    const savedAllowExtendBreak = localStorage.getItem('allowExtendBreak');\n    const initialDailyResetTime = localStorage.getItem('dailyResetTime') || \"00:00\"; // Get saved or default\n    setDailyResetTime(initialDailyResetTime);\n    \n    // Load other settings\n    if (savedQuoteType) setQuoteType(savedQuoteType);\n    if (savedSoundEnabled !== null) setSoundEnabled(savedSoundEnabled === 'true');\n    if (savedTheme) setTheme(savedTheme);\n    if (savedBreakDuration) setBreakDuration(parseInt(savedBreakDuration, 10));\n    if (savedAllowExtendBreak !== null) setAllowExtendBreak(savedAllowExtendBreak === 'true');\n\n    // --- Daily Reset Logic ---\n    const now = Date.now();\n    const [resetHour, resetMinute] = initialDailyResetTime.split(':').map(Number);\n    \n    const todayDateObj = new Date(now);\n    const todaysResetDateTime = new Date(todayDateObj.getFullYear(), todayDateObj.getMonth(), todayDateObj.getDate(), resetHour, resetMinute, 0, 0).getTime();\n    \n    const yesterdayDateObj = new Date(now);\n    yesterdayDateObj.setDate(yesterdayDateObj.getDate() - 1);\n    const yesterdaysResetDateTime = new Date(yesterdayDateObj.getFullYear(), yesterdayDateObj.getMonth(), yesterdayDateObj.getDate(), resetHour, resetMinute, 0, 0).getTime();\n\n    const savedLastResetTs = localStorage.getItem('lastResetTimestamp');\n    let currentLastResetTs = savedLastResetTs ? parseInt(savedLastResetTs, 10) : null;\n    let performReset = false;\n\n    if (currentLastResetTs === null) {\n      // First run or cleared storage. Establish baseline. States are already at defaults from useState.\n      currentLastResetTs = (now >= todaysResetDateTime) ? todaysResetDateTime : yesterdaysResetDateTime;\n      // No data state reset calls (like setTasks([])) needed here, useState did that.\n      // localStorage for these items will be updated by the save hook if they are new.\n    } else {\n      if (now >= todaysResetDateTime && currentLastResetTs < todaysResetDateTime) {\n        performReset = true;\n        currentLastResetTs = todaysResetDateTime; // Update to today's reset time\n      }\n    }\n    setLastResetTimestamp(currentLastResetTs); // Set state for lastResetTimestamp\n\n    // --- Load or Reset Data States ---\n    if (performReset) {\n      // Save the previous day's stats before resetting\n      const previousDayStats = {\n        date: new Date(currentLastResetTs - 86400000).toISOString().split('T')[0], // Yesterday's date\n        focusTime: calculateFocusTime(), // Usage of calculateFocusTime\n        idleTime: displayedIdleTime,\n        tasksCompleted: tasks.filter(t => t.completed).length,\n        score: score,\n        totalTasks: tasks.length,\n        totalPlannedTime: tasks.reduce((total, task) => total + task.estimatedDuration, 0)\n      };\n      \n      // Save stats to history\n      statsHistory.saveDailyStats(previousDayStats);\n      \n      // Now reset current day's data\n      setTasks([]);\n      setScore(0);\n      setSessionStartTime(null);\n      setCurrentTaskIndex(-1);\n      setTimeRemaining(0);\n      setIsTimerActive(false);\n      setIsBreakTime(false);\n      setDisplayedIdleTime(0);\n      // Spirals are NOT reset. Settings are NOT reset.\n      // The save useEffect will persist these new default values because isLoaded is still false.\n    } else {\n      // No reset due. Load data if it wasn't the very first run (i.e., savedLastResetTs was not null).\n      // If savedLastResetTs was null, it means it's effectively a first run for data, and useState defaults are appropriate.\n      if (savedLastResetTs) { \n        const sTasks = localStorage.getItem('tasks');\n        if (sTasks) { try { setTasks(JSON.parse(sTasks)); } catch (e) { console.error(\"Error parsing tasks from localStorage\", e); setTasks([]); } } else { setTasks([]); }\n        \n        const sScore = localStorage.getItem('score');\n        setScore(sScore ? (parseInt(sScore, 10) || 0) : 0);\n\n        const sSessionStart = localStorage.getItem('sessionStartTime');\n        setSessionStartTime(sSessionStart ? (parseInt(sSessionStart, 10) || null) : null);\n        \n        const sCurrentTaskIndex = localStorage.getItem('currentTaskIndex');\n        setCurrentTaskIndex(sCurrentTaskIndex ? (parseInt(sCurrentTaskIndex, 10) || -1) : -1);\n\n        const sTimeRemaining = localStorage.getItem('timeRemaining');\n        setTimeRemaining(sTimeRemaining ? (parseInt(sTimeRemaining, 10) || 0) : 0);\n\n        const sIsTimerActive = localStorage.getItem('isTimerActive');\n        setIsTimerActive(sIsTimerActive === 'true');\n\n        const sIsBreakTime = localStorage.getItem('isBreakTime');\n        setIsBreakTime(sIsBreakTime === 'true');\n      }\n    }\n\n    // Spirals are always loaded as they don't reset (or set to empty if not found)\n    const savedSpirals = localStorage.getItem('spirals');\n    if (savedSpirals) { try { setSpirals(JSON.parse(savedSpirals)); } catch (e) { console.error(\"Error parsing spirals from localStorage\", e); setSpirals([]); } } else { setSpirals([]); }\n    \n    setIsLoaded(true); \n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // ESLint disabled due to complex, time-sensitive logic that uses state values from *before* potential reset\n\n  // Save settings and data to localStorage whenever they change\n  useEffect(() => {\n    if (!isLoaded) return; \n\n    localStorage.setItem('quoteType', quoteType);\n    localStorage.setItem('soundEnabled', soundEnabled.toString());\n    localStorage.setItem('theme', theme);\n    localStorage.setItem('breakDuration', breakDuration.toString());\n    localStorage.setItem('allowExtendBreak', allowExtendBreak.toString());\n    localStorage.setItem('dailyResetTime', dailyResetTime);\n\n    if (lastResetTimestamp !== null) {\n      localStorage.setItem('lastResetTimestamp', lastResetTimestamp.toString());\n    } else {\n      localStorage.removeItem('lastResetTimestamp');\n    }\n    try { localStorage.setItem('tasks', JSON.stringify(tasks)); } catch (e) { console.error(\"Error stringifying tasks for localStorage\", e); }\n    try { localStorage.setItem('spirals', JSON.stringify(spirals)); } catch (e) { console.error(\"Error stringifying spirals for localStorage\", e); }\n    localStorage.setItem('score', score.toString());\n    if (sessionStartTime !== null) localStorage.setItem('sessionStartTime', sessionStartTime.toString()); else localStorage.removeItem('sessionStartTime');\n    localStorage.setItem('currentTaskIndex', currentTaskIndex.toString());\n    localStorage.setItem('timeRemaining', timeRemaining.toString());\n    localStorage.setItem('isTimerActive', isTimerActive.toString());\n    localStorage.setItem('isBreakTime', isBreakTime.toString());\n    \n    // Destructure tasks for clarity, though not strictly necessary for the fix\n    const currentTasks = tasks;\n    const currentScore = score;\n    const currentDisplayedIdleTime = displayedIdleTime;\n\n    if (currentTasks.length > 0 && sessionStartTime !== null) {\n      const today = new Date().toISOString().split('T')[0];\n      const currentStats = {\n        date: today,\n        focusTime: calculateFocusTime(),\n        idleTime: currentDisplayedIdleTime, // use destructured\n        tasksCompleted: currentTasks.filter(t => t.completed).length, // use destructured\n        score: currentScore, // use destructured\n        totalTasks: currentTasks.length, // use destructured\n        totalPlannedTime: currentTasks.reduce((total, task) => total + task.estimatedDuration, 0)\n      };\n      statsHistory.saveDailyStats(currentStats);\n    }\n  }, [quoteType, soundEnabled, theme, breakDuration, allowExtendBreak, dailyResetTime, tasks, spirals, score, sessionStartTime, currentTaskIndex, timeRemaining, isTimerActive, isBreakTime, isLoaded, lastResetTimestamp, displayedIdleTime, calculateFocusTime]);\n\n  // Apply theme class to body when it changes\n  useEffect(() => {\n    if (theme === 'light') {\n      document.body.classList.add('light-theme');\n    } else {\n      document.body.classList.remove('light-theme');\n    }\n  }, [theme]);\n\n  // Initialize motivational quote, sound, and notification permissions\n  useEffect(() => {\n    // Sound initialization (runs once)\n    notificationSound.current = new Audio();\n    notificationSound.current.src = `${process.env.PUBLIC_URL}/assets/annoyingNotification.mp3`;\n\n    // Notification permission request (runs once)\n    if (Notification.permission !== \"granted\" && Notification.permission !== \"denied\") {\n      Notification.requestPermission().then(permission => {\n        if (permission === \"granted\") console.error(\"Desktop notification permission granted.\");\n      });\n    }\n  }, []); // Empty dependency array: runs only on mount and unmount\n\n  // Motivational quote initialization and updates (runs when quoteType changes)\n  useEffect(() => {\n    const getRandomQuote = () => {\n      const quotes = quoteCategories[quoteType];\n      return quotes[Math.floor(Math.random() * quotes.length)];\n    };\n    setMotivationalQuote(getRandomQuote());\n  }, [quoteType]);\n\n  const playNotificationSound = useCallback(() => {\n    console.log(\"playNotificationSound\");\n    if (soundEnabled && notificationSound.current) {\n      // Ensure src is set (it should be from the initial useEffect, but as a fallback)\n      if (!notificationSound.current.src) {\n        notificationSound.current.src = `${process.env.PUBLIC_URL}/assets/annoyingNotification.mp3`;\n      }\n      notificationSound.current.currentTime = 0; // Reset sound to start\n      notificationSound.current.play()\n        .then(() => {\n          // console.error(\"Notification sound played successfully.\"); // Optional: for debugging\n        })\n        .catch(error => {\n          console.error(\"Error playing sound:\", error);\n          if (error.name === 'NotSupportedError') {\n            console.error(`NotSupportedError: Please ensure the audio file at \"${notificationSound.current.src}\" exists in the public/assets/ folder, is a valid audio format (e.g., MP3), and that the browser can access it.`);\n            toast({\n              title: \"Sound Playback Error\",\n              description: \"Could not play notification sound. Check file path and format.\",\n              variant: \"destructive\"\n            });\n          } else {\n            toast({\n              title: \"Sound Error\",\n              description: \"An issue occurred while trying to play the sound.\",\n              variant: \"destructive\"\n            });\n          }\n        });\n    }\n  }, [soundEnabled]); // Removed process.env.PUBLIC_URL from deps as it's constant\n\n  const pauseNotificationSound = useCallback(() => {\n    if (notificationSound.current && !notificationSound.current.paused) {\n      notificationSound.current.pause();\n      notificationSound.current.currentTime = 0; // Reset to beginning\n    }\n  }, []);\n\n  const showDesktopNotification = useCallback((title, body) => {\n    if (Notification.permission === \"granted\") new Notification(title, { body });\n  }, []);\n\n  // Motivational quote logic\n  const updateMotivationalQuote = useCallback(() => {\n    const getRandomQuote = () => {\n      const quotes = quoteCategories[quoteType];\n      return quotes[Math.floor(Math.random() * quotes.length)];\n    };\n    setMotivationalQuote(getRandomQuote());\n  }, [quoteType]);\n\n  const startMotivationalQuoteInterval = useCallback(() => {\n    if (!isTimerActive && !quoteIntervalId.current) {\n      updateMotivationalQuote();\n      quoteIntervalId.current = setInterval(updateMotivationalQuote, 30000);\n    }\n  }, [isTimerActive, updateMotivationalQuote]);\n\n  const stopMotivationalQuoteInterval = useCallback(() => {\n    if (quoteIntervalId.current) {\n      clearInterval(quoteIntervalId.current);\n      quoteIntervalId.current = null;\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isTimerActive) {\n      stopMotivationalQuoteInterval();\n    } else {\n      startMotivationalQuoteInterval();\n    }\n    return () => stopMotivationalQuoteInterval(); // Cleanup on unmount\n  }, [isTimerActive, startMotivationalQuoteInterval, stopMotivationalQuoteInterval]);\n\n\n  // Task Management\n  const handleAddTask = useCallback((newTaskData) => {\n    setTasks(prevTasks => [\n      ...prevTasks,\n      {\n        id: Date.now(),\n        name: newTaskData.name,\n        duration: newTaskData.duration, // user input in minutes\n        estimatedDuration: newTaskData.duration,\n        completed: false,\n        started: false,\n        timeSpentSeconds: 0,\n        timerStartTime: null,\n        completionTimestamp: null,\n      }\n    ]);\n    toast({ title: \"Task Added\", description: `\"${newTaskData.name}\" added to your list.` });\n  }, [setTasks]); // Added setTasks\n\n  const handleRemoveTask = useCallback((taskId) => {\n    const taskToRemove = tasks.find(t => t.id === taskId);\n    setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId));\n    if (taskToRemove) {\n      toast({ title: \"Task Removed\", description: `\"${taskToRemove.name}\" has been removed.`, variant: \"destructive\" });\n    }\n    if (currentTaskIndex !== -1 && tasks[currentTaskIndex]?.id === taskId) {\n      if (timerIntervalId.current) clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n      setCurrentTaskIndex(-1);\n      setTimeRemaining(0);\n      setIsTimerActive(false);\n      setIsBreakTime(false);\n    }\n  }, [tasks, currentTaskIndex, setTasks, setCurrentTaskIndex, setTimeRemaining, setIsTimerActive, setIsBreakTime]); // Added missing dependencies\n\n  // Timer Core Logic: Start, Pause, Resume, Done, Extend\n  const startTimer = useCallback((taskIndex) => {\n    // Guard 1: Basic validity and completion check\n    if (taskIndex < 0 || taskIndex >= tasks.length || !tasks[taskIndex]) {\n      toast({ title: \"Invalid Task\", description: \"Task not found or index is out of bounds.\", variant: \"destructive\" });\n      return;\n    }\n    if (tasks[taskIndex].completed) {\n      toast({ title: \"Task Completed\", description: `\"${tasks[taskIndex].name}\" is already completed.`, variant: \"default\" });\n      return;\n    }\n\n    // Guard 2: Check if another task is active or this specific one\n    if (isTimerActive && !isBreakTime && currentTaskIndex === taskIndex) {\n      toast({ title: \"Already Active\", description: `\"${tasks[taskIndex].name}\" is already running.`, variant: \"default\" });\n      return;\n    }\n    if (isTimerActive && !isBreakTime && currentTaskIndex !== -1 && currentTaskIndex !== taskIndex) { \n      toast({ title: \"Timer Busy\", description: `\"${tasks[currentTaskIndex]?.name || 'Another task'}\" is in progress. Complete or stop it first.`, variant: \"destructive\" });\n      return;\n    }\n    \n    pauseNotificationSound(); // Stop any ongoing notification sound\n\n    // Guard 3: Handle active break\n    if (isBreakTime) { \n      if (timerIntervalId.current) clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n      setIsBreakTime(false); // Stop the break\n      toast({ title: \"Break Interrupted\", description: \"Starting a new task.\" });\n    }\n\n    // Set session start time if this is the very first task being started\n    if (!sessionStartTime) {\n      setSessionStartTime(Date.now());\n    }\n\n    const taskToStart = tasks[taskIndex];\n\n    // This extra check is for absolute safety, though guards above should cover it.\n    if (!taskToStart || typeof taskToStart.duration === 'undefined') {\n        console.error(\"Critical error: taskToStart is invalid despite guards. taskIndex:\", taskIndex, \"task:\", taskToStart);\n        toast({ title: \"Task Data Error\", description: \"Cannot start task due to incomplete data. Please check console.\", variant: \"destructive\" });\n        return;\n    }\n    \n    setTasks(prevTasks =>\n      prevTasks.map((task, idx) =>\n        idx === taskIndex ? { ...task, started: true, timerStartTime: Date.now(), timeSpentSeconds: task.timeSpentSeconds || 0 } : task\n      )\n    );\n    setCurrentTaskIndex(taskIndex);\n    // If task was partially worked on, resume from remaining, else from full duration\n    const timeToSet = (taskToStart.duration * 60) - (taskToStart.timeSpentSeconds || 0);\n    setTimeRemaining(timeToSet > 0 ? timeToSet : taskToStart.duration * 60); // Ensure it doesn't start negative\n    setIsTimerActive(true);\n    setIsBreakTime(false); // Ensure break mode is off\n    toast({ title: \"Task Started\", description: `Timer for \"${taskToStart.name}\" has begun.` });\n  }, [tasks, isTimerActive, isBreakTime, currentTaskIndex, sessionStartTime, setSessionStartTime, setTasks, setCurrentTaskIndex, setTimeRemaining, setIsTimerActive, setIsBreakTime]); // Added missing dependencies\n\n  const handlePauseTimer = useCallback(() => {\n    if (timerIntervalId.current) { \n      clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n      setIsTimerActive(false); \n      toast({ title: isBreakTime ? \"Break Paused\" : \"Timer Paused\" });\n    }\n  }, [isBreakTime, setIsTimerActive]); // Added setIsTimerActive\n\n  const handleResumeTimer = useCallback(() => {\n    if (!isTimerActive && timeRemaining > 0 && \n        ((currentTaskIndex !== -1 && tasks[currentTaskIndex] && !tasks[currentTaskIndex].completed && !isBreakTime) || isBreakTime)) {\n       setIsTimerActive(true); \n       toast({ title: isBreakTime ? \"Break Resumed\" : \"Timer Resumed\" });\n    }\n  }, [isTimerActive, timeRemaining, currentTaskIndex, tasks, isBreakTime, setIsTimerActive]); // Added setIsTimerActive\n\n  const handleTaskDone = useCallback(() => {\n    if (currentTaskIndex === -1 || !tasks[currentTaskIndex] || tasks[currentTaskIndex].completed) {\n      toast({title: \"No Active Task\", description: \"No task to mark as done.\", variant: \"default\"});\n      return;\n    }\n\n    pauseNotificationSound(); // Stop any ongoing notification sound\n\n    const task = tasks[currentTaskIndex];\n    let pointsEarnedThisTask = 0;\n    \n    const timeWhenDoneSeconds = task.timerStartTime ? (Date.now() - task.timerStartTime) / 1000 : task.timeSpentSeconds;\n    const actualTimeSpentMinutes = Math.round(timeWhenDoneSeconds / 60); // Round to nearest minute for scoring\n\n    // Base score: 1 point per minute of focus time\n    pointsEarnedThisTask += actualTimeSpentMinutes;\n\n    // Bonus for finishing early: 1 point per minute saved\n    const estimatedSeconds = task.estimatedDuration * 60;\n    const secondsSaved = Math.max(0, estimatedSeconds - timeWhenDoneSeconds);\n    const bonusMinutes = Math.round(secondsSaved / 60); // Round saved seconds to nearest minute\n    pointsEarnedThisTask += bonusMinutes;\n    \n    // Ensure score is not negative (shouldn't happen with this logic, but as a safeguard)\n    pointsEarnedThisTask = Math.max(0, pointsEarnedThisTask);\n\n    setScore(prevScore => prevScore + pointsEarnedThisTask);\n    // Confetti centered on the focus card\n    if (focusCardRef.current) {\n      const rect = focusCardRef.current.getBoundingClientRect();\n      const originX = (rect.left + rect.width / 2) / window.innerWidth;\n      const originY = (rect.top + rect.height / 2) / window.innerHeight;\n      confetti({\n        particleCount: 150,\n        spread: 100,\n        origin: { x: originX, y: originY },\n        disableForReducedMotion: true // Good practice for accessibility\n      });\n    } else {\n       // Fallback to default origin if ref is not available\n    confetti({ particleCount: 150, spread: 100, origin: { y: 0.6 } });\n    }\n\n    // Use actualTimeSpent (which could be > estimated if they let timer run out and clicked done)\n    // for the task's final timeSpentSeconds for record keeping.\n    const finalTimeSpentSeconds = timeWhenDoneSeconds;\n\n    setTasks(prevTasks => prevTasks.map((t, idx) =>\n      idx === currentTaskIndex ? { \n        ...t, \n        completed: true, \n        timeSpentSeconds: finalTimeSpentSeconds, \n        duration: finalTimeSpentSeconds / 60, // Update duration to reflect actual time spent\n        completionTimestamp: Date.now() \n      } : t\n    ));\n\n    if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null;\n    }\n    setIsTimerActive(false); \n    \n    showDesktopNotification(\"Task Finished!\", `\"${task.name}\" is complete.`);\n    toast({ title: \"Task Finished!\", description: `\"${task.name}\" complete. Points: +${pointsEarnedThisTask}` });\n    \n    setIsBreakTime(true);\n    setTimeRemaining(breakDuration * 60);\n    setCurrentTaskIndex(-1); \n    setIsTimerActive(true); \n    toast({title: \"Break Time!\", description: `Taking a ${breakDuration} minute break.`});\n  }, [tasks, currentTaskIndex, playNotificationSound, showDesktopNotification, breakDuration, setScore, setTasks, setIsBreakTime, setTimeRemaining, setCurrentTaskIndex, setIsTimerActive, focusCardRef]); // Dependencies unchanged\n\n  const handleSkipBreak = useCallback(() => {\n    if (isBreakTime && isTimerActive) {\n      if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null;\n      }\n      pauseNotificationSound(); // Stop any ongoing notification sound\n      setIsTimerActive(false);\n      setIsBreakTime(false);\n      setTimeRemaining(0);\n      setCurrentTaskIndex(-1); \n      toast({title: \"Break Skipped\", description: \"Break ended. Ready for the next task?\"});\n    } else {\n      toast({title: \"No Active Break\", description: \"There is no active break to skip.\", variant: \"default\"});\n    }\n  }, [isBreakTime, isTimerActive, setIsTimerActive, setIsBreakTime, setTimeRemaining, setCurrentTaskIndex]); // Added missing dependencies\n\n  const handleExtendTimer = useCallback(() => {\n    // If no task active AND not break time, nothing to extend\n    if (currentTaskIndex === -1 && !isBreakTime) {\n      toast({title: \"No Timer Active\", description: \"Start a task or break to extend its time.\", variant: \"default\"});\n      return;\n    }\n\n    pauseNotificationSound(); // Stop any ongoing notification sound\n\n    // If it's a task, check if it's completed \n    // (This check is also in the button's disabled logic, but good for safety)\n    if (!isBreakTime && tasks[currentTaskIndex] && tasks[currentTaskIndex].completed) {\n        toast({title: \"Task Completed\", description: `Task \"${tasks[currentTaskIndex].name}\" is already completed and cannot be extended.`, variant: \"default\"});\n        return;\n    }\n\n    // If it's a break, check if extending breaks is allowed\n    if (isBreakTime && !allowExtendBreak) {\n      toast({title: \"Extend Break Disabled\", description: \"Extending break time is currently disabled in settings.\", variant: \"default\"});\n      return;\n    }\n\n    // For tasks, time must be 0. For breaks, this check is skipped if allowExtendBreak is true.\n    // if (!isBreakTime && timeRemaining > 0) { // Removed check as we can extend while timer is running\n    //     toast({title: \"Timer Still Running\", description: \"Task time can only be extended when the timer reaches 0.\", variant: \"default\"});\n    //     return;\n    // }\n    \n    const context = isBreakTime ? \"break\" : (tasks[currentTaskIndex] ? `task \"${tasks[currentTaskIndex].name}\"` : \"task\");\n    const defaultExtension = \"5\";\n    const currentTimerValue = formatTime(timeRemaining);\n\n    setPromptConfig({\n      title: `Extend ${context}`,\n      message: isBreakTime && timeRemaining > 0 ? \n                 `Current break time is ${currentTimerValue}. How many additional minutes would you like to add?` :\n                 `How many minutes would you like to add to the ${context}? ${!isBreakTime && tasks[currentTaskIndex] ? `Timer is currently at ${formatTime(timeRemaining)}.` : ''}`, // Updated message\n      inputLabel: 'Minutes to add:',\n      defaultValue: defaultExtension,\n      confirmText: 'Extend',\n      cancelText: 'Cancel',\n      placeholder: 'Enter minutes',\n      onConfirm: (extendMinutesText) => {\n        const extendMinutes = parseInt(extendMinutesText, 10);\n\n        if (!isNaN(extendMinutes) && extendMinutes > 0) {\n          const newTimeRemaining = timeRemaining + extendMinutes * 60;\n          setTimeRemaining(newTimeRemaining);\n          \n          let toastDescription = `Added ${extendMinutes} minutes to ${context}.`;\n\n          if (!isBreakTime && currentTaskIndex !== -1 && tasks[currentTaskIndex]) {\n            setTasks(prevTasks => prevTasks.map((t, idx) =>\n              idx === currentTaskIndex ? { ...t, duration: t.duration + extendMinutes, estimatedDuration: t.estimatedDuration + extendMinutes } : t\n            ));\n            setScore(prevScore => prevScore - POINTS_DEDUCTION_FOR_EXTENSION);\n            toastDescription += ` Points: -${POINTS_DEDUCTION_FOR_EXTENSION}`;\n          }\n          \n          if (!isTimerActive && newTimeRemaining > 0) {\n            setIsTimerActive(true);\n          }\n          toast({ title: \"Timer Extended\", description: toastDescription });\n        } else {\n          toast({ title: \"Invalid Input\", description: \"Please enter a valid number of minutes.\", variant: \"destructive\" });\n        }\n      }\n    });\n  }, [currentTaskIndex, isBreakTime, isTimerActive, timeRemaining, tasks, allowExtendBreak, setPromptConfig, setTasks, setScore, setTimeRemaining, setIsTimerActive]); // Added missing dependencies\n\n  // Effect for Timer Countdown\n  useEffect(() => { // Added missing dependencies\n    if (isTimerActive && timeRemaining > 0) {\n      // If timer should be active and there's time, start the interval\n      timerIntervalId.current = setInterval(() => {\n        setTimeRemaining(prevTime => {\n          if (prevTime <= 1) { \n            // Stop the interval first\n            if(timerIntervalId.current) clearInterval(timerIntervalId.current);\n            timerIntervalId.current = null;\n            setIsTimerActive(false); // Timer is no longer active\n            \n            if (isBreakTime) {\n              playNotificationSound();\n              showDesktopNotification(\"Break Over!\", \"Your break time is up.\");\n              toast({ title: \"Break Finished!\", description: \"Ready for the next task?\" });\n              setIsBreakTime(false); // Break is over\n              setCurrentTaskIndex(-1); // No active task\n            } else if (currentTaskIndex !== -1 && tasks[currentTaskIndex]) {\n              const task = tasks[currentTaskIndex];\n              // Increment timeSpentSeconds one last time for the final second\n              setTasks(prevTasks => prevTasks.map((t, idx) => \n                idx === currentTaskIndex ? {...t, timeSpentSeconds: (t.timeSpentSeconds || 0) + 1} : t\n              ));\n              playNotificationSound();\n              showDesktopNotification(\"Time's Up!\", `Time for \"${task.name}\" is up.`);\n              toast({ title: \"Time's Up!\", description: `\"${task.name}\" timer finished. Mark done or extend.` });\n              // User needs to manually mark done or extend. isTimerActive is false.\n            }\n            return 0; // Time is up\n          }\n\n          // Increment timeSpentSeconds for active task during normal countdown\n          if (currentTaskIndex !== -1 && !isBreakTime && tasks[currentTaskIndex]) {\n            setTasks(prevTasks => prevTasks.map((task, idx) => \n                idx === currentTaskIndex ? {...task, timeSpentSeconds: (task.timeSpentSeconds || 0) + 1} : task\n            ));\n          }\n          return prevTime - 1; // Countdown\n        });\n      }, 1000);\n    } else {\n      // If timer shouldn't be active or time is up, ensure interval is cleared\n      if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null;\n      }\n    }\n    // Cleanup function: always clear interval when dependencies change or component unmounts\n    return () => {\n      if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null; \n      }\n    };\n  }, [isTimerActive, timeRemaining, tasks, currentTaskIndex, isBreakTime, playNotificationSound, showDesktopNotification, setTasks, breakDuration]); // Removed duplicate showDesktopNotification\n\n  // Effect for Idle Time Calculation\n  useEffect(() => {\n    if (!isTimerActive && sessionStartTime !== null) {\n      const updateIdleTime = () => {\n        // Calculate time elapsed since the session started in seconds\n        const now = Date.now();\n        const totalSessionTimeSeconds = Math.floor((now - sessionStartTime) / 1000);\n        \n        // Calculate total focus time (sum of time spent on completed tasks)\n        const totalFocusTimeSeconds = calculateFocusTime();\n        \n        // Idle time = total session time - total focus time\n        const calculatedIdleTime = Math.max(0, totalSessionTimeSeconds - totalFocusTimeSeconds);\n        \n        setDisplayedIdleTime(calculatedIdleTime);\n      };\n      \n      // Update immediately and then every minute\n      updateIdleTime();\n      const intervalId = setInterval(updateIdleTime, 60000); // 60 seconds\n\n      return () => clearInterval(intervalId);\n    }\n  }, [isTimerActive, sessionStartTime, calculateFocusTime, setDisplayedIdleTime]); // Added missing dependencies\n\n  // Formatting and Display Logic\n  const timerDisplayColor = () => {\n    if (isBreakTime) return 'text-emerald-400'; // Specific color for break time\n    // Idle state: timer is not active, no task index, or task completed\n    if (!isTimerActive && (currentTaskIndex === -1 || !tasks[currentTaskIndex] || tasks[currentTaskIndex].completed)) return 'text-red-500'; // Default/idle color\n    \n    const task = tasks[currentTaskIndex];\n    const totalTaskSeconds = task.estimatedDuration * 60;\n    // If task has no duration or timer is active but timeRemaining is 0, default to teal\n    if ((totalTaskSeconds === 0 && !isBreakTime) || (isTimerActive && timeRemaining === 0 && !isBreakTime)) return 'text-teal-400'; \n    \n    const percentageRemaining = (timeRemaining / totalTaskSeconds) * 100;\n    \n    if (percentageRemaining <= 20) return 'text-red-500'; // Low time warning\n    if (percentageRemaining <= 50) return 'text-yellow-500'; // Mid time warning\n    \n    // Default color for active task when not in warning thresholds\n    return 'text-teal-400'; \n  };\n\n  const calculateDailyStats = useCallback(() => {\n    const totalPlannedDuration = tasks.reduce((acc, task) => acc + task.estimatedDuration, 0); // in minutes\n\n    let accumulatedFocusTimeSeconds = tasks.reduce((acc, task) => {\n      if (task.completed) {\n        return acc + (task.timeSpentSeconds || 0);\n      }\n      if (task.id === (tasks[currentTaskIndex] && tasks[currentTaskIndex].id) && !task.completed && !isBreakTime) {\n        return acc + (task.timeSpentSeconds || 0); // Ensure timeSpentSeconds is included for active task\n      }\n      return acc;\n    }, 0);\n    \n    const remainingUncompletedTaskMinutes = tasks\n      .filter(task => !task.completed)\n      .reduce((acc, task) => {\n          if (task.id === (tasks[currentTaskIndex] && tasks[currentTaskIndex].id) && !isBreakTime) {\n            return acc + Math.max(0, Math.ceil(timeRemaining / 60));\n          }\n          return acc + task.estimatedDuration;\n      }, 0);\n\n    const now = new Date();\n    let timeLeftTodayMinutes = 0;\n    \n    // Determine the end time for P(Not Finishing) based on customFinishTime or dailyResetTime\n    let endOfTodayTargetTime;\n\n    if (customFinishTime) {\n      const [finishHour, finishMinute] = customFinishTime.split(':').map(Number);\n      const customEndTime = new Date(now);\n      customEndTime.setHours(finishHour, finishMinute, 0, 0);\n      \n      // If the custom time is in the past today, calculate until tomorrow's custom time\n      // This handles cases where the user sets a time like 9 AM, but it's already 10 AM\n      if (customEndTime.getTime() < now.getTime()) {\n           customEndTime.setDate(customEndTime.getDate() + 1);\n      }\n       endOfTodayTargetTime = customEndTime;\n\n    } else {\n      // Fallback to dailyResetTime if no custom finish time is set\n      const [resetHour, resetMinute] = dailyResetTime.split(':').map(Number);\n      const todayReset = new Date(now);\n      todayReset.setHours(resetHour, resetMinute, 0, 0);\n\n      const tomorrowReset = new Date(now);\n      tomorrowReset.setDate(tomorrowReset.getDate() + 1);\n      tomorrowReset.setHours(resetHour, resetMinute, 0, 0);\n\n      endOfTodayTargetTime = (now.getTime() < todayReset.getTime())\n        ? todayReset\n        : tomorrowReset;\n    }\n\n    const localMsLeft = endOfTodayTargetTime.getTime() - now.getTime();\n    timeLeftTodayMinutes = Math.max(0, Math.floor(localMsLeft / (1000 * 60)));\n\n    let probNotFinishingPercentage = 0;\n\n    if (remainingUncompletedTaskMinutes === 0) {\n      probNotFinishingPercentage = 0;\n    } else if (timeLeftTodayMinutes <= 0) {\n      probNotFinishingPercentage = 100;\n    } else {\n      const P_base_workload = Math.min(1, remainingUncompletedTaskMinutes / timeLeftTodayMinutes);\n      \n      const totalSessionTimeSeconds = accumulatedFocusTimeSeconds + displayedIdleTime;\n      let inefficiency_penalty_multiplier = 1; // Default to no penalty\n      if (totalSessionTimeSeconds > 0) {\n        const efficiency_metric = accumulatedFocusTimeSeconds / totalSessionTimeSeconds;\n        inefficiency_penalty_multiplier = 1 + (1 - efficiency_metric); // Ranges [1, 2]\n      }\n\n      const raw_probability = P_base_workload * inefficiency_penalty_multiplier;\n      probNotFinishingPercentage = Math.min(100, Math.round(raw_probability * 100));\n    }\n\n    return {\n      totalPlannedTime: totalPlannedDuration,\n      accumulatedFocusTimeSeconds: accumulatedFocusTimeSeconds, \n      estimatedRemainingTaskTimeMinutes: remainingUncompletedTaskMinutes,\n      probNotFinishing: probNotFinishingPercentage,\n    };\n  }, [tasks, currentTaskIndex, timeRemaining, isBreakTime, displayedIdleTime, dailyResetTime, customFinishTime]); // Added missing dependencies\n\n  const dailyStats = calculateDailyStats();\n  const activeTaskObject = currentTaskIndex !== -1 && tasks[currentTaskIndex] ? tasks[currentTaskIndex] : null;\n  const currentDisplayTaskName = isBreakTime ? \"Break Time!\" : (activeTaskObject ? activeTaskObject.name : \"No Active Task\");\n  const activeTaskOriginalId = activeTaskObject ? activeTaskObject.id : null;\n\n  const handleClearAllTasks = useCallback(() => {\n    setTasks([]);\n    localStorage.removeItem('tasks'); // Also clear from localStorage immediately\n    toast({ title: \"Tasks Cleared\", description: \"All tasks have been removed.\", variant: \"destructive\" });\n  }, [setTasks]); // Added setTasks dependency\n\n  // Spirals handlers (to be implemented)\n  const handleAddSpiral = useCallback((spiralName) => {\n    if (!spiralName.trim()) {\n        toast({title: \"Invalid Spiral\", description: \"Spiral name cannot be empty.\", variant: \"destructive\"});\n        return;\n    }\n    setSpirals(prev => [...prev, { id: Date.now(), name: spiralName.trim() }]);\n    toast({title: \"Spiral Added\", description: `\"${spiralName.trim()}\" added to spirals.`});\n  }, [setSpirals]); // Added setSpirals dependency\n\n  const handleRemoveSpiral = useCallback((spiralId) => {\n    const spiralToRemove = spirals.find(s => s.id === spiralId);\n    setSpirals(prev => prev.filter(s => s.id !== spiralId));\n    if (spiralToRemove) {\n        toast({title: \"Spiral Removed\", description: `\"${spiralToRemove.name}\" removed.`, variant: \"destructive\"});\n    }\n  }, [spirals, setSpirals]); // Added setSpirals dependency\n\n  const handleMoveSpiralToTasks = useCallback((spiralId) => {\n    const spiralToMove = spirals.find(s => s.id === spiralId);\n    if (!spiralToMove) return;\n\n    setPromptConfig({\n      title: \"Move Spiral to Task\",\n      message: `Enter estimated duration (minutes) for task \"${spiralToMove.name}\":`,\n      inputLabel: \"Duration (minutes):\",\n      defaultValue: \"30\",\n      confirmText: \"Move to Tasks\",\n      cancelText: \"Cancel\",\n      placeholder: \"e.g., 30\",\n      onConfirm: (durationText) => {\n        if (durationText === null) return; \n        const duration = parseInt(durationText, 10);\n\n        if (duration && duration > 0) {\n          handleAddTask({ name: spiralToMove.name, duration });\n          setSpirals(prev => prev.filter(s => s.id !== spiralId));\n          toast({ title: \"Spiral Moved\", description: `\"${spiralToMove.name}\" moved to tasks.` });\n        } else {\n          toast({ title: \"Invalid Duration\", description: \"Please enter a positive number for duration.\", variant: \"destructive\" });\n        }\n      }\n    });\n    setIsPromptOpen(true); \n  }, [spirals, handleAddTask, setIsPromptOpen, setPromptConfig, setSpirals]); // Added missing dependencies\n\n  const handleMasterPlayPause = () => {\n    if (isTimerActive) { // If timer is supposed to be active (running or paused awaiting resume)\n      handlePauseTimer(); // This will set isTimerActive = false and clear interval\n    } else { // Timer is not supposed to be active (fully stopped or explicitly paused)\n      // Check if we can resume an existing task or break\n      if (timeRemaining > 0 && ((currentTaskIndex !== -1 && tasks[currentTaskIndex] && !tasks[currentTaskIndex].completed && !isBreakTime) || isBreakTime)) {\n        handleResumeTimer(); // This will set isTimerActive = true\n      } else {\n        // Otherwise, try to start the first available (uncompleted) task\n        const firstUncompletedTaskIndex = tasks.findIndex(t => !t.completed);\n        if (firstUncompletedTaskIndex !== -1) {\n          startTimer(firstUncompletedTaskIndex); // startTimer sets isTimerActive = true\n        } else {\n          toast({title: \"No Tasks\", description: \"Add a task or all tasks are complete.\", variant:\"default\"});\n        }\n      }\n    }\n  }; // Added missing dependencies implicitly handled by called functions\n\n  // JSX will be in the next part\n  return (\n    <div className=\"h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white relative overflow-hidden\"> {/* Changed min-h-screen to h-screen */}\n      {/* Custom style to override TaskListC max height */}\n      <style dangerouslySetInnerHTML={{__html: `\n        .custom-scrollbar.max-h-\\\\[450px\\\\], \n        ul.max-h-\\\\[450px\\\\].custom-scrollbar {\n          max-height: 500px !important;\n        }\n      `}} />\n      \n      {/* Animated background elements */}\n      <div className=\"absolute inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/10 rounded-full blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse\" style={{animationDelay: '2s'}} />\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-pink-500/5 rounded-full blur-3xl animate-pulse\" style={{animationDelay: '4s'}} />\n      </div>\n\n      <div className=\"relative z-10 p-6 max-w-7xl mx-auto flex flex-col h-full\"> {/* Made this a flex column that fills height */}\n        {/* Header */}\n        <div className=\"mb-8 relative\"> \n          {/* Container for Title and Apple/Quote, making it a flex row and relative for positioning context */}\n          <div className=\"relative flex items-center justify-center mb-6\"> \n            <h1 className=\"text-4xl md:text-6xl font-bold flex gap-2\">\n              <span\n                className=\"bg-clip-text text-transparent\"\n                style={{ backgroundImage: 'linear-gradient(90deg, #ff3b3b 0%, #ff8c00 100%)' }}\n              >\n                Annoying\n              </span>\n              <span\n                className=\"text-lightText\"\n              >\n                Pomodoro\n              </span>\n            </h1>\n\n            {/* Annoying Apple/Tomato and its Quote Bubble - Positioned alongside title */}\n        {motivationalQuote && (\n              <div className=\"absolute top-1/2 left-0 transform -translate-y-1/2 flex items-center space-x-2 p-1 z-20\"> {/* Adjusted to be more flush left, reduced padding and space */}\n                {/* Image from logo192.png */}\n                <img \n                  src={`${process.env.PUBLIC_URL}/assets/logo192.png`} \n                  alt=\"Annoying Character\" \n                  className=\"h-10 w-10 md:h-12 md:w-12\" // Responsive size\n                />\n                \n                {/* Quote Bubble */}\n                <div className=\"relative bg-gray-800/80 backdrop-blur-md border border-gray-700/70 rounded-lg px-3 py-2 max-w-[180px] md:max-w-[220px] shadow-xl\"> {/* Responsive max-width */}\n                  <p className=\"text-gray-200 italic text-xs md:text-sm leading-snug md:leading-relaxed\">\"{motivationalQuote}\"</p>\n                  {/* Speech bubble pointer (pointing left, adjusted for alignment) */}\n                  <div \n                    className=\"absolute top-1/2 -left-2 transform -translate-y-1/2 w-4 h-4 bg-gray-800/80 border-b border-l border-gray-700/70 rotate-45\"\n                  />\n            </div>\n          </div>\n        )}\n          </div>\n        \n          {/* Stats Grid - This is the existing stats display from your file */}\n          <div className=\"mt-4 pt-2 border-t border-dark-300/60 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 justify-around items-center gap-3 sm:gap-4\">\n          <div className=\"flex flex-col items-center group\">\n              <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\">\n                <Award className=\"h-4 w-4 mr-1.5 text-cyanAccent transition-transform duration-300 group-hover:scale-110\" />\n              Score\n            </div>\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 bg-cyanAccent/10 blur-md rounded-full\"></div>\n                <span className=\"score-display relative z-10 text-cyanAccent font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-brightAccent px-3\">{score}</span>\n          </div>\n            </div>\n            \n          <div className=\"flex flex-col items-center group\">\n              <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\">\n                <CheckCircle className=\"h-4 w-4 mr-1.5 text-green-500 transition-transform duration-300 group-hover:scale-110\" />\n              Tasks Done\n            </div>\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 bg-green-500/10 blur-md rounded-full\"></div>\n                <span className=\"relative z-10 text-green-500 font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-green-400 px-3\">{tasks.filter(t => t.completed).length}</span>\n          </div>\n            </div>\n            \n          <div className=\"flex flex-col items-center group\">\n              <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\">\n                <Timer className=\"h-4 w-4 mr-1.5 text-blue-500 transition-transform duration-300 group-hover:scale-110\" />\n              Focus Time\n            </div>\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 bg-blue-500/10 blur-md rounded-full\"></div>\n                <span className=\"relative z-10 text-blue-500 font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-blue-400 px-3\">{formatDurationToHoursMinutes(dailyStats.accumulatedFocusTimeSeconds)}</span>\n          </div>\n            </div>\n            \n          <div className=\"flex flex-col items-center group\">\n              <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\">\n                <Coffee className=\"h-4 w-4 mr-1.5 text-amber-500 transition-transform duration-300 group-hover:scale-110\" />\n              Idle Time\n            </div>\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 bg-amber-500/10 blur-md rounded-full\"></div>\n                <span className=\"relative z-10 text-amber-500 font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-amber-400 px-3\">{formatDurationToHoursMinutes(displayedIdleTime)}</span>\n          </div>\n            </div>\n            \n          <div className=\"flex flex-col items-center group\">\n              <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5 font-medium\">\n                <AlertTriangle className=\"h-4 w-4 mr-1.5 text-red-500 transition-transform duration-300 group-hover:scale-110\" />\n              P(Not Finish)\n            </div>\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 bg-red-500/10 blur-md rounded-full\"></div>\n                <span className=\"relative z-10 text-red-500 font-bold text-xl md:text-2xl transition-all duration-300 group-hover:text-red-400 px-3\">{dailyStats.probNotFinishing}%</span>\n          </div>\n        </div>\n          </div>\n        </div>\n\n        {/* Main content area with side navigation */}\n      <div className=\"flex flex-row flex-grow overflow-hidden w-full gap-3 sm:gap-5\">\n          {/* Side Navigation - Enhanced with modern styling */}\n          <div className=\"flex pt-1 flex-col gap-2.5 w-24 sm:w-32 flex-shrink-0\"> {/* Added flex-shrink-0 */}\n            {navItems.map((item) => {\n              const IconComponent = item.icon;\n              const isActive = activeView === item.id;\n              return (\n                <UIButton\n                  key={item.id}\n                  variant={isActive ? 'default' : 'outline'}\n                  onClick={() => setActiveView(item.id)}\n                  className={`py-3 flex flex-col items-center justify-center text-xs sm:text-sm rounded-xl flex-grow\n                            ${\n                              isActive\n                                ? `bg-gradient-to-br from-cyanAccent/20 to-brightAccent/10 shadow-lg shadow-cyanAccent/30 border border-cyanAccent/30` // Always use cyan/bright accent for active\n                                : `bg-dark-200/30 hover:bg-dark-200/50 hover:shadow-md hover:shadow-${item.color}/15`\n                            }\n                            transition-all duration-300 group`}\n                  // The rgba values would ideally come from Tailwind config, here using placeholder logic\n                  // For specific colors like cyanAccent, you might need to map them to RGB if not directly usable in rgba()\n                >\n                  <IconComponent className={`h-6 w-6 mb-2 ${getIconClass(isActive, item.color)}`} />\n                  <span className={isActive ? 'font-medium text-lightText' : 'text-subtleText/90'}>{item.label}</span>\n                </UIButton>\n              );\n            })}\n        </div>\n\n          {/* Main view area */}\n        <main className=\"flex-grow overflow-auto h-full\"> {/* Added h-full to take parent's height, overflow-auto handles scrolling */}\n          {/* Content will be conditionally rendered here based on activeView */}\n          {activeView === 'focus' && (\n              <div \n                className=\"space-y-8 h-full flex flex-col bg-gradient-to-br from-dark-100/90 to-dark-200/90 shadow-md hover:shadow-lg transition-all duration-500 rounded-xl p-4 sm:p-6 relative\"\n                ref={focusCardRef} // Attach the ref here\n              > {/* Removed ring border, Added relative */}\n                {/* Current Task Header */}\n                <div className=\"text-center pt-2\">\n                  <div className=\"inline-flex items-center gap-3 bg-gray-900/50 backdrop-blur-sm rounded-2xl px-6 py-3\">\n                    <div className={`w-3 h-3 rounded-full ${isTimerActive && !isBreakTime ? 'bg-gradient-to-r from-blue-500 to-cyan-500 animate-pulse' : 'bg-gray-600'}`}></div>\n                    <span className=\"text-gray-300 font-medium\">Current Task:</span>\n                    <span className={`font-semibold ${currentTaskIndex !== -1 && !isBreakTime ? \"text-cyan-400\" : \"text-gray-400\"}`}>{currentDisplayTaskName}</span>\n                  </div>\n                </div>\n\n                {/* Timer Circle */}\n                <div className=\"flex justify-center items-center flex-grow\">\n                  <div className=\"relative\">\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-full blur-2xl scale-110\"></div>\n                    <div className=\"relative bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-xl border border-gray-700/50 rounded-full w-64 h-64 sm:w-72 sm:h-72 md:w-80 md:h-80 flex flex-col items-center justify-center shadow-2xl\">\n                      {/* Circular Progress Indicator */}\n                      <svg className=\"absolute inset-0 w-full h-full -rotate-90\" viewBox=\"0 0 100 100\">\n                        {/* Background track */}\n                        <circle \n                          cx=\"50\" \n                          cy=\"50\" \n                          r=\"45\" \n                          fill=\"none\" \n                          strokeWidth=\"2.5\" \n                          stroke=\"rgba(255,255,255,0.05)\" \n                        />\n                        {/* Progress circle - dynamically calculate stroke-dashoffset based on remaining time */}\n                        {(currentTaskIndex !== -1 || isBreakTime) && (\n                          <circle \n                            cx=\"50\" \n                            cy=\"50\" \n                            r=\"45\" \n                            fill=\"none\" \n                            strokeWidth=\"2.5\" \n                            stroke={isBreakTime ? \"#10b981\" : \"#22d3ee\"} \n                            strokeLinecap=\"round\"\n                            strokeDasharray=\"283\" \n                            strokeDashoffset={(() => {\n                              // Calculate progress percentage (elapsed time relative to total)\n                              const totalTime = isBreakTime \n                                ? (breakDuration * 60) \n                                : (currentTaskIndex !== -1 && tasks[currentTaskIndex] \n                                  ? tasks[currentTaskIndex].estimatedDuration * 60 \n                                  : 0);\n                                  \n                              if (totalTime <= 0) return \"283\"; // Default to empty if no total time\n                              \n                              // Calculate elapsed time\n                              const elapsed = totalTime - timeRemaining;\n                              // Calculate progress (percentage of time elapsed)\n                              const progress = 1 - elapsed / totalTime;\n                              \n                              // 283 is approximation of 2πr (2 * π * 45)\n                              // To show elapsed time from filled, use the progress percentage directly\n                              return 283 * (1 - progress);\n                            })()}\n                          />\n                        )}\n                      </svg>\n                      \n                      {/* Adjusted styling: Apply single text color class directly */}\n                      <div id=\"timer-clock-react\" className={`text-6xl sm:text-7xl font-mono font-bold ${timerDisplayColor()} tabular-nums tracking-tight transition-all duration-500`}> {/* Removed mb-4 */}\n                  {formatTime(timeRemaining)}\n                </div>\n                      {isTimerActive && !isBreakTime && (\n                        <div className=\" mt-2 text-sm text-gray-400 uppercase tracking-widest animate-pulse\">\n                          FOCUS IN PROGRESS\n                      </div>\n                    )}\n                       {isTimerActive && isBreakTime && (\n                        <div className=\"mt-2 text-sm text-emerald-400 uppercase tracking-widest animate-pulse\">\n                          BREAK IN PROGRESS\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Control Buttons */}\n                <div className=\"flex justify-center gap-4 pb-4\">\n                  <button\n                    onClick={handleMasterPlayPause}\n                    disabled={isTimerActive || (!isTimerActive && (tasks.findIndex(t => !t.completed) === -1 || (currentTaskIndex !== -1 && timeRemaining === 0 && !isBreakTime)))} // Disable if active, or if not active and (no uncompleted tasks OR (current task timer is 0 and not a break))\n                    className=\"group relative overflow-hidden bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white px-7 py-3.5 sm:px-8 sm:py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <div className=\"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300\"></div>\n                    <div className=\"relative flex items-center gap-2 sm:gap-3\">\n                      {isTimerActive ? <Pause className=\"h-5 w-5\" /> : <Play className=\"h-5 w-5\" />}\n                      {isTimerActive ? 'Pause' : (timeRemaining > 0 ? 'Resume' : 'Start')}\n                    </div>\n                  </button>\n                  \n                  <button \n                      onClick={() => {\n                        if (isBreakTime) {\n                          handleSkipBreak();\n                        } else {\n                          handleTaskDone();\n                        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });\n                      }\n                    }}\n                    disabled={isBreakTime ? !isTimerActive : (currentTaskIndex === -1 || !tasks[currentTaskIndex] || tasks[currentTaskIndex].completed)}\n                    className=\"group relative overflow-hidden bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white px-7 py-3.5 sm:px-8 sm:py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <div className=\"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300\"></div>\n                    <div className=\"relative flex items-center gap-2 sm:gap-3\">\n                      <CheckCircle className=\"h-5 w-5\" />\n                      {isBreakTime ? 'Skip Break' : 'Done!'}\n                </div>\n                  </button>\n                  \n                  <button \n                    onClick={handleExtendTimer}\n                    disabled={isBreakTime ? !allowExtendBreak : (timeRemaining > 0 || currentTaskIndex === -1 || !tasks[currentTaskIndex] || !tasks[currentTaskIndex].started || tasks[currentTaskIndex].completed)}\n                    className=\"group relative overflow-hidden bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 text-white px-5 py-3.5 sm:px-6 sm:py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <div className=\"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300\"></div>\n                    <div className=\"relative flex items-center gap-2 sm:gap-3\">\n                      <Plus className=\"h-5 w-5\" />\n                    Extend\n                </div>\n                  </button>\n                </div>\n                {/* Animated Points Display - Removed */}\n              </div>\n          )}\n\n          {activeView === 'plan' && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 h-full\">\n                <UICard className=\"lg:col-span-1 bg-gradient-to-br from-dark-100/90 to-dark-200/90 flex flex-col shadow-md hover:shadow-lg transition-all duration-500 border-0\"> {/* Removed ring border, added border-0 */}\n                  <UICardHeader className=\"py-3 border-b border-dark-300/25\">\n                    <UICardTitle className=\"text-lg md:text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent text-center\">Plan Your Day</UICardTitle>\n                  </UICardHeader>\n                  <UICardContent className=\"flex-grow flex flex-col overflow-hidden p-6\"> {/* UICardContent for Plan Your Day */}\n                    <TaskFormC onAddTask={handleAddTask} />\n                    <div className=\"mt-4 pt-4 border-t border-dark-300/40 space-y-2.5 flex-grow overflow-y-auto\"> {/* This div will contain stats and session time, it grows and scrolls */}\n                    <h3 className=\"text-sm font-semibold text-cyanAccent mb-2\">Daily Stats</h3>\n                    <div className=\"bg-dark-300/25 rounded-md p-3 space-y-2.5 text-xs\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-subtleText flex items-center\">\n                          <span className=\"inline-block w-1.5 h-1.5 rounded-full bg-cyanAccent mr-1.5\"></span>\n                          Total Tasks:\n                        </span>\n                        <span className='text-grey-400 font-semibold'>{tasks.length}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-subtleText flex items-center\">\n                          <span className=\"inline-block w-1.5 h-1.5 rounded-full bg-purple-500 mr-1.5\"></span>\n                          Total Planned:\n                        </span>\n                        <span className='text-teal-400 font-semibold'>{dailyStats.totalPlannedTime} min</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-subtleText flex items-center\">\n                          <span className=\"inline-block w-1.5 h-1.5 rounded-full bg-green-500 mr-1.5\"></span>\n                          Remaining:\n                        </span>\n                        <span className='text-teal-400 font-semibold'>{dailyStats.estimatedRemainingTaskTimeMinutes} min</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-subtleText flex items-center\">\n                          <span className=\"inline-block w-1.5 h-1.5 rounded-full bg-amber-500 mr-1.5\"></span>\n                          P(Not Finishing):\n                        </span>\n                        <span className='text-teal-400 font-semibold'>{dailyStats.probNotFinishing}%</span>\n                      </div>\n                    </div>\n\n                      {/* Session End Time - collapsible section */}\n                    <div className=\"mt-4 pt-4 border-t border-dark-300/40 space-y-2.5\">\n                        <button \n                          onClick={() => setIsSessionEndTimeExpanded(!isSessionEndTimeExpanded)}\n                          className=\"w-full flex justify-between items-center text-sm font-semibold text-cyanAccent mb-2 focus:outline-none hover:text-brightAccent transition-colors\"\n                        >\n                          Session End Time\n                          {isSessionEndTimeExpanded ? <ChevronDown className=\"h-5 w-5\" /> : <ChevronRight className=\"h-5 w-5\" />}\n                        </button>\n                        {isSessionEndTimeExpanded && (\n                          <div className=\"bg-dark-300/25 rounded-md p-3 space-y-2.5 text-xs animate-fadeIn\">\n                         <div className=\"flex justify-between items-center mb-3\">\n                            <div className=\"flex items-center\">\n                                <Clock className=\"h-3.5 w-3.5 mr-1 text-cyanAccent\" />\n                                <span className=\"font-medium text-xs md:text-sm\">Set End Time</span>\n                            </div>\n                            <div className=\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\">\n                                {customFinishTime || 'Not Set'}\n                            </div>\n                         </div>\n                         <div className=\"flex items-center gap-2\">\n                            <input\n                                type=\"time\"\n                                value={customFinishTime || ''}\n                                onChange={(e) => setCustomFinishTime(e.target.value)}\n                                className=\"w-full bg-dark-200/70 border border-dark-300/50 rounded p-1.5 text-xs md:text-sm focus:ring-cyanAccent focus:border-cyanAccent appearance-none\"\n                                style={{ colorScheme: theme === 'dark' ? 'dark' : 'light' }} // Ensures native time picker matches theme\n                             />\n                              <UIButton\n                                variant=\"destructive\"\n                                size=\"sm\"\n                                onClick={() => setCustomFinishTime(null)}\n                                disabled={!customFinishTime}\n                                className=\"py-1 px-2 text-xs\"\n                            >\n                                Clear\n                              </UIButton>\n                         </div>\n                         <div className=\"text-[9px] md:text-[10px] text-subtleText/70 mt-1.5 pl-0.5\">\n                            Set a temporary end time for today's session. Overrides Daily Reset Time for P(Not Finish).\n                         </div>\n                      </div>\n                        )}\n                    </div>\n                    </div> {/* Closing the flex-grow div for stats and session time */}\n                    \n                    {/* Clear All Tasks Button - pushed to bottom */}\n                    <div className=\"mt-auto pt-4 border-t border-dark-300/40\">\n                         <UIButton\n                           variant=\"destructive\"\n                           size=\"sm\"\n                           onClick={handleClearAllTasks}\n                           disabled={tasks.length === 0}\n                           className=\"w-full py-2 text-xs\"\n                       >\n                           Clear All Tasks\n                         </UIButton>\n                    </div>\n                  </UICardContent>\n                </UICard>\n\n                <UICard className=\"lg:col-span-2 bg-gradient-to-br from-dark-100/90 to-dark-200/90 flex flex-col shadow-md hover:shadow-lg transition-all duration-500 border-0\"> {/* UICard for Today's Tasks */}\n                  <UICardHeader className=\"py-3 border-b border-dark-300/25\">\n                    <UICardTitle className=\"text-lg md:text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent text-center\">Today's Tasks</UICardTitle>\n                  </UICardHeader>\n                  <UICardContent className=\"p-6\">\n                    <div className=\"tall-task-list\">\n                      <TaskListC \n                        className=\"task-list-override\"\n                        style={{ \"--task-max-height\": \"400px\" }} // CSS variable that will be used in TaskListC\n                        tasks={[...tasks].sort((a, b) => {\n                          // Sort uncompleted tasks first\n                          if (a.completed && !b.completed) return 1;\n                          if (!a.completed && b.completed) return -1;\n                          return 0; // Keep original order within each group\n                        })}\n                      onRemoveTask={handleRemoveTask} \n                      onStartTask={(taskId) => {\n                          const currentTasks = tasks; \n                          const taskIndex = currentTasks.findIndex(t => t.id === taskId);\n                          \n                          if (taskIndex !== -1) {\n                              if (taskIndex < 0 || taskIndex >= currentTasks.length || !currentTasks[taskIndex]) {\n                                  console.error(\"[App onStartTask] taskIndex out of bounds for current tasks.\", \n                                      { taskId, taskIndex, currentTasksLength: currentTasks.length });\n                                  toast({ \n                                      title: \"Task Sync Issue\", \n                                      description: \"State inconsistency before starting timer. Please try again.\", \n                                      variant: \"destructive\" \n                                  });\n                                  return;\n                              }\n                              startTimer(taskIndex);\n                          } else {\n                              console.error(\"[App onStartTask] Task ID not found in current tasks:\", { taskId });\n                              toast({ \n                                  title: \"Task Not Found\", \n                                  description: \"The selected task could not be found to start.\", \n                                  variant: \"destructive\" \n                              });\n                          }\n                      }}\n                      currentTaskIndex={currentTaskIndex} \n                      activeTaskOriginalId={activeTaskOriginalId} \n                      isTimerActive={isTimerActive} \n                      isBreakTime={isBreakTime}\n                      timeRemaining={timeRemaining}\n                  />\n                    </div>\n                  </UICardContent>\n                </UICard>\n            </div>\n          )}\n\n          {activeView === 'spirals' && (\n              <UICard className=\"bg-gradient-to-br from-dark-100/90 to-dark-200/90 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500 border-0\"> {/* Removed ring border, added border-0 */}\n                <UICardHeader className=\"py-3 border-b border-dark-300/25\">\n                  <UICardTitle className=\"text-lg md:text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent text-center\">Spirals (Ideas for Later)</UICardTitle>\n                </UICardHeader>\n                <UICardContent className=\"flex-grow flex flex-col overflow-hidden p-6 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNTAgOTBjMjIuMDkxIDAgNDAtMTcuOTA5IDQwLTQwUzcyLjA5MSAxMCA1MCAxMCAxMCAyNy45MDkgMTAgNTBzMTcuOTA5IDQwIDQwIDQweiIgc3Ryb2tlPSIjMkQzNzQ4IiBmaWxsPSJub25lIiBvcGFjaXR5PSIuMDMiLz48L3N2Zz4=')] bg-[length:80px_80px]\"> {/* Increased padding */}\n                  <SpiralFormC onAddSpiral={handleAddSpiral} />\n                <div className=\"mt-4 flex-grow overflow-y-auto\">\n                    <SpiralListC \n                    spirals={spirals} \n                    onRemoveSpiral={handleRemoveSpiral} \n                    onMoveSpiralToTasks={handleMoveSpiralToTasks} \n                  />\n                </div>\n                </UICardContent>\n              </UICard>\n          )}\n\n          {activeView === 'settings' && (\n              <UICard className=\"bg-gradient-to-br from-dark-100/90 to-dark-200/90 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500 border-0\"> {/* Removed ring border, added border-0 */}\n                <UICardHeader className=\"py-3 border-b border-dark-300/25\">\n                  <UICardTitle className=\"text-lg md:text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent text-center\">App Settings</UICardTitle>\n                </UICardHeader>\n                <UICardContent className=\"flex-grow flex flex-col p-6 text-sm md:text-base overflow-y-auto\"> {/* Increased padding */}\n                <div className=\"space-y-5 md:space-y-6\">\n                  {/* Theme Setting */}\n                  <div className=\"bg-dark-300/25 rounded-md p-3 md:p-4\">\n                    <div className=\"flex justify-between items-center mb-3\">\n                      <div className=\"flex items-center\">\n                        <Moon className=\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\" />\n                        <span className=\"font-medium text-xs md:text-sm\">Theme</span>\n                      </div>\n                      <div className=\"flex items-center gap-1.5 bg-dark-200/80 rounded-full p-0.5\">\n                        <button \n                          className={`${theme === 'dark' ? 'bg-dark-100 text-white' : 'text-subtleText'} rounded-full px-2.5 py-1 text-[10px] md:text-xs flex items-center transition-all duration-300`}\n                          onClick={() => setTheme('dark')}\n                        >\n                          <Moon className=\"h-2.5 w-2.5 md:h-3 md:w-3 mr-1\" />\n                          Dark\n                        </button>\n                        <button \n                          className={`${theme === 'light' ? 'bg-dark-100 text-white' : 'text-subtleText'} rounded-full px-2.5 py-1 text-[10px] md:text-xs flex items-center transition-all duration-300`}\n                          onClick={() => setTheme('light')}\n                        >\n                          <Sun className=\"h-2.5 w-2.5 md:h-3 md:w-3 mr-1\" />\n                          Light\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Motivation Type Setting */}\n                  <div className=\"bg-dark-300/25 rounded-md p-3 md:p-4\">\n                    <div className=\"flex justify-between items-center mb-3\">\n                      <div className=\"flex items-center\">\n                        <AlertCircle className=\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\" />\n                        <span className=\"font-medium text-xs md:text-sm\">Motivation Type</span>\n                      </div>\n                      <div className=\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\">\n                        {quoteType.charAt(0).toUpperCase() + quoteType.slice(1)}\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-1.5 text-[10px] md:text-xs\">\n                      {Object.keys(quoteCategories).map(type => (\n                        <div \n                          key={type}\n                          className={`${quoteType === type ? 'bg-cyanAccent/30 text-cyanAccent font-semibold' : 'bg-dark-200/40 text-subtleText'} rounded p-1.5 text-center cursor-pointer hover:bg-cyanAccent/20 hover:text-cyanAccent transition-colors`}\n                          onClick={() => setQuoteType(type)}\n                        >\n                          {type.charAt(0).toUpperCase() + type.slice(1)}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  {/* Sound Setting */}\n                  <div className=\"bg-dark-300/25 rounded-md p-3 md:p-4\">\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"flex items-center\">\n                        <Volume2 className=\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\" />\n                        <span className=\"font-medium text-xs md:text-sm\">Sound Notifications</span>\n                      </div>\n                      <div className=\"flex items-center gap-1.5\">\n                        <button \n                          className={`${soundEnabled ? 'bg-dark-200/80 text-white' : 'bg-dark-200/30 text-subtleText opacity-60'} hover:bg-dark-300/80 transition-colors rounded-full p-1 md:p-1.5`}\n                          onClick={() => setSoundEnabled(true)}\n                        >\n                          <Volume2 className=\"h-3.5 w-3.5 md:h-4 md:w-4\" />\n                        </button>\n                        <button \n                          className={`${!soundEnabled ? 'bg-dark-200/80 text-white' : 'bg-dark-200/30 text-subtleText opacity-60'} hover:bg-dark-300/80 transition-colors rounded-full p-1 md:p-1.5`}\n                          onClick={() => setSoundEnabled(false)}\n                        >\n                          <VolumeX className=\"h-3.5 w-3.5 md:h-4 md:w-4\" />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Allow Extend Break Setting */}\n                  <div className=\"bg-dark-300/25 rounded-md p-3 md:p-4\">\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"flex items-center\">\n                        <Timer className=\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\" />\n                        <span className=\"font-medium text-xs md:text-sm\">Allow Extending Breaks</span>\n                      </div>\n                      <div className=\"flex items-center gap-1.5\">\n                        <button \n                          className={`${allowExtendBreak ? 'bg-dark-100 text-white' : 'text-subtleText'} rounded-full px-2.5 py-1 text-[10px] md:text-xs flex items-center transition-all duration-300`}\n                          onClick={() => setAllowExtendBreak(true)}\n                        >\n                          Yes\n                        </button>\n                        <button \n                          className={`${!allowExtendBreak ? 'bg-dark-100 text-white' : 'text-subtleText'} rounded-full px-2.5 py-1 text-[10px] md:text-xs flex items-center transition-all duration-300`}\n                          onClick={() => setAllowExtendBreak(false)}\n                        >\n                          No\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Default Break Duration Setting */}\n                  <div className=\"bg-dark-300/25 rounded-md p-3 md:p-4\">\n                    <div className=\"flex justify-between items-center mb-3\">\n                      <div className=\"flex items-center\">\n                        <Timer className=\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\" />\n                        <span className=\"font-medium text-xs md:text-sm\">Default Break Duration</span>\n                      </div>\n                      <div className=\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\">\n                        {breakDuration} minutes\n                      </div>\n                    </div>\n                    <input\n                      type=\"range\"\n                      min=\"1\"\n                      max=\"15\"\n                      step=\"1\"\n                      value={breakDuration}\n                      onChange={(e) => setBreakDuration(parseInt(e.target.value, 10))}\n                      className=\"w-full h-1.5 bg-dark-300 rounded-lg appearance-none cursor-pointer range-thumb-cyanAccent\"\n                    />\n                    <div className=\"flex justify-between text-[10px] md:text-xs text-subtleText/80 mt-1\">\n                      <span>1 min</span>\n                      <span>15 min</span>\n                    </div>\n                  </div>\n\n                  {/* Points System Setting */}\n                  <div className=\"bg-dark-300/25 rounded-md p-3 md:p-4\">\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"flex items-center\">\n                        <Award className=\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\" />\n                        <span className=\"font-medium text-xs md:text-sm\">Points System</span>\n                      </div>\n                      <div className=\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\">\n                        Enabled\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-1 gap-1.5 mt-2 text-[10px] md:text-xs\">\n                      <div className=\"bg-dark-200/40 rounded p-1.5 flex justify-between items-center\">\n                        <span>Base Score (Focus):</span>\n                        <span className=\"text-cyanAccent\">1 pt per minute</span>\n                      </div>\n                      <div className=\"bg-dark-200/40 rounded p-1.5 flex justify-between items-center\">\n                        <span>Time Saved Bonus:</span>\n                        <span className=\"text-cyanAccent\">1 pt per minute saved</span>\n                      </div>\n                       <div className=\"bg-dark-200/40 rounded p-1.5 flex justify-between items-center\">\n                        <span>Task Extension Penalty:</span>\n                        <span className=\"text-red-500\">-{POINTS_DEDUCTION_FOR_EXTENSION} pts</span>\n                      </div>\n                    </div>\n                    <div className=\"text-[9px] md:text-[10px] text-subtleText/70 mt-1.5 pl-0.5\">\n                      Score is based on total minutes focused and minutes saved compared to estimated duration. Extending tasks deducts points.\n                    </div>\n                  </div>\n\n                  {/* Daily Reset Time Setting */}\n                  <div className=\"bg-dark-300/25 rounded-md p-3 md:p-4\">\n                    <div className=\"flex justify-between items-center mb-3\">\n                      <div className=\"flex items-center\">\n                        <Clock className=\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\" />\n                        <span className=\"font-medium text-xs md:text-sm\">Daily Reset Time</span>\n                      </div>\n                      <div className=\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\">\n                        {dailyResetTime}\n                      </div>\n                    </div>\n                    <input\n                      type=\"time\"\n                      value={dailyResetTime}\n                      onChange={(e) => setDailyResetTime(e.target.value)}\n                      className=\"w-full bg-dark-200/70 border border-dark-300/50 rounded p-1.5 text-xs md:text-sm focus:ring-cyanAccent focus:border-cyanAccent appearance-none\"\n                      style={{ colorScheme: theme === 'dark' ? 'dark' : 'light' }} \n                    />\n                    <div className=\"text-[9px] md:text-[10px] text-subtleText/70 mt-1.5 pl-0.5\">\n                      Time at which tasks, score, and timers reset daily. Spirals and historical stats are not affected.\n                    </div>\n                  </div>\n\n                  {/* About Section */}\n                  <div className=\"bg-dark-300/25 rounded-md p-3 md:p-4\">\n                    <div className=\"flex items-center mb-2\">\n                      <BrainCircuit className=\"h-4 w-4 md:h-5 md:w-5 mr-1.5 text-cyanAccent\" />\n                      <span className=\"font-medium text-xs md:text-sm\">About</span>\n                    </div>\n                    <div className=\"text-[10px] md:text-xs text-subtleText/80\">\n                      Annoying Pomodoro v0.2\n                    </div>\n                  </div>\n\n                </div>\n                </UICardContent>\n              </UICard>\n          )}\n          \n          {activeView === 'dashboard' && (\n              <DashboardViewC />\n          )}\n        </main>\n      </div>\n\n      {/* Toaster component for displaying toast notifications */}\n      <Toaster />\n      <PromptDialog \n        isOpen={isPromptOpen}\n        onOpenChange={setIsPromptOpen}\n        title={promptConfig.title}\n        message={promptConfig.message}\n        inputLabel={promptConfig.inputLabel}\n        defaultValue={promptConfig.defaultValue}\n        confirmText={promptConfig.confirmText}\n        cancelText={promptConfig.cancelText}\n        onConfirm={promptConfig.onConfirm}\n        placeholder={promptConfig.placeholder}\n      />\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}