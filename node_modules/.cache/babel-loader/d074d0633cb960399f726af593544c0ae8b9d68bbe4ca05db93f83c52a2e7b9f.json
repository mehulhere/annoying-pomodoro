{"ast":null,"code":"var _jsxFileName = \"/home/poodle/Work/TimeBoxing/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Button } from './components/ui/Button';\nimport { Card, CardHeader, CardTitle, CardContent } from './components/ui/Card';\nimport TaskForm from './components/TaskForm';\nimport TaskList from './components/TaskList';\nimport { Toaster } from './components/Toaster';\nimport { toast } from './hooks/use-toast';\nimport confetti from 'canvas-confetti';\nimport { PromptDialog } from './components/ui/PromptDialog';\nimport SpiralForm from './components/SpiralForm';\nimport SpiralList from './components/SpiralList';\nimport DashboardView from './components/DashboardView';\nimport { saveDailyStats } from './lib/statsHistory';\nconsole.log(\"[DEBUG] saveDailyStats imported:\", saveDailyStats);\nimport { Award, CheckCircle, Timer, Settings, Coffee, AlertCircle, Moon, Sun, Volume2, VolumeX, BrainCircuit, AlertTriangle, Globe, Clock, BarChart } from 'lucide-react';\n// Spirals components will be added later\n\n// Different quote categories\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst quoteCategories = {\n  nagging: [\"You won't be able to do it... Prove me wrong!\", \"Don't disappoint future you.\", \"Less scrolling, more doing!\", \"That task isn't going to complete itself.\", \"Are you a talker or a doer?\", \"Time is ticking. Are you?\", \"Stop procrastinating. Start dominating.\", \"Is this the best use of your time right now?\", \"The clock is your boss. Don't get fired.\"],\n  rude: [\"Are you actually going to finish this time?\", \"Your procrastination is impressive, really.\", \"Oh look, another task you'll abandon.\", \"Half-finished tasks won't impress anyone.\", \"You call that productivity? I've seen snails move faster.\", \"Your to-do list is laughing at you right now.\", \"Great, another project for your 'abandoned' collection.\", \"Are you even trying at this point?\", \"Your focus is as stable as a house of cards.\"],\n  annoying: [\"Tick tock! Time is passing! Tick tock!\", \"Hey! Hey! Hey! You should be working!\", \"Don't stop! Keep going! Don't stop! Keep going!\", \"Are you distracted yet? How about now? Now?\", \"This won't complete itself! This won't complete itself!\", \"Focus! Focus! Focus! Are you focused yet?\", \"Hey, remember that deadline? It's coming! Coming! Coming!\", \"Still working? Still working? Still working?\", \"Did you finish yet? No? How about now? Now? Now?\"],\n  abusive: [\"Your productivity is an absolute joke.\", \"Even a child could finish this faster than you.\", \"Pathetic effort as usual.\", \"You'll never amount to anything at this rate.\", \"Everyone else finished hours ago. What's your excuse?\", \"Failure is your only consistent achievement.\", \"No wonder nobody takes your work seriously.\", \"This is why you're always behind everyone else.\", \"Your lack of discipline is embarrassing.\"]\n};\nconst POINTS_PER_TASK = 10;\nconst MAX_TIME_SAVED_BONUS = 10; // Max bonus points for saving time, scaled by percentage\nconst POINTS_DEDUCTION_FOR_EXTENSION = 2; // Penalty for extending a task\n\n// Moved helper functions before their usage in useCallback hooks\nconst formatTime = totalSeconds => {\n  const minutes = Math.floor(totalSeconds / 60);\n  const seconds = totalSeconds % 60;\n  return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n};\nconst formatDurationToHoursMinutes = totalSecondsInput => {\n  const totalSeconds = Math.floor(totalSecondsInput);\n  if (isNaN(totalSeconds) || totalSeconds < 0) return \"0 min\";\n  const hours = Math.floor(totalSeconds / 3600);\n  const minutes = Math.floor(totalSeconds % 3600 / 60);\n  if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} ${minutes} min`;\n  if (minutes > 0) return `${minutes} min`;\n  return \"0 min\";\n};\nfunction App() {\n  _s();\n  const [motivationalQuote, setMotivationalQuote] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n  const [spirals, setSpirals] = useState([]); // For spirals feature\n\n  const [currentTaskIndex, setCurrentTaskIndex] = useState(-1); // Index of the active task in the tasks array\n  const [timeRemaining, setTimeRemaining] = useState(0); // In seconds\n  const [isTimerActive, setIsTimerActive] = useState(false); // Is the countdown interval running?\n  const [isBreakTime, setIsBreakTime] = useState(false);\n  const timerIntervalId = useRef(null); // Using useRef to hold interval ID to avoid re-renders causing issues\n\n  const [score, setScore] = useState(0);\n  const notificationSound = useRef(null);\n  const quoteIntervalId = useRef(null);\n\n  // Settings state\n  const [quoteType, setQuoteType] = useState(\"abusive\"); // Default quote type\n  const [soundEnabled, setSoundEnabled] = useState(true); // Default sound setting\n  const [theme, setTheme] = useState(\"dark\"); // Default theme setting\n  const [breakDuration, setBreakDuration] = useState(5); // Default break duration in minutes\n  const [allowExtendBreak, setAllowExtendBreak] = useState(true); // Default setting for extending breaks\n  const [selectedTimezone, setSelectedTimezone] = useState('Asia/Kolkata'); // Default timezone\n  const [dailyResetTime, setDailyResetTime] = useState(\"00:00\"); // Default daily reset time\n  const [lastResetTimestamp, setLastResetTimestamp] = useState(null); // When the last daily reset occurred (timestamp)\n  const [customFinishTime, setCustomFinishTime] = useState(null); // Custom finish time for today\n  const [isLoaded, setIsLoaded] = useState(false); // To prevent saves before loads complete\n  const [activeView, setActiveView] = useState('focus'); // 'focus', 'plan', 'spirals', 'settings', 'dashboard'\n  const [sessionStartTime, setSessionStartTime] = useState(null); // Timestamp when the first task of the session started\n  const [displayedIdleTime, setDisplayedIdleTime] = useState(0); // Idle time in seconds\n\n  // State for PromptDialog\n  const [isPromptOpen, setIsPromptOpen] = useState(false);\n  const [promptConfig, setPromptConfig] = useState({\n    title: '',\n    message: '',\n    inputLabel: '',\n    defaultValue: '',\n    confirmText: 'Confirm',\n    cancelText: 'Cancel',\n    onConfirm: () => {},\n    placeholder: ''\n  });\n\n  // Load settings from localStorage on initial render\n  useEffect(() => {\n    const savedQuoteType = localStorage.getItem('quoteType');\n    const savedSoundEnabled = localStorage.getItem('soundEnabled');\n    const savedTheme = localStorage.getItem('theme');\n    const savedBreakDuration = localStorage.getItem('breakDuration');\n    const savedAllowExtendBreak = localStorage.getItem('allowExtendBreak');\n    const initialDailyResetTime = localStorage.getItem('dailyResetTime') || \"00:00\"; // Get saved or default\n    setDailyResetTime(initialDailyResetTime);\n\n    // Load other settings\n    if (savedQuoteType) setQuoteType(savedQuoteType);\n    if (savedSoundEnabled !== null) setSoundEnabled(savedSoundEnabled === 'true');\n    if (savedTheme) setTheme(savedTheme);\n    if (savedBreakDuration) setBreakDuration(parseInt(savedBreakDuration, 10));\n    if (savedAllowExtendBreak !== null) setAllowExtendBreak(savedAllowExtendBreak === 'true');\n\n    // --- Daily Reset Logic ---\n    const now = Date.now();\n    const [resetHour, resetMinute] = initialDailyResetTime.split(':').map(Number);\n    const todayDateObj = new Date(now);\n    const todaysResetDateTime = new Date(todayDateObj.getFullYear(), todayDateObj.getMonth(), todayDateObj.getDate(), resetHour, resetMinute, 0, 0).getTime();\n    const yesterdayDateObj = new Date(now);\n    yesterdayDateObj.setDate(yesterdayDateObj.getDate() - 1);\n    const yesterdaysResetDateTime = new Date(yesterdayDateObj.getFullYear(), yesterdayDateObj.getMonth(), yesterdayDateObj.getDate(), resetHour, resetMinute, 0, 0).getTime();\n    const savedLastResetTs = localStorage.getItem('lastResetTimestamp');\n    let currentLastResetTs = savedLastResetTs ? parseInt(savedLastResetTs, 10) : null;\n    let performReset = false;\n    if (currentLastResetTs === null) {\n      // First run or cleared storage. Establish baseline. States are already at defaults from useState.\n      currentLastResetTs = now >= todaysResetDateTime ? todaysResetDateTime : yesterdaysResetDateTime;\n      // No data state reset calls (like setTasks([])) needed here, useState did that.\n      // localStorage for these items will be updated by the save hook if they are new.\n    } else {\n      if (now >= todaysResetDateTime && currentLastResetTs < todaysResetDateTime) {\n        performReset = true;\n        currentLastResetTs = todaysResetDateTime; // Update to today's reset time\n      }\n    }\n    setLastResetTimestamp(currentLastResetTs); // Set state for lastResetTimestamp\n\n    // --- Load or Reset Data States ---\n    if (performReset) {\n      // Save the previous day's stats before resetting\n      const previousDayStats = {\n        date: new Date(currentLastResetTs - 86400000).toISOString().split('T')[0],\n        // Yesterday's date\n        focusTime: calculateFocusTime(),\n        idleTime: displayedIdleTime,\n        tasksCompleted: tasks.filter(t => t.completed).length,\n        score: score,\n        totalTasks: tasks.length,\n        totalPlannedTime: tasks.reduce((total, task) => total + task.estimatedDuration, 0)\n      };\n\n      // Save stats to history\n      saveDailyStats(previousDayStats);\n\n      // Now reset current day's data\n      setTasks([]);\n      setScore(0);\n      setSessionStartTime(null);\n      setCurrentTaskIndex(-1);\n      setTimeRemaining(0);\n      setIsTimerActive(false);\n      setIsBreakTime(false);\n      setDisplayedIdleTime(0);\n      // Spirals are NOT reset. Settings are NOT reset.\n      // The save useEffect will persist these new default values because isLoaded is still false.\n    } else {\n      // No reset due. Load data if it wasn't the very first run (i.e., savedLastResetTs was not null).\n      // If savedLastResetTs was null, it means it's effectively a first run for data, and useState defaults are appropriate.\n      if (savedLastResetTs) {\n        const sTasks = localStorage.getItem('tasks');\n        if (sTasks) {\n          try {\n            setTasks(JSON.parse(sTasks));\n          } catch (e) {\n            console.error(\"Error parsing tasks from localStorage\", e);\n            setTasks([]);\n          }\n        } else {\n          setTasks([]);\n        }\n        const sScore = localStorage.getItem('score');\n        setScore(sScore ? parseInt(sScore, 10) || 0 : 0);\n        const sSessionStart = localStorage.getItem('sessionStartTime');\n        setSessionStartTime(sSessionStart ? parseInt(sSessionStart, 10) || null : null);\n        const sCurrentTaskIndex = localStorage.getItem('currentTaskIndex');\n        setCurrentTaskIndex(sCurrentTaskIndex ? parseInt(sCurrentTaskIndex, 10) || -1 : -1);\n        const sTimeRemaining = localStorage.getItem('timeRemaining');\n        setTimeRemaining(sTimeRemaining ? parseInt(sTimeRemaining, 10) || 0 : 0);\n        const sIsTimerActive = localStorage.getItem('isTimerActive');\n        setIsTimerActive(sIsTimerActive === 'true');\n        const sIsBreakTime = localStorage.getItem('isBreakTime');\n        setIsBreakTime(sIsBreakTime === 'true');\n      }\n    }\n\n    // Spirals are always loaded as they don't reset (or set to empty if not found)\n    const savedSpirals = localStorage.getItem('spirals');\n    if (savedSpirals) {\n      try {\n        setSpirals(JSON.parse(savedSpirals));\n      } catch (e) {\n        console.error(\"Error parsing spirals from localStorage\", e);\n        setSpirals([]);\n      }\n    } else {\n      setSpirals([]);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save settings and data to localStorage whenever they change\n  useEffect(() => {\n    if (!isLoaded) return;\n    localStorage.setItem('quoteType', quoteType);\n    localStorage.setItem('soundEnabled', soundEnabled.toString());\n    localStorage.setItem('theme', theme);\n    localStorage.setItem('breakDuration', breakDuration.toString());\n    localStorage.setItem('allowExtendBreak', allowExtendBreak.toString());\n    localStorage.setItem('dailyResetTime', dailyResetTime); // Save new setting\n\n    if (lastResetTimestamp !== null) {\n      // Save new setting state\n      localStorage.setItem('lastResetTimestamp', lastResetTimestamp.toString());\n    } else {\n      localStorage.removeItem('lastResetTimestamp');\n    }\n    try {\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n    } catch (e) {\n      console.error(\"Error stringifying tasks for localStorage\", e);\n    }\n    try {\n      localStorage.setItem('spirals', JSON.stringify(spirals));\n    } catch (e) {\n      console.error(\"Error stringifying spirals for localStorage\", e);\n    }\n    localStorage.setItem('score', score.toString());\n    if (sessionStartTime !== null) localStorage.setItem('sessionStartTime', sessionStartTime.toString());else localStorage.removeItem('sessionStartTime');\n    localStorage.setItem('currentTaskIndex', currentTaskIndex.toString());\n    localStorage.setItem('timeRemaining', timeRemaining.toString());\n    localStorage.setItem('isTimerActive', isTimerActive.toString());\n    localStorage.setItem('isBreakTime', isBreakTime.toString());\n\n    // Save current day's stats to history for real-time dashboard updates\n    // Only save if we have tasks and a session has started\n    if (tasks.length > 0 && sessionStartTime !== null) {\n      const today = new Date().toISOString().split('T')[0];\n      const currentStats = {\n        date: today,\n        focusTime: calculateFocusTime(),\n        idleTime: displayedIdleTime,\n        tasksCompleted: tasks.filter(t => t.completed).length,\n        score: score,\n        totalTasks: tasks.length,\n        totalPlannedTime: tasks.reduce((total, task) => total + task.estimatedDuration, 0)\n      };\n      saveDailyStats(currentStats);\n    }\n  }, [quoteType, soundEnabled, theme, breakDuration, allowExtendBreak, dailyResetTime,\n  // Added dailyResetTime\n  tasks, spirals, score, sessionStartTime, currentTaskIndex, timeRemaining, isTimerActive, isBreakTime, isLoaded, lastResetTimestamp, displayedIdleTime // customFinishTime is NOT persisted, so not added here\n  ]);\n\n  // Apply theme class to body when it changes\n  useEffect(() => {\n    if (theme === 'light') {\n      document.body.classList.add('light-theme');\n    } else {\n      document.body.classList.remove('light-theme');\n    }\n  }, [theme]);\n\n  // Initialize motivational quote, sound, and notification permissions\n  useEffect(() => {\n    // Sound initialization (runs once)\n    notificationSound.current = new Audio();\n    notificationSound.current.src = `${process.env.PUBLIC_URL}/assets/notification.mp3`;\n\n    // Notification permission request (runs once)\n    if (Notification.permission !== \"granted\" && Notification.permission !== \"denied\") {\n      Notification.requestPermission().then(permission => {\n        if (permission === \"granted\") console.error(\"Desktop notification permission granted.\");\n      });\n    }\n  }, []); // Empty dependency array: runs only on mount and unmount\n\n  // Motivational quote initialization and updates (runs when quoteType changes)\n  useEffect(() => {\n    const getRandomQuote = () => {\n      const quotes = quoteCategories[quoteType];\n      return quotes[Math.floor(Math.random() * quotes.length)];\n    };\n    setMotivationalQuote(getRandomQuote());\n  }, [quoteType]);\n  const playNotificationSound = useCallback(() => {\n    if (soundEnabled && notificationSound.current) {\n      // Ensure src is set (it should be from the initial useEffect, but as a fallback)\n      if (!notificationSound.current.src) {\n        notificationSound.current.src = `${process.env.PUBLIC_URL}/assets/notification.mp3`;\n      }\n      notificationSound.current.currentTime = 0; // Reset sound to start\n      notificationSound.current.play().then(() => {\n        // console.error(\"Notification sound played successfully.\"); // Optional: for debugging\n      }).catch(error => {\n        console.error(\"Error playing sound:\", error);\n        if (error.name === 'NotSupportedError') {\n          console.error(`NotSupportedError: Please ensure the audio file at \"${notificationSound.current.src}\" exists in the public/assets/ folder, is a valid audio format (e.g., MP3), and that the browser can access it.`);\n          toast({\n            title: \"Sound Playback Error\",\n            description: \"Could not play notification sound. Check file path and format.\",\n            variant: \"destructive\"\n          });\n        } else {\n          toast({\n            title: \"Sound Error\",\n            description: \"An issue occurred while trying to play the sound.\",\n            variant: \"destructive\"\n          });\n        }\n      });\n    }\n  }, [soundEnabled]); // Removed process.env.PUBLIC_URL from deps as it's constant\n\n  const showDesktopNotification = useCallback((title, body) => {\n    if (Notification.permission === \"granted\") new Notification(title, {\n      body\n    });\n  }, []);\n\n  // Motivational quote logic\n  const updateMotivationalQuote = useCallback(() => {\n    const getRandomQuote = () => {\n      const quotes = quoteCategories[quoteType];\n      return quotes[Math.floor(Math.random() * quotes.length)];\n    };\n    setMotivationalQuote(getRandomQuote());\n  }, [quoteType]);\n  const startMotivationalQuoteInterval = useCallback(() => {\n    if (!isTimerActive && !quoteIntervalId.current) {\n      updateMotivationalQuote();\n      quoteIntervalId.current = setInterval(updateMotivationalQuote, 30000);\n    }\n  }, [isTimerActive, updateMotivationalQuote]);\n  const stopMotivationalQuoteInterval = useCallback(() => {\n    if (quoteIntervalId.current) {\n      clearInterval(quoteIntervalId.current);\n      quoteIntervalId.current = null;\n    }\n  }, []);\n  useEffect(() => {\n    if (isTimerActive) {\n      stopMotivationalQuoteInterval();\n    } else {\n      startMotivationalQuoteInterval();\n    }\n    return () => stopMotivationalQuoteInterval(); // Cleanup on unmount\n  }, [isTimerActive, startMotivationalQuoteInterval, stopMotivationalQuoteInterval]);\n\n  // Task Management\n  const handleAddTask = useCallback(newTaskData => {\n    setTasks(prevTasks => [...prevTasks, {\n      id: Date.now(),\n      name: newTaskData.name,\n      duration: newTaskData.duration,\n      // user input in minutes\n      estimatedDuration: newTaskData.duration,\n      completed: false,\n      started: false,\n      timeSpentSeconds: 0,\n      timerStartTime: null,\n      completionTimestamp: null\n    }]);\n    toast({\n      title: \"Task Added\",\n      description: `\"${newTaskData.name}\" added to your list.`\n    });\n  }, []);\n  const handleRemoveTask = useCallback(taskId => {\n    var _tasks$currentTaskInd;\n    const taskToRemove = tasks.find(t => t.id === taskId);\n    setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId));\n    if (taskToRemove) {\n      toast({\n        title: \"Task Removed\",\n        description: `\"${taskToRemove.name}\" has been removed.`,\n        variant: \"destructive\"\n      });\n    }\n    if (currentTaskIndex !== -1 && ((_tasks$currentTaskInd = tasks[currentTaskIndex]) === null || _tasks$currentTaskInd === void 0 ? void 0 : _tasks$currentTaskInd.id) === taskId) {\n      if (timerIntervalId.current) clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n      setCurrentTaskIndex(-1);\n      setTimeRemaining(0);\n      setIsTimerActive(false);\n      setIsBreakTime(false);\n    }\n  }, [tasks, currentTaskIndex]);\n\n  // Timer Core Logic: Start, Pause, Resume, Done, Extend\n  const startTimer = useCallback(taskIndex => {\n    // Guard 1: Basic validity and completion check\n    if (taskIndex < 0 || taskIndex >= tasks.length || !tasks[taskIndex]) {\n      toast({\n        title: \"Invalid Task\",\n        description: \"Task not found or index is out of bounds.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    if (tasks[taskIndex].completed) {\n      toast({\n        title: \"Task Completed\",\n        description: `\"${tasks[taskIndex].name}\" is already completed.`,\n        variant: \"default\"\n      });\n      return;\n    }\n\n    // Guard 2: Check if another task is active or this specific one\n    if (isTimerActive && !isBreakTime && currentTaskIndex === taskIndex) {\n      toast({\n        title: \"Already Active\",\n        description: `\"${tasks[taskIndex].name}\" is already running.`,\n        variant: \"default\"\n      });\n      return;\n    }\n    if (isTimerActive && !isBreakTime && currentTaskIndex !== -1 && currentTaskIndex !== taskIndex) {\n      var _tasks$currentTaskInd2;\n      toast({\n        title: \"Timer Busy\",\n        description: `\"${((_tasks$currentTaskInd2 = tasks[currentTaskIndex]) === null || _tasks$currentTaskInd2 === void 0 ? void 0 : _tasks$currentTaskInd2.name) || 'Another task'}\" is in progress. Complete or stop it first.`,\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Guard 3: Handle active break\n    if (isBreakTime) {\n      if (timerIntervalId.current) clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n      setIsBreakTime(false); // Stop the break\n      toast({\n        title: \"Break Interrupted\",\n        description: \"Starting a new task.\"\n      });\n    }\n\n    // Set session start time if this is the very first task being started\n    if (!sessionStartTime) {\n      setSessionStartTime(Date.now());\n    }\n    const taskToStart = tasks[taskIndex];\n\n    // This extra check is for absolute safety, though guards above should cover it.\n    if (!taskToStart || typeof taskToStart.duration === 'undefined') {\n      console.error(\"Critical error: taskToStart is invalid despite guards. taskIndex:\", taskIndex, \"task:\", taskToStart);\n      toast({\n        title: \"Task Data Error\",\n        description: \"Cannot start task due to incomplete data. Please check console.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    setTasks(prevTasks => prevTasks.map((task, idx) => idx === taskIndex ? {\n      ...task,\n      started: true,\n      timerStartTime: Date.now(),\n      timeSpentSeconds: task.timeSpentSeconds || 0\n    } : task));\n    setCurrentTaskIndex(taskIndex);\n    // If task was partially worked on, resume from remaining, else from full duration\n    const timeToSet = taskToStart.duration * 60 - (taskToStart.timeSpentSeconds || 0);\n    setTimeRemaining(timeToSet > 0 ? timeToSet : taskToStart.duration * 60); // Ensure it doesn't start negative\n    setIsTimerActive(true);\n    setIsBreakTime(false); // Ensure break mode is off\n    toast({\n      title: \"Task Started\",\n      description: `Timer for \"${taskToStart.name}\" has begun.`\n    });\n  }, [tasks, isTimerActive, isBreakTime, currentTaskIndex, sessionStartTime, setSessionStartTime, setTasks, setCurrentTaskIndex, setTimeRemaining, setIsTimerActive, setIsBreakTime]);\n  const handlePauseTimer = useCallback(() => {\n    if (timerIntervalId.current) {\n      clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n      setIsTimerActive(false);\n      toast({\n        title: isBreakTime ? \"Break Paused\" : \"Timer Paused\"\n      });\n    }\n  }, [isBreakTime, setIsTimerActive]);\n  const handleResumeTimer = useCallback(() => {\n    if (!isTimerActive && timeRemaining > 0 && (currentTaskIndex !== -1 && tasks[currentTaskIndex] && !tasks[currentTaskIndex].completed && !isBreakTime || isBreakTime)) {\n      setIsTimerActive(true);\n      toast({\n        title: isBreakTime ? \"Break Resumed\" : \"Timer Resumed\"\n      });\n    }\n  }, [isTimerActive, timeRemaining, currentTaskIndex, tasks, isBreakTime, setIsTimerActive]);\n  const handleTaskDone = useCallback(() => {\n    if (currentTaskIndex === -1 || !tasks[currentTaskIndex] || tasks[currentTaskIndex].completed) {\n      toast({\n        title: \"No Active Task\",\n        description: \"No task to mark as done.\",\n        variant: \"default\"\n      });\n      return;\n    }\n    const task = tasks[currentTaskIndex];\n    let pointsEarnedThisTask = 0;\n    const timeWhenDoneSeconds = task.timerStartTime ? (Date.now() - task.timerStartTime) / 1000 : task.timeSpentSeconds;\n    const actualTimeSpentMinutes = Math.round(timeWhenDoneSeconds / 60); // Round to nearest minute for scoring\n\n    // Base score: 1 point per minute of focus time\n    pointsEarnedThisTask += actualTimeSpentMinutes;\n\n    // Bonus for finishing early: 1 point per minute saved\n    const estimatedSeconds = task.estimatedDuration * 60;\n    const secondsSaved = Math.max(0, estimatedSeconds - timeWhenDoneSeconds);\n    const bonusMinutes = Math.round(secondsSaved / 60); // Round saved seconds to nearest minute\n    pointsEarnedThisTask += bonusMinutes;\n\n    // Ensure score is not negative (shouldn't happen with this logic, but as a safeguard)\n    pointsEarnedThisTask = Math.max(0, pointsEarnedThisTask);\n    setScore(prevScore => prevScore + pointsEarnedThisTask);\n    confetti({\n      particleCount: 150,\n      spread: 100,\n      origin: {\n        y: 0.6\n      }\n    });\n\n    // Use actualTimeSpent (which could be > estimated if they let timer run out and clicked done)\n    // for the task's final timeSpentSeconds for record keeping.\n    const finalTimeSpentSeconds = timeWhenDoneSeconds;\n    setTasks(prevTasks => prevTasks.map((t, idx) => idx === currentTaskIndex ? {\n      ...t,\n      completed: true,\n      timeSpentSeconds: finalTimeSpentSeconds,\n      duration: finalTimeSpentSeconds / 60,\n      // Update duration to reflect actual time spent\n      completionTimestamp: Date.now()\n    } : t));\n    if (timerIntervalId.current) {\n      clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n    }\n    setIsTimerActive(false);\n    playNotificationSound();\n    showDesktopNotification(\"Task Finished!\", `\"${task.name}\" is complete.`);\n    toast({\n      title: \"Task Finished!\",\n      description: `\"${task.name}\" complete. Points: +${pointsEarnedThisTask}`\n    });\n    setIsBreakTime(true);\n    setTimeRemaining(breakDuration * 60);\n    setCurrentTaskIndex(-1);\n    setIsTimerActive(true);\n    toast({\n      title: \"Break Time!\",\n      description: `Taking a ${breakDuration} minute break.`\n    });\n  }, [tasks, currentTaskIndex, playNotificationSound, showDesktopNotification, breakDuration, setScore, setTasks, setIsBreakTime, setTimeRemaining, setCurrentTaskIndex, setIsTimerActive]);\n  const handleSkipBreak = useCallback(() => {\n    if (isBreakTime && isTimerActive) {\n      if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null;\n      }\n      setIsTimerActive(false);\n      setIsBreakTime(false);\n      setTimeRemaining(0);\n      setCurrentTaskIndex(-1);\n      toast({\n        title: \"Break Skipped\",\n        description: \"Break ended. Ready for the next task?\"\n      });\n    } else {\n      toast({\n        title: \"No Active Break\",\n        description: \"There is no active break to skip.\",\n        variant: \"default\"\n      });\n    }\n  }, [isBreakTime, isTimerActive, setIsTimerActive, setIsBreakTime, setTimeRemaining, setCurrentTaskIndex]);\n  const handleExtendTimer = useCallback(() => {\n    // If no task active AND not break time, nothing to extend\n    if (currentTaskIndex === -1 && !isBreakTime) {\n      toast({\n        title: \"No Timer Active\",\n        description: \"Start a task or break to extend its time.\",\n        variant: \"default\"\n      });\n      return;\n    }\n\n    // If it's a task, check if it's completed \n    // (This check is also in the button's disabled logic, but good for safety)\n    if (!isBreakTime && tasks[currentTaskIndex] && tasks[currentTaskIndex].completed) {\n      toast({\n        title: \"Task Completed\",\n        description: `Task \"${tasks[currentTaskIndex].name}\" is already completed and cannot be extended.`,\n        variant: \"default\"\n      });\n      return;\n    }\n\n    // If it's a break, check if extending breaks is allowed\n    if (isBreakTime && !allowExtendBreak) {\n      toast({\n        title: \"Extend Break Disabled\",\n        description: \"Extending break time is currently disabled in settings.\",\n        variant: \"default\"\n      });\n      return;\n    }\n\n    // For tasks, time must be 0. For breaks, this check is skipped if allowExtendBreak is true.\n    if (!isBreakTime && timeRemaining > 0) {\n      toast({\n        title: \"Timer Still Running\",\n        description: \"Task time can only be extended when the timer reaches 0.\",\n        variant: \"default\"\n      });\n      return;\n    }\n    const context = isBreakTime ? \"break\" : tasks[currentTaskIndex] ? `task \"${tasks[currentTaskIndex].name}\"` : \"task\";\n    const defaultExtension = \"5\";\n    const currentTimerValue = formatTime(timeRemaining);\n    setPromptConfig({\n      title: `Extend ${context}`,\n      message: isBreakTime && timeRemaining > 0 ? `Current break time is ${currentTimerValue}. How many additional minutes would you like to add?` : `How many minutes would you like to add to the ${context}? ${!isBreakTime && tasks[currentTaskIndex] ? 'Timer is currently at 00:00.' : ''}`,\n      inputLabel: 'Minutes to add:',\n      defaultValue: defaultExtension,\n      confirmText: 'Extend',\n      cancelText: 'Cancel',\n      placeholder: 'Enter minutes',\n      onConfirm: extendMinutesText => {\n        const extendMinutes = parseInt(extendMinutesText, 10);\n        if (!isNaN(extendMinutes) && extendMinutes > 0) {\n          const newTimeRemaining = timeRemaining + extendMinutes * 60;\n          setTimeRemaining(newTimeRemaining);\n          let toastDescription = `Added ${extendMinutes} minutes to ${context}.`;\n          if (!isBreakTime && currentTaskIndex !== -1 && tasks[currentTaskIndex]) {\n            setTasks(prevTasks => prevTasks.map((t, idx) => idx === currentTaskIndex ? {\n              ...t,\n              duration: t.duration + extendMinutes,\n              estimatedDuration: t.estimatedDuration + extendMinutes\n            } : t));\n            setScore(prevScore => prevScore - POINTS_DEDUCTION_FOR_EXTENSION);\n            toastDescription += ` Points: -${POINTS_DEDUCTION_FOR_EXTENSION}`;\n          }\n          if (!isTimerActive && newTimeRemaining > 0) {\n            setIsTimerActive(true);\n          }\n          toast({\n            title: \"Timer Extended\",\n            description: toastDescription\n          });\n        } else {\n          toast({\n            title: \"Invalid Input\",\n            description: \"Please enter a valid number of minutes.\",\n            variant: \"destructive\"\n          });\n        }\n      }\n    });\n    setIsPromptOpen(true);\n  }, [currentTaskIndex, isBreakTime, isTimerActive, timeRemaining, tasks, allowExtendBreak, setIsPromptOpen, setPromptConfig, setTasks, setScore, setTimeRemaining, setIsTimerActive]);\n\n  // Effect for Timer Countdown\n  useEffect(() => {\n    if (isTimerActive && timeRemaining > 0) {\n      // If timer should be active and there's time, start the interval\n      timerIntervalId.current = setInterval(() => {\n        setTimeRemaining(prevTime => {\n          if (prevTime <= 1) {\n            // Stop the interval first\n            if (timerIntervalId.current) clearInterval(timerIntervalId.current);\n            timerIntervalId.current = null;\n            setIsTimerActive(false); // Timer is no longer active\n\n            if (isBreakTime) {\n              playNotificationSound();\n              showDesktopNotification(\"Break Over!\", \"Your break time is up.\");\n              toast({\n                title: \"Break Finished!\",\n                description: \"Ready for the next task?\"\n              });\n              setIsBreakTime(false); // Break is over\n              setCurrentTaskIndex(-1); // No active task\n            } else if (currentTaskIndex !== -1 && tasks[currentTaskIndex]) {\n              const task = tasks[currentTaskIndex];\n              // Increment timeSpentSeconds one last time for the final second\n              setTasks(prevTasks => prevTasks.map((t, idx) => idx === currentTaskIndex ? {\n                ...t,\n                timeSpentSeconds: (t.timeSpentSeconds || 0) + 1\n              } : t));\n              playNotificationSound();\n              showDesktopNotification(\"Time's Up!\", `Time for \"${task.name}\" is up.`);\n              toast({\n                title: \"Time's Up!\",\n                description: `\"${task.name}\" timer finished. Mark done or extend.`\n              });\n              // User needs to manually mark done or extend. isTimerActive is false.\n            }\n            return 0; // Time is up\n          }\n\n          // Increment timeSpentSeconds for active task during normal countdown\n          if (currentTaskIndex !== -1 && !isBreakTime && tasks[currentTaskIndex]) {\n            setTasks(prevTasks => prevTasks.map((task, idx) => idx === currentTaskIndex ? {\n              ...task,\n              timeSpentSeconds: (task.timeSpentSeconds || 0) + 1\n            } : task));\n          }\n          return prevTime - 1; // Countdown\n        });\n      }, 1000);\n    } else {\n      // If timer shouldn't be active or time is up, ensure interval is cleared\n      if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null;\n      }\n    }\n    // Cleanup function: always clear interval when dependencies change or component unmounts\n    return () => {\n      if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null;\n      }\n    };\n  }, [isTimerActive, timeRemaining, tasks, currentTaskIndex, isBreakTime, playNotificationSound, showDesktopNotification, setTasks]); // Added setTasks\n\n  // Effect for Idle Time Calculation\n  useEffect(() => {\n    if (!isTimerActive && sessionStartTime !== null) {\n      const updateIdleTime = () => {\n        // Calculate time elapsed since the session started in seconds\n        const now = Date.now();\n        const totalSessionTimeSeconds = Math.floor((now - sessionStartTime) / 1000);\n\n        // Calculate total focus time (sum of time spent on completed tasks)\n        const totalFocusTimeSeconds = calculateFocusTime();\n\n        // Idle time = total session time - total focus time\n        const calculatedIdleTime = Math.max(0, totalSessionTimeSeconds - totalFocusTimeSeconds);\n        setDisplayedIdleTime(calculatedIdleTime);\n      };\n\n      // Update immediately and then every minute\n      updateIdleTime();\n      const intervalId = setInterval(updateIdleTime, 60000); // 60 seconds\n\n      return () => clearInterval(intervalId);\n    }\n  }, [isTimerActive, sessionStartTime]);\n\n  // Calculate total focus time from completed tasks\n  const calculateFocusTime = () => {\n    return tasks.reduce((total, task) => {\n      var _tasks$currentTaskInd3;\n      if (task.completed) {\n        // For completed tasks, use the actual time spent\n        return total + (task.timeSpentSeconds || 0);\n      } else if (task.started && currentTaskIndex !== -1 && ((_tasks$currentTaskInd3 = tasks[currentTaskIndex]) === null || _tasks$currentTaskInd3 === void 0 ? void 0 : _tasks$currentTaskInd3.id) === task.id && isTimerActive) {\n        // For the current active task, add the time spent so far plus the time since the timer started\n        const now = Date.now();\n        const timeElapsedSinceStart = Math.floor((now - tasks[currentTaskIndex].timerStartTime) / 1000);\n        return total + (task.timeSpentSeconds || 0) + timeElapsedSinceStart;\n      }\n      return total + (task.timeSpentSeconds || 0);\n    }, 0);\n  };\n\n  // Formatting and Display Logic\n  const timerDisplayColor = () => {\n    if (isBreakTime) return 'text-emerald-400'; // Specific color for break time\n    if (currentTaskIndex === -1 || !tasks[currentTaskIndex] || tasks[currentTaskIndex].completed) return 'text-timerAccent'; // Default/idle color\n\n    const task = tasks[currentTaskIndex];\n    const totalTaskSeconds = task.estimatedDuration * 60;\n    if (totalTaskSeconds === 0) return 'text-timerAccent';\n    const percentageRemaining = timeRemaining / totalTaskSeconds * 100;\n    if (percentageRemaining <= 20) return 'text-red-500';\n    if (percentageRemaining <= 50) return 'text-yellow-500';\n    return 'text-timerAccent';\n  };\n  const calculateDailyStats = useCallback(() => {\n    const totalPlannedDuration = tasks.reduce((acc, task) => acc + task.estimatedDuration, 0); // in minutes\n\n    let accumulatedFocusTimeSeconds = tasks.reduce((acc, task) => {\n      if (task.completed) {\n        return acc + (task.timeSpentSeconds || 0);\n      }\n      if (task.id === (tasks[currentTaskIndex] && tasks[currentTaskIndex].id) && !task.completed && !isBreakTime) {\n        return acc + (task.timeSpentSeconds || 0);\n      }\n      return acc;\n    }, 0);\n    const remainingUncompletedTaskMinutes = tasks.filter(task => !task.completed).reduce((acc, task) => {\n      if (task.id === (tasks[currentTaskIndex] && tasks[currentTaskIndex].id) && !isBreakTime) {\n        return acc + Math.max(0, Math.ceil(timeRemaining / 60));\n      }\n      return acc + task.estimatedDuration;\n    }, 0);\n    const now = new Date();\n    let timeLeftTodayMinutes = 0;\n\n    // Determine the end time for P(Not Finishing) based on customFinishTime or dailyResetTime\n    let endOfTodayTargetTime;\n    if (customFinishTime) {\n      const [finishHour, finishMinute] = customFinishTime.split(':').map(Number);\n      const customEndTime = new Date(now);\n      customEndTime.setHours(finishHour, finishMinute, 0, 0);\n\n      // If the custom time is in the past today, calculate until tomorrow's custom time\n      // This handles cases where the user sets a time like 9 AM, but it's already 10 AM\n      if (customEndTime.getTime() < now.getTime()) {\n        customEndTime.setDate(customEndTime.getDate() + 1);\n      }\n      endOfTodayTargetTime = customEndTime;\n    } else {\n      // Fallback to dailyResetTime if no custom finish time is set\n      const [resetHour, resetMinute] = dailyResetTime.split(':').map(Number);\n      const todayReset = new Date(now);\n      todayReset.setHours(resetHour, resetMinute, 0, 0);\n      const tomorrowReset = new Date(now);\n      tomorrowReset.setDate(tomorrowReset.getDate() + 1);\n      tomorrowReset.setHours(resetHour, resetMinute, 0, 0);\n      endOfTodayTargetTime = now.getTime() < todayReset.getTime() ? todayReset : tomorrowReset;\n    }\n    const localMsLeft = endOfTodayTargetTime.getTime() - now.getTime();\n    timeLeftTodayMinutes = Math.max(0, Math.floor(localMsLeft / (1000 * 60)));\n    let probNotFinishingPercentage = 0;\n    if (remainingUncompletedTaskMinutes === 0) {\n      probNotFinishingPercentage = 0;\n    } else if (timeLeftTodayMinutes <= 0) {\n      probNotFinishingPercentage = 100;\n    } else {\n      const P_base_workload = Math.min(1, remainingUncompletedTaskMinutes / timeLeftTodayMinutes);\n      const totalSessionTimeSeconds = accumulatedFocusTimeSeconds + displayedIdleTime;\n      let inefficiency_penalty_multiplier = 1; // Default to no penalty\n      if (totalSessionTimeSeconds > 0) {\n        const efficiency_metric = accumulatedFocusTimeSeconds / totalSessionTimeSeconds;\n        inefficiency_penalty_multiplier = 1 + (1 - efficiency_metric); // Ranges [1, 2]\n      }\n      const raw_probability = P_base_workload * inefficiency_penalty_multiplier;\n      probNotFinishingPercentage = Math.min(100, Math.round(raw_probability * 100));\n    }\n    return {\n      totalPlannedTime: totalPlannedDuration,\n      accumulatedFocusTimeSeconds: accumulatedFocusTimeSeconds,\n      estimatedRemainingTaskTimeMinutes: remainingUncompletedTaskMinutes,\n      probNotFinishing: probNotFinishingPercentage\n    };\n  }, [tasks, currentTaskIndex, timeRemaining, isBreakTime, displayedIdleTime, dailyResetTime, customFinishTime]); // Added customFinishTime dependency\n\n  const dailyStats = calculateDailyStats();\n  const activeTaskObject = currentTaskIndex !== -1 && tasks[currentTaskIndex] ? tasks[currentTaskIndex] : null;\n  const currentDisplayTaskName = isBreakTime ? \"Break Time!\" : activeTaskObject ? activeTaskObject.name : \"No Active Task\";\n  const activeTaskOriginalId = activeTaskObject ? activeTaskObject.id : null;\n  const handleClearAllTasks = useCallback(() => {\n    setTasks([]);\n    localStorage.removeItem('tasks'); // Also clear from localStorage immediately\n    toast({\n      title: \"Tasks Cleared\",\n      description: \"All tasks have been removed.\",\n      variant: \"destructive\"\n    });\n  }, []);\n\n  // Spirals handlers (to be implemented)\n  const handleAddSpiral = useCallback(spiralName => {\n    if (!spiralName.trim()) {\n      toast({\n        title: \"Invalid Spiral\",\n        description: \"Spiral name cannot be empty.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    setSpirals(prev => [...prev, {\n      id: Date.now(),\n      name: spiralName.trim()\n    }]);\n    toast({\n      title: \"Spiral Added\",\n      description: `\"${spiralName.trim()}\" added to spirals.`\n    });\n  }, []);\n  const handleRemoveSpiral = useCallback(spiralId => {\n    const spiralToRemove = spirals.find(s => s.id === spiralId);\n    setSpirals(prev => prev.filter(s => s.id !== spiralId));\n    if (spiralToRemove) {\n      toast({\n        title: \"Spiral Removed\",\n        description: `\"${spiralToRemove.name}\" removed.`,\n        variant: \"destructive\"\n      });\n    }\n  }, [spirals]);\n  const handleMoveSpiralToTasks = useCallback(spiralId => {\n    const spiralToMove = spirals.find(s => s.id === spiralId);\n    if (!spiralToMove) return;\n    setPromptConfig({\n      title: \"Move Spiral to Task\",\n      message: `Enter estimated duration (minutes) for task \"${spiralToMove.name}\":`,\n      inputLabel: \"Duration (minutes):\",\n      defaultValue: \"30\",\n      confirmText: \"Move to Tasks\",\n      cancelText: \"Cancel\",\n      placeholder: \"e.g., 30\",\n      onConfirm: durationText => {\n        if (durationText === null) return;\n        const duration = parseInt(durationText, 10);\n        if (duration && duration > 0) {\n          handleAddTask({\n            name: spiralToMove.name,\n            duration\n          });\n          setSpirals(prev => prev.filter(s => s.id !== spiralId));\n          toast({\n            title: \"Spiral Moved\",\n            description: `\"${spiralToMove.name}\" moved to tasks.`\n          });\n        } else {\n          toast({\n            title: \"Invalid Duration\",\n            description: \"Please enter a positive number for duration.\",\n            variant: \"destructive\"\n          });\n        }\n      }\n    });\n    setIsPromptOpen(true);\n  }, [spirals, handleAddTask, setIsPromptOpen, setPromptConfig]);\n  const handleMasterPlayPause = () => {\n    if (isTimerActive) {\n      // If timer is supposed to be active (running or paused awaiting resume)\n      handlePauseTimer(); // This will set isTimerActive = false and clear interval\n    } else {\n      // Timer is not supposed to be active (fully stopped or explicitly paused)\n      // Check if we can resume an existing task or break\n      if (timeRemaining > 0 && (currentTaskIndex !== -1 && tasks[currentTaskIndex] && !tasks[currentTaskIndex].completed && !isBreakTime || isBreakTime)) {\n        handleResumeTimer(); // This will set isTimerActive = true\n      } else {\n        // Otherwise, try to start the first available (uncompleted) task\n        const firstUncompletedTaskIndex = tasks.findIndex(t => !t.completed);\n        if (firstUncompletedTaskIndex !== -1) {\n          startTimer(firstUncompletedTaskIndex); // startTimer sets isTimerActive = true\n        } else {\n          toast({\n            title: \"No Tasks\",\n            description: \"Add a task or all tasks are complete.\",\n            variant: \"default\"\n          });\n        }\n      }\n    }\n  };\n\n  // JSX will be in the next part\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen flex flex-col overflow-hidden bg-gradient-to-br from-dark to-dark-100 text-lightText p-3 sm:p-4 md:p-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-gradient-to-r from-dark-100 to-dark-200 p-3.5 rounded-lg shadow-md mb-4 ring-1 ring-dark-300/40 flex flex-col justify-center transition-all duration-300 hover:shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl md:text-2xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\",\n        children: \"Annoying Pomodoro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 916,\n        columnNumber: 9\n      }, this), motivationalQuote && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative mx-auto mt-1.5 mb-2 max-w-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-dark-300/50 p-2 rounded-md italic text-center text-subtleText text-xs md:text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-cyanAccent\",\n            children: \"\\\"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 921,\n            columnNumber: 15\n          }, this), motivationalQuote, /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-cyanAccent\",\n            children: \"\\\"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 921,\n            columnNumber: 76\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 920,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute -bottom-1.5 left-1/2 transform -translate-x-1/2 w-3 h-3 rotate-45 bg-dark-300/50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 923,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 919,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 pt-2 border-t border-dark-300/60 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 justify-around items-center gap-3 sm:gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\",\n            children: [/*#__PURE__*/_jsxDEV(Award, {\n              className: \"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 931,\n              columnNumber: 15\n            }, this), \"Score\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 930,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\",\n            children: score\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 934,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 929,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 938,\n              columnNumber: 15\n            }, this), \"Tasks Done\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 937,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\",\n            children: tasks.filter(t => t.completed).length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 941,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 936,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\",\n            children: [/*#__PURE__*/_jsxDEV(Timer, {\n              className: \"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 945,\n              columnNumber: 15\n            }, this), \"Focus Time\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 944,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\",\n            children: formatDurationToHoursMinutes(dailyStats.accumulatedFocusTimeSeconds)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 948,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\",\n            children: [/*#__PURE__*/_jsxDEV(Coffee, {\n              className: \"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 952,\n              columnNumber: 15\n            }, this), \"Idle Time\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 951,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\",\n            children: formatDurationToHoursMinutes(displayedIdleTime)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 955,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 950,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\",\n            children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n              className: \"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 959,\n              columnNumber: 15\n            }, this), \"P(Not Finish)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 958,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\",\n            children: [dailyStats.probNotFinishing, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 962,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 957,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 928,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 915,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row flex-grow overflow-hidden w-full gap-3 sm:gap-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-2 w-28 sm:w-32\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: activeView === 'focus' ? 'default' : 'outline',\n          onClick: () => setActiveView('focus'),\n          className: `py-2.5 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm transition-all duration-300 pl-2 sm:pl-3\n                      ${activeView === 'focus' ? 'shadow-sm ring-1 ring-cyanAccent/60' : 'hover:bg-dark-200/40 hover:ring-1 hover:ring-dark-300/60'}`,\n          children: [/*#__PURE__*/_jsxDEV(Timer, {\n            className: `h-5 w-5 mb-0.5 ${activeView === 'focus' ? 'text-white animate-pulse-subtle' : 'text-subtleText'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 977,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Focus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 978,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 971,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: activeView === 'plan' ? 'default' : 'outline',\n          onClick: () => setActiveView('plan'),\n          className: `py-2.5 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm transition-all duration-300 pl-2 sm:pl-3\n                      ${activeView === 'plan' ? 'shadow-sm ring-1 ring-cyanAccent/60' : 'hover:bg-dark-200/40 hover:ring-1 hover:ring-dark-300/60'}`,\n          children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n            className: `h-5 w-5 mb-0.5 ${activeView === 'plan' ? 'text-white animate-pulse-subtle' : 'text-subtleText'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 986,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Plan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 987,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 980,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: activeView === 'spirals' ? 'default' : 'outline',\n          onClick: () => setActiveView('spirals'),\n          className: `py-2.5 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm transition-all duration-300 pl-2 sm:pl-3\n                      ${activeView === 'spirals' ? 'shadow-sm ring-1 ring-cyanAccent/60' : 'hover:bg-dark-200/40 hover:ring-1 hover:ring-dark-300/60'}`,\n          children: [/*#__PURE__*/_jsxDEV(Award, {\n            className: `h-5 w-5 mb-0.5 ${activeView === 'spirals' ? 'text-white animate-pulse-subtle' : 'text-subtleText'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 995,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Spirals\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 996,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 989,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: activeView === 'settings' ? 'default' : 'outline',\n          onClick: () => setActiveView('settings'),\n          className: `py-2.5 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm transition-all duration-300 pl-2 sm:pl-3\n                      ${activeView === 'settings' ? 'shadow-sm ring-1 ring-cyanAccent/60' : 'hover:bg-dark-200/40 hover:ring-1 hover:ring-dark-300/60'}`,\n          children: [/*#__PURE__*/_jsxDEV(Settings, {\n            className: `h-5 w-5 mb-0.5 ${activeView === 'settings' ? 'text-white animate-pulse-subtle' : 'text-subtleText'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1004,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1005,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 998,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: activeView === 'dashboard' ? 'default' : 'outline',\n          onClick: () => setActiveView('dashboard'),\n          className: \"py-3 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(BarChart, {\n            className: \"h-5 w-5 mb-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1013,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1014,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1008,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 970,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-grow overflow-auto p-2 sm:p-3 rounded-md bg-dark-100/20 backdrop-blur-sm shadow-inner\",\n        children: [activeView === 'focus' && /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"text-center py-3 sm:py-3.5 border-b border-dark-300/25\",\n            children: /*#__PURE__*/_jsxDEV(CardTitle, {\n              className: `text-xl sm:text-2xl font-semibold transition-colors duration-300 ${currentTaskIndex === -1 && currentDisplayTaskName === \"No Active Task\" ? \"text-subtleText\" : \"text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\"}`,\n              children: [\"Current Task: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: currentTaskIndex !== -1 ? \"text-brightAccent\" : \"\",\n                children: currentDisplayTaskName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1025,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1024,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1023,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            className: \"text-center flex-grow flex flex-col justify-center p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative mx-auto mb-5\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 rounded-full bg-dark-300/25 flex items-center justify-center\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1031,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `relative z-10 flex flex-col items-center justify-center rounded-full\n                                  ${isBreakTime ? 'bg-gradient-to-br from-emerald-800/15 to-emerald-600/05' : 'bg-gradient-to-br from-dark-300/15 to-dark-200/05'}\n                                  w-48 h-48 sm:w-52 sm:h-52 md:w-56 md:h-56 shadow-inner border border-dark-300/25`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"timer-clock-react\",\n                  className: `text-5xl sm:text-6xl font-mono font-bold ${timerDisplayColor()} tabular-nums transition-colors duration-500`,\n                  children: formatTime(timeRemaining)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1035,\n                  columnNumber: 21\n                }, this), isTimerActive && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-subtleText text-[10px] sm:text-xs mt-1.5\",\n                  children: isBreakTime ? 'BREAK IN PROGRESS' : 'FOCUS IN PROGRESS'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1039,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1032,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1030,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap justify-center items-center gap-2 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: !isTimerActive && timeRemaining === 0 && currentTaskIndex === -1 ? \"default\" : \"buttonGray\",\n                size: \"default\",\n                className: `flex-grow sm:flex-grow-0 min-w-[90px] sm:min-w-[100px] py-1.5 text-sm md:text-base font-medium shadow-sm\n                              ${!isTimerActive && timeRemaining === 0 && tasks.findIndex(t => !t.completed) !== -1 ? 'bg-gradient-to-r from-cyanAccent to-brightAccent hover:opacity-90 transition-all duration-300' : ''}\n                              ${isTimerActive ? 'hover:bg-red-700/50 transition-all duration-300' : ''}`,\n                onClick: handleMasterPlayPause,\n                disabled: !isTimerActive && timeRemaining === 0 && tasks.findIndex(t => !t.completed) === -1,\n                children: isTimerActive ? \"Pause\" : timeRemaining > 0 ? \"Resume\" : \"Start\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1048,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: isBreakTime ? \"buttonGray\" : \"buttonGreen\",\n                size: \"default\",\n                className: `flex-grow sm:flex-grow-0 min-w-[90px] sm:min-w-[100px] py-1.5 text-sm md:text-base font-medium shadow-sm\n                              ${!isBreakTime ? 'bg-gradient-to-r from-green-600/90 to-emerald-500/90 hover:opacity-90' : ''}\n                              transition-all duration-300`,\n                onClick: () => {\n                  if (isBreakTime) {\n                    handleSkipBreak();\n                  } else {\n                    handleTaskDone();\n                  }\n                },\n                disabled: isBreakTime ? !isTimerActive : currentTaskIndex === -1 || !tasks[currentTaskIndex] || tasks[currentTaskIndex].completed,\n                children: isBreakTime ? \"Skip Break\" : \"Done!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1060,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1047,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"buttonGray\",\n                size: \"sm\",\n                className: \"min-w-[90px] sm:min-w-[100px] py-1.5 text-sm md:text-base font-medium shadow-sm hover:bg-amber-600/40 transition-colors duration-300\",\n                onClick: handleExtendTimer,\n                disabled: isBreakTime ? !allowExtendBreak : timeRemaining > 0 || currentTaskIndex === -1 || !tasks[currentTaskIndex] || !tasks[currentTaskIndex].started || tasks[currentTaskIndex].completed,\n                children: \"Extend\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1087,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1086,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1028,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1022,\n          columnNumber: 13\n        }, this), activeView === 'plan' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-3 gap-4 h-full\",\n          children: [/*#__PURE__*/_jsxDEV(Card, {\n            className: \"lg:col-span-1 bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 flex flex-col shadow-md hover:shadow-lg transition-all duration-500\",\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              className: \"py-3 border-b border-dark-300/25\",\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                className: \"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\",\n                children: \"Plan Your Day\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1115,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1114,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"flex-grow flex flex-col overflow-hidden p-3.5\",\n              children: [/*#__PURE__*/_jsxDEV(TaskForm, {\n                onAddTask: handleAddTask\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1118,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 pt-4 border-t border-dark-300/40 space-y-2.5 flex-grow overflow-y-auto\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-sm font-semibold text-cyanAccent mb-2\",\n                  children: \"Daily Stats\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1120,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-dark-300/25 rounded-md p-3 space-y-2.5 text-xs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-between items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-subtleText flex items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"inline-block w-1.5 h-1.5 rounded-full bg-cyanAccent mr-1.5\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1124,\n                        columnNumber: 27\n                      }, this), \"Total Tasks:\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1123,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-timerAccent font-semibold\",\n                      children: tasks.length\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1127,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1122,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-between items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-subtleText flex items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"inline-block w-1.5 h-1.5 rounded-full bg-purple-500 mr-1.5\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1131,\n                        columnNumber: 27\n                      }, this), \"Total Planned:\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1130,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-timerAccent font-semibold\",\n                      children: [dailyStats.totalPlannedTime, \" min\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1134,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1129,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-between items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-subtleText flex items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"inline-block w-1.5 h-1.5 rounded-full bg-green-500 mr-1.5\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1138,\n                        columnNumber: 27\n                      }, this), \"Remaining:\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1137,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-timerAccent font-semibold\",\n                      children: [dailyStats.estimatedRemainingTaskTimeMinutes, \" min\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1141,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1136,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-between items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-subtleText flex items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"inline-block w-1.5 h-1.5 rounded-full bg-amber-500 mr-1.5\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1145,\n                        columnNumber: 27\n                      }, this), \"P(Not Finishing):\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1144,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-timerAccent font-semibold\",\n                      children: [dailyStats.probNotFinishing, \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1148,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1143,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1121,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-4 pt-4 border-t border-dark-300/40 space-y-2.5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-sm font-semibold text-cyanAccent mb-2\",\n                    children: \"Custom Session End Time\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1154,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-dark-300/25 rounded-md p-3 space-y-2.5 text-xs\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(Clock, {\n                          className: \"h-3.5 w-3.5 mr-1 text-cyanAccent\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1158,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"font-medium text-xs md:text-sm\",\n                          children: \"Set End Time\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1159,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1157,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\",\n                        children: customFinishTime || 'Not Set'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1161,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1156,\n                      columnNumber: 26\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"time\",\n                        value: customFinishTime || '',\n                        onChange: e => setCustomFinishTime(e.target.value),\n                        className: \"w-full bg-dark-200/70 border border-dark-300/50 rounded p-1.5 text-xs md:text-sm focus:ring-cyanAccent focus:border-cyanAccent appearance-none\",\n                        style: {\n                          colorScheme: theme === 'dark' ? 'dark' : 'light'\n                        } // Ensures native time picker matches theme\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1166,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"destructive\",\n                        size: \"sm\",\n                        onClick: () => setCustomFinishTime(null),\n                        disabled: !customFinishTime,\n                        className: \"py-1 px-2 text-xs\",\n                        children: \"Clear\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1173,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1165,\n                      columnNumber: 26\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-[9px] md:text-[10px] text-subtleText/70 mt-1.5 pl-0.5\",\n                      children: \"Set a temporary end time for today's session. Overrides Daily Reset Time for P(Not Finish).\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1183,\n                      columnNumber: 26\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1155,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1153,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-4 pt-4 border-t border-dark-300/40\",\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"destructive\",\n                    size: \"sm\",\n                    onClick: handleClearAllTasks,\n                    disabled: tasks.length === 0,\n                    className: \"w-full py-2 text-xs\",\n                    children: \"Clear All Tasks\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1191,\n                    columnNumber: 24\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1190,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1119,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1117,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            className: \"lg:col-span-2 bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 flex flex-col shadow-md hover:shadow-lg transition-all duration-500\",\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              className: \"py-3 border-b border-dark-300/25\",\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                className: \"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\",\n                children: \"Today's Tasks\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1207,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1206,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"flex-grow overflow-hidden p-3.5\",\n              children: /*#__PURE__*/_jsxDEV(TaskList, {\n                tasks: tasks,\n                onRemoveTask: handleRemoveTask,\n                onStartTask: taskId => {\n                  const currentTasks = tasks;\n                  const taskIndex = currentTasks.findIndex(t => t.id === taskId);\n                  if (taskIndex !== -1) {\n                    if (taskIndex < 0 || taskIndex >= currentTasks.length || !currentTasks[taskIndex]) {\n                      console.error(\"[App onStartTask] taskIndex out of bounds for current tasks.\", {\n                        taskId,\n                        taskIndex,\n                        currentTasksLength: currentTasks.length\n                      });\n                      toast({\n                        title: \"Task Sync Issue\",\n                        description: \"State inconsistency before starting timer. Please try again.\",\n                        variant: \"destructive\"\n                      });\n                      return;\n                    }\n                    startTimer(taskIndex);\n                  } else {\n                    console.error(\"[App onStartTask] Task ID not found in current tasks:\", {\n                      taskId\n                    });\n                    toast({\n                      title: \"Task Not Found\",\n                      description: \"The selected task could not be found to start.\",\n                      variant: \"destructive\"\n                    });\n                  }\n                },\n                currentTaskIndex: currentTaskIndex,\n                activeTaskOriginalId: activeTaskOriginalId,\n                isTimerActive: isTimerActive,\n                isBreakTime: isBreakTime,\n                timeRemaining: timeRemaining\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1210,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1209,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1205,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1112,\n          columnNumber: 13\n        }, this), activeView === 'spirals' && /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"py-3 border-b border-dark-300/25\",\n            children: /*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\",\n              children: \"Spirals (Ideas for Later)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1252,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1251,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            className: \"flex-grow flex flex-col overflow-hidden p-3.5 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNTAgOTBjMjIuMDkxIDAgNDAtMTcuOTA5IDQwLTQwUzcyLjA5MSAxMCA1MCAxMCAxMCAyNy45MDkgMTAgNTBzMTcuOTA5IDQwIDQwIDQweiIgc3Ryb2tlPSIjMkQzNzQ4IiBmaWxsPSJub25lIiBvcGFjaXR5PSIuMDMiLz48L3N2Zz4=')] bg-[length:80px_80px]\",\n            children: [/*#__PURE__*/_jsxDEV(SpiralForm, {\n              onAddSpiral: handleAddSpiral\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1255,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 flex-grow overflow-y-auto\",\n              children: /*#__PURE__*/_jsxDEV(SpiralList, {\n                spirals: spirals,\n                onRemoveSpiral: handleRemoveSpiral,\n                onMoveSpiralToTasks: handleMoveSpiralToTasks\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1257,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1256,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1254,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1250,\n          columnNumber: 13\n        }, this), activeView === 'settings' && /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"py-3 border-b border-dark-300/25\",\n            children: /*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\",\n              children: \"Settings\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1270,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1269,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            className: \"p-3.5 overflow-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1274,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1272,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1268,\n          columnNumber: 13\n        }, this), activeView === 'dashboard' && /*#__PURE__*/_jsxDEV(DashboardView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1282,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1019,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 968,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Toaster, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1288,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PromptDialog, {\n      isOpen: isPromptOpen,\n      onOpenChange: setIsPromptOpen,\n      title: promptConfig.title,\n      message: promptConfig.message,\n      inputLabel: promptConfig.inputLabel,\n      defaultValue: promptConfig.defaultValue,\n      confirmText: promptConfig.confirmText,\n      cancelText: promptConfig.cancelText,\n      onConfirm: promptConfig.onConfirm,\n      placeholder: promptConfig.placeholder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1289,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 913,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"xFz1pQZ6HL1daCn1y6QYh7aggn8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","Button","Card","CardHeader","CardTitle","CardContent","TaskForm","TaskList","Toaster","toast","confetti","PromptDialog","SpiralForm","SpiralList","DashboardView","saveDailyStats","console","log","Award","CheckCircle","Timer","Settings","Coffee","AlertCircle","Moon","Sun","Volume2","VolumeX","BrainCircuit","AlertTriangle","Globe","Clock","BarChart","jsxDEV","_jsxDEV","quoteCategories","nagging","rude","annoying","abusive","POINTS_PER_TASK","MAX_TIME_SAVED_BONUS","POINTS_DEDUCTION_FOR_EXTENSION","formatTime","totalSeconds","minutes","Math","floor","seconds","String","padStart","formatDurationToHoursMinutes","totalSecondsInput","isNaN","hours","App","_s","motivationalQuote","setMotivationalQuote","tasks","setTasks","spirals","setSpirals","currentTaskIndex","setCurrentTaskIndex","timeRemaining","setTimeRemaining","isTimerActive","setIsTimerActive","isBreakTime","setIsBreakTime","timerIntervalId","score","setScore","notificationSound","quoteIntervalId","quoteType","setQuoteType","soundEnabled","setSoundEnabled","theme","setTheme","breakDuration","setBreakDuration","allowExtendBreak","setAllowExtendBreak","selectedTimezone","setSelectedTimezone","dailyResetTime","setDailyResetTime","lastResetTimestamp","setLastResetTimestamp","customFinishTime","setCustomFinishTime","isLoaded","setIsLoaded","activeView","setActiveView","sessionStartTime","setSessionStartTime","displayedIdleTime","setDisplayedIdleTime","isPromptOpen","setIsPromptOpen","promptConfig","setPromptConfig","title","message","inputLabel","defaultValue","confirmText","cancelText","onConfirm","placeholder","savedQuoteType","localStorage","getItem","savedSoundEnabled","savedTheme","savedBreakDuration","savedAllowExtendBreak","initialDailyResetTime","parseInt","now","Date","resetHour","resetMinute","split","map","Number","todayDateObj","todaysResetDateTime","getFullYear","getMonth","getDate","getTime","yesterdayDateObj","setDate","yesterdaysResetDateTime","savedLastResetTs","currentLastResetTs","performReset","previousDayStats","date","toISOString","focusTime","calculateFocusTime","idleTime","tasksCompleted","filter","t","completed","length","totalTasks","totalPlannedTime","reduce","total","task","estimatedDuration","sTasks","JSON","parse","e","error","sScore","sSessionStart","sCurrentTaskIndex","sTimeRemaining","sIsTimerActive","sIsBreakTime","savedSpirals","setItem","toString","removeItem","stringify","today","currentStats","document","body","classList","add","remove","current","Audio","src","process","env","PUBLIC_URL","Notification","permission","requestPermission","then","getRandomQuote","quotes","random","playNotificationSound","currentTime","play","catch","name","description","variant","showDesktopNotification","updateMotivationalQuote","startMotivationalQuoteInterval","setInterval","stopMotivationalQuoteInterval","clearInterval","handleAddTask","newTaskData","prevTasks","id","duration","started","timeSpentSeconds","timerStartTime","completionTimestamp","handleRemoveTask","taskId","_tasks$currentTaskInd","taskToRemove","find","startTimer","taskIndex","_tasks$currentTaskInd2","taskToStart","idx","timeToSet","handlePauseTimer","handleResumeTimer","handleTaskDone","pointsEarnedThisTask","timeWhenDoneSeconds","actualTimeSpentMinutes","round","estimatedSeconds","secondsSaved","max","bonusMinutes","prevScore","particleCount","spread","origin","y","finalTimeSpentSeconds","handleSkipBreak","handleExtendTimer","context","defaultExtension","currentTimerValue","extendMinutesText","extendMinutes","newTimeRemaining","toastDescription","prevTime","updateIdleTime","totalSessionTimeSeconds","totalFocusTimeSeconds","calculatedIdleTime","intervalId","_tasks$currentTaskInd3","timeElapsedSinceStart","timerDisplayColor","totalTaskSeconds","percentageRemaining","calculateDailyStats","totalPlannedDuration","acc","accumulatedFocusTimeSeconds","remainingUncompletedTaskMinutes","ceil","timeLeftTodayMinutes","endOfTodayTargetTime","finishHour","finishMinute","customEndTime","setHours","todayReset","tomorrowReset","localMsLeft","probNotFinishingPercentage","P_base_workload","min","inefficiency_penalty_multiplier","efficiency_metric","raw_probability","estimatedRemainingTaskTimeMinutes","probNotFinishing","dailyStats","activeTaskObject","currentDisplayTaskName","activeTaskOriginalId","handleClearAllTasks","handleAddSpiral","spiralName","trim","prev","handleRemoveSpiral","spiralId","spiralToRemove","s","handleMoveSpiralToTasks","spiralToMove","durationText","handleMasterPlayPause","firstUncompletedTaskIndex","findIndex","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","disabled","onAddTask","type","value","onChange","target","style","colorScheme","onRemoveTask","onStartTask","currentTasks","currentTasksLength","onAddSpiral","onRemoveSpiral","onMoveSpiralToTasks","isOpen","onOpenChange","_c","$RefreshReg$"],"sources":["/home/poodle/Work/TimeBoxing/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Button } from './components/ui/Button';\nimport { Card, CardHeader, CardTitle, CardContent } from './components/ui/Card';\nimport TaskForm from './components/TaskForm';\nimport TaskList from './components/TaskList';\nimport { Toaster } from './components/Toaster';\nimport { toast } from './hooks/use-toast';\nimport confetti from 'canvas-confetti';\nimport { PromptDialog } from './components/ui/PromptDialog';\nimport SpiralForm from './components/SpiralForm';\nimport SpiralList from './components/SpiralList';\nimport DashboardView from './components/DashboardView';\nimport { saveDailyStats } from './lib/statsHistory';\nconsole.log(\"[DEBUG] saveDailyStats imported:\", saveDailyStats);\nimport { Award, CheckCircle, Timer, Settings, Coffee, AlertCircle, Moon, Sun, Volume2, VolumeX, BrainCircuit, AlertTriangle, Globe, Clock, BarChart } from 'lucide-react';\n// Spirals components will be added later\n\n// Different quote categories\nconst quoteCategories = {\n  nagging: [\n    \"You won't be able to do it... Prove me wrong!\",\n    \"Don't disappoint future you.\",\n  \"Less scrolling, more doing!\",\n    \"That task isn't going to complete itself.\",\n  \"Are you a talker or a doer?\",\n  \"Time is ticking. Are you?\",\n  \"Stop procrastinating. Start dominating.\",\n  \"Is this the best use of your time right now?\",\n    \"The clock is your boss. Don't get fired.\"\n  ],\n  rude: [\n    \"Are you actually going to finish this time?\",\n    \"Your procrastination is impressive, really.\",\n    \"Oh look, another task you'll abandon.\",\n    \"Half-finished tasks won't impress anyone.\",\n    \"You call that productivity? I've seen snails move faster.\",\n    \"Your to-do list is laughing at you right now.\",\n    \"Great, another project for your 'abandoned' collection.\",\n    \"Are you even trying at this point?\",\n    \"Your focus is as stable as a house of cards.\"\n  ],\n  annoying: [\n    \"Tick tock! Time is passing! Tick tock!\",\n    \"Hey! Hey! Hey! You should be working!\",\n    \"Don't stop! Keep going! Don't stop! Keep going!\",\n    \"Are you distracted yet? How about now? Now?\",\n    \"This won't complete itself! This won't complete itself!\",\n    \"Focus! Focus! Focus! Are you focused yet?\",\n    \"Hey, remember that deadline? It's coming! Coming! Coming!\",\n    \"Still working? Still working? Still working?\",\n    \"Did you finish yet? No? How about now? Now? Now?\"\n  ],\n  abusive: [\n    \"Your productivity is an absolute joke.\",\n    \"Even a child could finish this faster than you.\",\n    \"Pathetic effort as usual.\",\n    \"You'll never amount to anything at this rate.\",\n    \"Everyone else finished hours ago. What's your excuse?\",\n    \"Failure is your only consistent achievement.\",\n    \"No wonder nobody takes your work seriously.\",\n    \"This is why you're always behind everyone else.\",\n    \"Your lack of discipline is embarrassing.\"\n  ]\n};\n\nconst POINTS_PER_TASK = 10;\nconst MAX_TIME_SAVED_BONUS = 10; // Max bonus points for saving time, scaled by percentage\nconst POINTS_DEDUCTION_FOR_EXTENSION = 2; // Penalty for extending a task\n\n// Moved helper functions before their usage in useCallback hooks\nconst formatTime = (totalSeconds) => {\n  const minutes = Math.floor(totalSeconds / 60);\n  const seconds = totalSeconds % 60;\n  return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n};\n\nconst formatDurationToHoursMinutes = (totalSecondsInput) => {\n  const totalSeconds = Math.floor(totalSecondsInput);\n  if (isNaN(totalSeconds) || totalSeconds < 0) return \"0 min\";\n  const hours = Math.floor(totalSeconds / 3600);\n  const minutes = Math.floor((totalSeconds % 3600) / 60);\n  if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} ${minutes} min`;\n  if (minutes > 0) return `${minutes} min`;\n  return \"0 min\";\n};\n\nfunction App() {\n  const [motivationalQuote, setMotivationalQuote] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n  const [spirals, setSpirals] = useState([]); // For spirals feature\n  \n  const [currentTaskIndex, setCurrentTaskIndex] = useState(-1); // Index of the active task in the tasks array\n  const [timeRemaining, setTimeRemaining] = useState(0); // In seconds\n  const [isTimerActive, setIsTimerActive] = useState(false); // Is the countdown interval running?\n  const [isBreakTime, setIsBreakTime] = useState(false);\n  const timerIntervalId = useRef(null); // Using useRef to hold interval ID to avoid re-renders causing issues\n  \n  const [score, setScore] = useState(0);\n  const notificationSound = useRef(null);\n  const quoteIntervalId = useRef(null);\n\n  // Settings state\n  const [quoteType, setQuoteType] = useState(\"abusive\"); // Default quote type\n  const [soundEnabled, setSoundEnabled] = useState(true); // Default sound setting\n  const [theme, setTheme] = useState(\"dark\"); // Default theme setting\n  const [breakDuration, setBreakDuration] = useState(5); // Default break duration in minutes\n  const [allowExtendBreak, setAllowExtendBreak] = useState(true); // Default setting for extending breaks\n  const [selectedTimezone, setSelectedTimezone] = useState('Asia/Kolkata'); // Default timezone\n  const [dailyResetTime, setDailyResetTime] = useState(\"00:00\"); // Default daily reset time\n  const [lastResetTimestamp, setLastResetTimestamp] = useState(null); // When the last daily reset occurred (timestamp)\n  const [customFinishTime, setCustomFinishTime] = useState(null); // Custom finish time for today\n  const [isLoaded, setIsLoaded] = useState(false); // To prevent saves before loads complete\n  const [activeView, setActiveView] = useState('focus'); // 'focus', 'plan', 'spirals', 'settings', 'dashboard'\n  const [sessionStartTime, setSessionStartTime] = useState(null); // Timestamp when the first task of the session started\n  const [displayedIdleTime, setDisplayedIdleTime] = useState(0); // Idle time in seconds\n  \n  // State for PromptDialog\n  const [isPromptOpen, setIsPromptOpen] = useState(false);\n  const [promptConfig, setPromptConfig] = useState({\n    title: '',\n    message: '',\n    inputLabel: '',\n    defaultValue: '',\n    confirmText: 'Confirm',\n    cancelText: 'Cancel',\n    onConfirm: () => {},\n    placeholder: '',\n  });\n\n  // Load settings from localStorage on initial render\n  useEffect(() => {\n    const savedQuoteType = localStorage.getItem('quoteType');\n    const savedSoundEnabled = localStorage.getItem('soundEnabled');\n    const savedTheme = localStorage.getItem('theme');\n    const savedBreakDuration = localStorage.getItem('breakDuration');\n    const savedAllowExtendBreak = localStorage.getItem('allowExtendBreak');\n    const initialDailyResetTime = localStorage.getItem('dailyResetTime') || \"00:00\"; // Get saved or default\n    setDailyResetTime(initialDailyResetTime);\n    \n    // Load other settings\n    if (savedQuoteType) setQuoteType(savedQuoteType);\n    if (savedSoundEnabled !== null) setSoundEnabled(savedSoundEnabled === 'true');\n    if (savedTheme) setTheme(savedTheme);\n    if (savedBreakDuration) setBreakDuration(parseInt(savedBreakDuration, 10));\n    if (savedAllowExtendBreak !== null) setAllowExtendBreak(savedAllowExtendBreak === 'true');\n\n    // --- Daily Reset Logic ---\n    const now = Date.now();\n    const [resetHour, resetMinute] = initialDailyResetTime.split(':').map(Number);\n    \n    const todayDateObj = new Date(now);\n    const todaysResetDateTime = new Date(todayDateObj.getFullYear(), todayDateObj.getMonth(), todayDateObj.getDate(), resetHour, resetMinute, 0, 0).getTime();\n    \n    const yesterdayDateObj = new Date(now);\n    yesterdayDateObj.setDate(yesterdayDateObj.getDate() - 1);\n    const yesterdaysResetDateTime = new Date(yesterdayDateObj.getFullYear(), yesterdayDateObj.getMonth(), yesterdayDateObj.getDate(), resetHour, resetMinute, 0, 0).getTime();\n\n    const savedLastResetTs = localStorage.getItem('lastResetTimestamp');\n    let currentLastResetTs = savedLastResetTs ? parseInt(savedLastResetTs, 10) : null;\n    let performReset = false;\n\n    if (currentLastResetTs === null) {\n      // First run or cleared storage. Establish baseline. States are already at defaults from useState.\n      currentLastResetTs = (now >= todaysResetDateTime) ? todaysResetDateTime : yesterdaysResetDateTime;\n      // No data state reset calls (like setTasks([])) needed here, useState did that.\n      // localStorage for these items will be updated by the save hook if they are new.\n    } else {\n      if (now >= todaysResetDateTime && currentLastResetTs < todaysResetDateTime) {\n        performReset = true;\n        currentLastResetTs = todaysResetDateTime; // Update to today's reset time\n      }\n    }\n    setLastResetTimestamp(currentLastResetTs); // Set state for lastResetTimestamp\n\n    // --- Load or Reset Data States ---\n    if (performReset) {\n      // Save the previous day's stats before resetting\n      const previousDayStats = {\n        date: new Date(currentLastResetTs - 86400000).toISOString().split('T')[0], // Yesterday's date\n        focusTime: calculateFocusTime(),\n        idleTime: displayedIdleTime,\n        tasksCompleted: tasks.filter(t => t.completed).length,\n        score: score,\n        totalTasks: tasks.length,\n        totalPlannedTime: tasks.reduce((total, task) => total + task.estimatedDuration, 0)\n      };\n      \n      // Save stats to history\n      saveDailyStats(previousDayStats);\n      \n      // Now reset current day's data\n      setTasks([]);\n      setScore(0);\n      setSessionStartTime(null);\n      setCurrentTaskIndex(-1);\n      setTimeRemaining(0);\n      setIsTimerActive(false);\n      setIsBreakTime(false);\n      setDisplayedIdleTime(0);\n      // Spirals are NOT reset. Settings are NOT reset.\n      // The save useEffect will persist these new default values because isLoaded is still false.\n    } else {\n      // No reset due. Load data if it wasn't the very first run (i.e., savedLastResetTs was not null).\n      // If savedLastResetTs was null, it means it's effectively a first run for data, and useState defaults are appropriate.\n      if (savedLastResetTs) { \n        const sTasks = localStorage.getItem('tasks');\n        if (sTasks) { try { setTasks(JSON.parse(sTasks)); } catch (e) { console.error(\"Error parsing tasks from localStorage\", e); setTasks([]); } } else { setTasks([]); }\n        \n        const sScore = localStorage.getItem('score');\n        setScore(sScore ? (parseInt(sScore, 10) || 0) : 0);\n\n        const sSessionStart = localStorage.getItem('sessionStartTime');\n        setSessionStartTime(sSessionStart ? (parseInt(sSessionStart, 10) || null) : null);\n        \n        const sCurrentTaskIndex = localStorage.getItem('currentTaskIndex');\n        setCurrentTaskIndex(sCurrentTaskIndex ? (parseInt(sCurrentTaskIndex, 10) || -1) : -1);\n\n        const sTimeRemaining = localStorage.getItem('timeRemaining');\n        setTimeRemaining(sTimeRemaining ? (parseInt(sTimeRemaining, 10) || 0) : 0);\n\n        const sIsTimerActive = localStorage.getItem('isTimerActive');\n        setIsTimerActive(sIsTimerActive === 'true');\n\n        const sIsBreakTime = localStorage.getItem('isBreakTime');\n        setIsBreakTime(sIsBreakTime === 'true');\n      }\n    }\n\n    // Spirals are always loaded as they don't reset (or set to empty if not found)\n    const savedSpirals = localStorage.getItem('spirals');\n    if (savedSpirals) { try { setSpirals(JSON.parse(savedSpirals)); } catch (e) { console.error(\"Error parsing spirals from localStorage\", e); setSpirals([]); } } else { setSpirals([]); }\n    \n    setIsLoaded(true); \n  }, []);\n\n  // Save settings and data to localStorage whenever they change\n  useEffect(() => {\n    if (!isLoaded) return; \n\n    localStorage.setItem('quoteType', quoteType);\n    localStorage.setItem('soundEnabled', soundEnabled.toString());\n    localStorage.setItem('theme', theme);\n    localStorage.setItem('breakDuration', breakDuration.toString());\n    localStorage.setItem('allowExtendBreak', allowExtendBreak.toString());\n    localStorage.setItem('dailyResetTime', dailyResetTime); // Save new setting\n\n    if (lastResetTimestamp !== null) { // Save new setting state\n      localStorage.setItem('lastResetTimestamp', lastResetTimestamp.toString());\n    } else {\n      localStorage.removeItem('lastResetTimestamp');\n    }\n\n    try { localStorage.setItem('tasks', JSON.stringify(tasks)); } catch (e) { console.error(\"Error stringifying tasks for localStorage\", e); }\n    try { localStorage.setItem('spirals', JSON.stringify(spirals)); } catch (e) { console.error(\"Error stringifying spirals for localStorage\", e); }\n    localStorage.setItem('score', score.toString());\n    if (sessionStartTime !== null) localStorage.setItem('sessionStartTime', sessionStartTime.toString()); else localStorage.removeItem('sessionStartTime');\n    localStorage.setItem('currentTaskIndex', currentTaskIndex.toString());\n    localStorage.setItem('timeRemaining', timeRemaining.toString());\n    localStorage.setItem('isTimerActive', isTimerActive.toString());\n    localStorage.setItem('isBreakTime', isBreakTime.toString());\n    \n    // Save current day's stats to history for real-time dashboard updates\n    // Only save if we have tasks and a session has started\n    if (tasks.length > 0 && sessionStartTime !== null) {\n      const today = new Date().toISOString().split('T')[0];\n      const currentStats = {\n        date: today,\n        focusTime: calculateFocusTime(),\n        idleTime: displayedIdleTime,\n        tasksCompleted: tasks.filter(t => t.completed).length,\n        score: score,\n        totalTasks: tasks.length,\n        totalPlannedTime: tasks.reduce((total, task) => total + task.estimatedDuration, 0)\n      };\n      saveDailyStats(currentStats);\n    }\n  }, [\n    quoteType, soundEnabled, theme, breakDuration, allowExtendBreak, dailyResetTime, // Added dailyResetTime\n    tasks, spirals, score, sessionStartTime, currentTaskIndex, timeRemaining, isTimerActive, isBreakTime, \n    isLoaded, lastResetTimestamp, displayedIdleTime // customFinishTime is NOT persisted, so not added here\n  ]);\n\n  // Apply theme class to body when it changes\n  useEffect(() => {\n    if (theme === 'light') {\n      document.body.classList.add('light-theme');\n    } else {\n      document.body.classList.remove('light-theme');\n    }\n  }, [theme]);\n\n  // Initialize motivational quote, sound, and notification permissions\n  useEffect(() => {\n    // Sound initialization (runs once)\n    notificationSound.current = new Audio();\n    notificationSound.current.src = `${process.env.PUBLIC_URL}/assets/notification.mp3`;\n\n    // Notification permission request (runs once)\n    if (Notification.permission !== \"granted\" && Notification.permission !== \"denied\") {\n      Notification.requestPermission().then(permission => {\n        if (permission === \"granted\") console.error(\"Desktop notification permission granted.\");\n      });\n    }\n  }, []); // Empty dependency array: runs only on mount and unmount\n\n  // Motivational quote initialization and updates (runs when quoteType changes)\n  useEffect(() => {\n    const getRandomQuote = () => {\n      const quotes = quoteCategories[quoteType];\n      return quotes[Math.floor(Math.random() * quotes.length)];\n    };\n    setMotivationalQuote(getRandomQuote());\n  }, [quoteType]);\n\n  const playNotificationSound = useCallback(() => {\n    if (soundEnabled && notificationSound.current) {\n      // Ensure src is set (it should be from the initial useEffect, but as a fallback)\n      if (!notificationSound.current.src) {\n        notificationSound.current.src = `${process.env.PUBLIC_URL}/assets/notification.mp3`;\n      }\n      notificationSound.current.currentTime = 0; // Reset sound to start\n      notificationSound.current.play()\n        .then(() => {\n          // console.error(\"Notification sound played successfully.\"); // Optional: for debugging\n        })\n        .catch(error => {\n          console.error(\"Error playing sound:\", error);\n          if (error.name === 'NotSupportedError') {\n            console.error(`NotSupportedError: Please ensure the audio file at \"${notificationSound.current.src}\" exists in the public/assets/ folder, is a valid audio format (e.g., MP3), and that the browser can access it.`);\n            toast({\n              title: \"Sound Playback Error\",\n              description: \"Could not play notification sound. Check file path and format.\",\n              variant: \"destructive\"\n            });\n          } else {\n            toast({\n              title: \"Sound Error\",\n              description: \"An issue occurred while trying to play the sound.\",\n              variant: \"destructive\"\n            });\n          }\n        });\n    }\n  }, [soundEnabled]); // Removed process.env.PUBLIC_URL from deps as it's constant\n\n  const showDesktopNotification = useCallback((title, body) => {\n    if (Notification.permission === \"granted\") new Notification(title, { body });\n  }, []);\n\n  // Motivational quote logic\n  const updateMotivationalQuote = useCallback(() => {\n    const getRandomQuote = () => {\n      const quotes = quoteCategories[quoteType];\n      return quotes[Math.floor(Math.random() * quotes.length)];\n    };\n    setMotivationalQuote(getRandomQuote());\n  }, [quoteType]);\n\n  const startMotivationalQuoteInterval = useCallback(() => {\n    if (!isTimerActive && !quoteIntervalId.current) {\n      updateMotivationalQuote();\n      quoteIntervalId.current = setInterval(updateMotivationalQuote, 30000);\n    }\n  }, [isTimerActive, updateMotivationalQuote]);\n\n  const stopMotivationalQuoteInterval = useCallback(() => {\n    if (quoteIntervalId.current) {\n      clearInterval(quoteIntervalId.current);\n      quoteIntervalId.current = null;\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isTimerActive) {\n      stopMotivationalQuoteInterval();\n    } else {\n      startMotivationalQuoteInterval();\n    }\n    return () => stopMotivationalQuoteInterval(); // Cleanup on unmount\n  }, [isTimerActive, startMotivationalQuoteInterval, stopMotivationalQuoteInterval]);\n\n\n  // Task Management\n  const handleAddTask = useCallback((newTaskData) => {\n    setTasks(prevTasks => [\n      ...prevTasks,\n      {\n        id: Date.now(),\n        name: newTaskData.name,\n        duration: newTaskData.duration, // user input in minutes\n        estimatedDuration: newTaskData.duration,\n        completed: false,\n        started: false,\n        timeSpentSeconds: 0,\n        timerStartTime: null,\n        completionTimestamp: null,\n      }\n    ]);\n    toast({ title: \"Task Added\", description: `\"${newTaskData.name}\" added to your list.` });\n  }, []);\n\n  const handleRemoveTask = useCallback((taskId) => {\n    const taskToRemove = tasks.find(t => t.id === taskId);\n    setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId));\n    if (taskToRemove) {\n      toast({ title: \"Task Removed\", description: `\"${taskToRemove.name}\" has been removed.`, variant: \"destructive\" });\n    }\n    if (currentTaskIndex !== -1 && tasks[currentTaskIndex]?.id === taskId) {\n      if (timerIntervalId.current) clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n      setCurrentTaskIndex(-1);\n      setTimeRemaining(0);\n      setIsTimerActive(false);\n      setIsBreakTime(false);\n    }\n  }, [tasks, currentTaskIndex]);\n\n  // Timer Core Logic: Start, Pause, Resume, Done, Extend\n  const startTimer = useCallback((taskIndex) => {\n    // Guard 1: Basic validity and completion check\n    if (taskIndex < 0 || taskIndex >= tasks.length || !tasks[taskIndex]) {\n      toast({ title: \"Invalid Task\", description: \"Task not found or index is out of bounds.\", variant: \"destructive\" });\n      return;\n    }\n    if (tasks[taskIndex].completed) {\n      toast({ title: \"Task Completed\", description: `\"${tasks[taskIndex].name}\" is already completed.`, variant: \"default\" });\n      return;\n    }\n\n    // Guard 2: Check if another task is active or this specific one\n    if (isTimerActive && !isBreakTime && currentTaskIndex === taskIndex) {\n      toast({ title: \"Already Active\", description: `\"${tasks[taskIndex].name}\" is already running.`, variant: \"default\" });\n      return;\n    }\n    if (isTimerActive && !isBreakTime && currentTaskIndex !== -1 && currentTaskIndex !== taskIndex) { \n      toast({ title: \"Timer Busy\", description: `\"${tasks[currentTaskIndex]?.name || 'Another task'}\" is in progress. Complete or stop it first.`, variant: \"destructive\" });\n      return;\n    }\n    \n    // Guard 3: Handle active break\n    if (isBreakTime) { \n      if (timerIntervalId.current) clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n      setIsBreakTime(false); // Stop the break\n      toast({ title: \"Break Interrupted\", description: \"Starting a new task.\" });\n    }\n\n    // Set session start time if this is the very first task being started\n    if (!sessionStartTime) {\n      setSessionStartTime(Date.now());\n    }\n\n    const taskToStart = tasks[taskIndex];\n\n    // This extra check is for absolute safety, though guards above should cover it.\n    if (!taskToStart || typeof taskToStart.duration === 'undefined') {\n        console.error(\"Critical error: taskToStart is invalid despite guards. taskIndex:\", taskIndex, \"task:\", taskToStart);\n        toast({ title: \"Task Data Error\", description: \"Cannot start task due to incomplete data. Please check console.\", variant: \"destructive\" });\n        return;\n    }\n    \n    setTasks(prevTasks =>\n      prevTasks.map((task, idx) =>\n        idx === taskIndex ? { ...task, started: true, timerStartTime: Date.now(), timeSpentSeconds: task.timeSpentSeconds || 0 } : task\n      )\n    );\n    setCurrentTaskIndex(taskIndex);\n    // If task was partially worked on, resume from remaining, else from full duration\n    const timeToSet = (taskToStart.duration * 60) - (taskToStart.timeSpentSeconds || 0);\n    setTimeRemaining(timeToSet > 0 ? timeToSet : taskToStart.duration * 60); // Ensure it doesn't start negative\n    setIsTimerActive(true);\n    setIsBreakTime(false); // Ensure break mode is off\n    toast({ title: \"Task Started\", description: `Timer for \"${taskToStart.name}\" has begun.` });\n  }, [tasks, isTimerActive, isBreakTime, currentTaskIndex, sessionStartTime, setSessionStartTime, setTasks, setCurrentTaskIndex, setTimeRemaining, setIsTimerActive, setIsBreakTime]);\n\n  const handlePauseTimer = useCallback(() => {\n    if (timerIntervalId.current) { \n      clearInterval(timerIntervalId.current);\n      timerIntervalId.current = null;\n      setIsTimerActive(false); \n      toast({ title: isBreakTime ? \"Break Paused\" : \"Timer Paused\" });\n    }\n  }, [isBreakTime, setIsTimerActive]); \n\n  const handleResumeTimer = useCallback(() => {\n    if (!isTimerActive && timeRemaining > 0 && \n        ((currentTaskIndex !== -1 && tasks[currentTaskIndex] && !tasks[currentTaskIndex].completed && !isBreakTime) || isBreakTime)) {\n       setIsTimerActive(true); \n       toast({ title: isBreakTime ? \"Break Resumed\" : \"Timer Resumed\" });\n    }\n  }, [isTimerActive, timeRemaining, currentTaskIndex, tasks, isBreakTime, setIsTimerActive]); \n\n  const handleTaskDone = useCallback(() => {\n    if (currentTaskIndex === -1 || !tasks[currentTaskIndex] || tasks[currentTaskIndex].completed) {\n      toast({title: \"No Active Task\", description: \"No task to mark as done.\", variant: \"default\"});\n      return;\n    }\n\n    const task = tasks[currentTaskIndex];\n    let pointsEarnedThisTask = 0;\n    \n    const timeWhenDoneSeconds = task.timerStartTime ? (Date.now() - task.timerStartTime) / 1000 : task.timeSpentSeconds;\n    const actualTimeSpentMinutes = Math.round(timeWhenDoneSeconds / 60); // Round to nearest minute for scoring\n\n    // Base score: 1 point per minute of focus time\n    pointsEarnedThisTask += actualTimeSpentMinutes;\n\n    // Bonus for finishing early: 1 point per minute saved\n    const estimatedSeconds = task.estimatedDuration * 60;\n    const secondsSaved = Math.max(0, estimatedSeconds - timeWhenDoneSeconds);\n    const bonusMinutes = Math.round(secondsSaved / 60); // Round saved seconds to nearest minute\n    pointsEarnedThisTask += bonusMinutes;\n    \n    // Ensure score is not negative (shouldn't happen with this logic, but as a safeguard)\n    pointsEarnedThisTask = Math.max(0, pointsEarnedThisTask);\n\n    setScore(prevScore => prevScore + pointsEarnedThisTask);\n    confetti({ particleCount: 150, spread: 100, origin: { y: 0.6 } });\n\n    // Use actualTimeSpent (which could be > estimated if they let timer run out and clicked done)\n    // for the task's final timeSpentSeconds for record keeping.\n    const finalTimeSpentSeconds = timeWhenDoneSeconds;\n\n    setTasks(prevTasks => prevTasks.map((t, idx) =>\n      idx === currentTaskIndex ? { \n        ...t, \n        completed: true, \n        timeSpentSeconds: finalTimeSpentSeconds, \n        duration: finalTimeSpentSeconds / 60, // Update duration to reflect actual time spent\n        completionTimestamp: Date.now() \n      } : t\n    ));\n\n    if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null;\n    }\n    setIsTimerActive(false); \n    \n    playNotificationSound();\n    showDesktopNotification(\"Task Finished!\", `\"${task.name}\" is complete.`);\n    toast({ title: \"Task Finished!\", description: `\"${task.name}\" complete. Points: +${pointsEarnedThisTask}` });\n    \n    setIsBreakTime(true);\n    setTimeRemaining(breakDuration * 60);\n    setCurrentTaskIndex(-1); \n    setIsTimerActive(true); \n    toast({title: \"Break Time!\", description: `Taking a ${breakDuration} minute break.`});\n\n  }, [tasks, currentTaskIndex, playNotificationSound, showDesktopNotification, breakDuration, setScore, setTasks, setIsBreakTime, setTimeRemaining, setCurrentTaskIndex, setIsTimerActive]);\n\n  const handleSkipBreak = useCallback(() => {\n    if (isBreakTime && isTimerActive) {\n      if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null;\n      }\n      setIsTimerActive(false);\n      setIsBreakTime(false);\n      setTimeRemaining(0);\n      setCurrentTaskIndex(-1); \n      toast({title: \"Break Skipped\", description: \"Break ended. Ready for the next task?\"});\n    } else {\n      toast({title: \"No Active Break\", description: \"There is no active break to skip.\", variant: \"default\"});\n    }\n  }, [isBreakTime, isTimerActive, setIsTimerActive, setIsBreakTime, setTimeRemaining, setCurrentTaskIndex]);\n\n  const handleExtendTimer = useCallback(() => {\n    // If no task active AND not break time, nothing to extend\n    if (currentTaskIndex === -1 && !isBreakTime) {\n      toast({title: \"No Timer Active\", description: \"Start a task or break to extend its time.\", variant: \"default\"});\n      return;\n    }\n\n    // If it's a task, check if it's completed \n    // (This check is also in the button's disabled logic, but good for safety)\n    if (!isBreakTime && tasks[currentTaskIndex] && tasks[currentTaskIndex].completed) {\n        toast({title: \"Task Completed\", description: `Task \"${tasks[currentTaskIndex].name}\" is already completed and cannot be extended.`, variant: \"default\"});\n        return;\n    }\n\n    // If it's a break, check if extending breaks is allowed\n    if (isBreakTime && !allowExtendBreak) {\n      toast({title: \"Extend Break Disabled\", description: \"Extending break time is currently disabled in settings.\", variant: \"default\"});\n      return;\n    }\n\n    // For tasks, time must be 0. For breaks, this check is skipped if allowExtendBreak is true.\n    if (!isBreakTime && timeRemaining > 0) {\n        toast({title: \"Timer Still Running\", description: \"Task time can only be extended when the timer reaches 0.\", variant: \"default\"});\n        return;\n    }\n    \n    const context = isBreakTime ? \"break\" : (tasks[currentTaskIndex] ? `task \"${tasks[currentTaskIndex].name}\"` : \"task\");\n    const defaultExtension = \"5\";\n    const currentTimerValue = formatTime(timeRemaining);\n\n    setPromptConfig({\n      title: `Extend ${context}`,\n      message: isBreakTime && timeRemaining > 0 ? \n                 `Current break time is ${currentTimerValue}. How many additional minutes would you like to add?` :\n                 `How many minutes would you like to add to the ${context}? ${!isBreakTime && tasks[currentTaskIndex] ? 'Timer is currently at 00:00.' : ''}`,\n      inputLabel: 'Minutes to add:',\n      defaultValue: defaultExtension,\n      confirmText: 'Extend',\n      cancelText: 'Cancel',\n      placeholder: 'Enter minutes',\n      onConfirm: (extendMinutesText) => {\n        const extendMinutes = parseInt(extendMinutesText, 10);\n\n        if (!isNaN(extendMinutes) && extendMinutes > 0) {\n          const newTimeRemaining = timeRemaining + extendMinutes * 60;\n          setTimeRemaining(newTimeRemaining);\n          \n          let toastDescription = `Added ${extendMinutes} minutes to ${context}.`;\n\n          if (!isBreakTime && currentTaskIndex !== -1 && tasks[currentTaskIndex]) {\n            setTasks(prevTasks => prevTasks.map((t, idx) =>\n              idx === currentTaskIndex ? { ...t, duration: t.duration + extendMinutes, estimatedDuration: t.estimatedDuration + extendMinutes } : t\n            ));\n            setScore(prevScore => prevScore - POINTS_DEDUCTION_FOR_EXTENSION);\n            toastDescription += ` Points: -${POINTS_DEDUCTION_FOR_EXTENSION}`;\n          }\n          \n          if (!isTimerActive && newTimeRemaining > 0) {\n            setIsTimerActive(true);\n          }\n          toast({ title: \"Timer Extended\", description: toastDescription });\n        } else {\n          toast({ title: \"Invalid Input\", description: \"Please enter a valid number of minutes.\", variant: \"destructive\" });\n        }\n      }\n    });\n    setIsPromptOpen(true);\n  }, [currentTaskIndex, isBreakTime, isTimerActive, timeRemaining, tasks, allowExtendBreak, setIsPromptOpen, setPromptConfig, setTasks, setScore, setTimeRemaining, setIsTimerActive]);\n\n  // Effect for Timer Countdown\n  useEffect(() => {\n    if (isTimerActive && timeRemaining > 0) {\n      // If timer should be active and there's time, start the interval\n      timerIntervalId.current = setInterval(() => {\n        setTimeRemaining(prevTime => {\n          if (prevTime <= 1) { \n            // Stop the interval first\n            if(timerIntervalId.current) clearInterval(timerIntervalId.current);\n            timerIntervalId.current = null;\n            setIsTimerActive(false); // Timer is no longer active\n            \n            if (isBreakTime) {\n              playNotificationSound();\n              showDesktopNotification(\"Break Over!\", \"Your break time is up.\");\n              toast({ title: \"Break Finished!\", description: \"Ready for the next task?\" });\n              setIsBreakTime(false); // Break is over\n              setCurrentTaskIndex(-1); // No active task\n            } else if (currentTaskIndex !== -1 && tasks[currentTaskIndex]) {\n              const task = tasks[currentTaskIndex];\n              // Increment timeSpentSeconds one last time for the final second\n              setTasks(prevTasks => prevTasks.map((t, idx) => \n                idx === currentTaskIndex ? {...t, timeSpentSeconds: (t.timeSpentSeconds || 0) + 1} : t\n              ));\n              playNotificationSound();\n              showDesktopNotification(\"Time's Up!\", `Time for \"${task.name}\" is up.`);\n              toast({ title: \"Time's Up!\", description: `\"${task.name}\" timer finished. Mark done or extend.` });\n              // User needs to manually mark done or extend. isTimerActive is false.\n            }\n            return 0; // Time is up\n          }\n\n          // Increment timeSpentSeconds for active task during normal countdown\n          if (currentTaskIndex !== -1 && !isBreakTime && tasks[currentTaskIndex]) {\n            setTasks(prevTasks => prevTasks.map((task, idx) => \n                idx === currentTaskIndex ? {...task, timeSpentSeconds: (task.timeSpentSeconds || 0) + 1} : task\n            ));\n          }\n          return prevTime - 1; // Countdown\n        });\n      }, 1000);\n    } else {\n      // If timer shouldn't be active or time is up, ensure interval is cleared\n      if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null;\n      }\n    }\n    // Cleanup function: always clear interval when dependencies change or component unmounts\n    return () => {\n      if (timerIntervalId.current) {\n        clearInterval(timerIntervalId.current);\n        timerIntervalId.current = null; \n      }\n    };\n  }, [isTimerActive, timeRemaining, tasks, currentTaskIndex, isBreakTime, playNotificationSound, showDesktopNotification, setTasks]); // Added setTasks\n\n  // Effect for Idle Time Calculation\n  useEffect(() => {\n    if (!isTimerActive && sessionStartTime !== null) {\n      const updateIdleTime = () => {\n        // Calculate time elapsed since the session started in seconds\n        const now = Date.now();\n        const totalSessionTimeSeconds = Math.floor((now - sessionStartTime) / 1000);\n        \n        // Calculate total focus time (sum of time spent on completed tasks)\n        const totalFocusTimeSeconds = calculateFocusTime();\n        \n        // Idle time = total session time - total focus time\n        const calculatedIdleTime = Math.max(0, totalSessionTimeSeconds - totalFocusTimeSeconds);\n        \n        setDisplayedIdleTime(calculatedIdleTime);\n      };\n      \n      // Update immediately and then every minute\n      updateIdleTime();\n      const intervalId = setInterval(updateIdleTime, 60000); // 60 seconds\n\n      return () => clearInterval(intervalId);\n    }\n  }, [isTimerActive, sessionStartTime]);\n  \n  // Calculate total focus time from completed tasks\n  const calculateFocusTime = () => {\n    return tasks.reduce((total, task) => {\n      if (task.completed) {\n        // For completed tasks, use the actual time spent\n        return total + (task.timeSpentSeconds || 0);\n      } else if (task.started && currentTaskIndex !== -1 && tasks[currentTaskIndex]?.id === task.id && isTimerActive) {\n        // For the current active task, add the time spent so far plus the time since the timer started\n        const now = Date.now();\n        const timeElapsedSinceStart = Math.floor((now - tasks[currentTaskIndex].timerStartTime) / 1000);\n        return total + (task.timeSpentSeconds || 0) + timeElapsedSinceStart;\n      }\n      return total + (task.timeSpentSeconds || 0);\n    }, 0);\n  };\n\n  // Formatting and Display Logic\n  const timerDisplayColor = () => {\n    if (isBreakTime) return 'text-emerald-400'; // Specific color for break time\n    if (currentTaskIndex === -1 || !tasks[currentTaskIndex] || tasks[currentTaskIndex].completed) return 'text-timerAccent'; // Default/idle color\n    \n    const task = tasks[currentTaskIndex];\n    const totalTaskSeconds = task.estimatedDuration * 60;\n    if (totalTaskSeconds === 0) return 'text-timerAccent';\n    const percentageRemaining = (timeRemaining / totalTaskSeconds) * 100;\n    if (percentageRemaining <= 20) return 'text-red-500';\n    if (percentageRemaining <= 50) return 'text-yellow-500';\n    return 'text-timerAccent';\n  };\n\n  const calculateDailyStats = useCallback(() => {\n    const totalPlannedDuration = tasks.reduce((acc, task) => acc + task.estimatedDuration, 0); // in minutes\n\n    let accumulatedFocusTimeSeconds = tasks.reduce((acc, task) => {\n      if (task.completed) {\n        return acc + (task.timeSpentSeconds || 0);\n      }\n      if (task.id === (tasks[currentTaskIndex] && tasks[currentTaskIndex].id) && !task.completed && !isBreakTime) {\n        return acc + (task.timeSpentSeconds || 0);\n      }\n      return acc;\n    }, 0);\n    \n    const remainingUncompletedTaskMinutes = tasks\n      .filter(task => !task.completed)\n      .reduce((acc, task) => {\n          if (task.id === (tasks[currentTaskIndex] && tasks[currentTaskIndex].id) && !isBreakTime) {\n            return acc + Math.max(0, Math.ceil(timeRemaining / 60));\n          }\n          return acc + task.estimatedDuration;\n      }, 0);\n\n    const now = new Date();\n    let timeLeftTodayMinutes = 0;\n    \n    // Determine the end time for P(Not Finishing) based on customFinishTime or dailyResetTime\n    let endOfTodayTargetTime;\n\n    if (customFinishTime) {\n      const [finishHour, finishMinute] = customFinishTime.split(':').map(Number);\n      const customEndTime = new Date(now);\n      customEndTime.setHours(finishHour, finishMinute, 0, 0);\n      \n      // If the custom time is in the past today, calculate until tomorrow's custom time\n      // This handles cases where the user sets a time like 9 AM, but it's already 10 AM\n      if (customEndTime.getTime() < now.getTime()) {\n           customEndTime.setDate(customEndTime.getDate() + 1);\n      }\n       endOfTodayTargetTime = customEndTime;\n\n    } else {\n      // Fallback to dailyResetTime if no custom finish time is set\n      const [resetHour, resetMinute] = dailyResetTime.split(':').map(Number);\n      const todayReset = new Date(now);\n      todayReset.setHours(resetHour, resetMinute, 0, 0);\n\n      const tomorrowReset = new Date(now);\n      tomorrowReset.setDate(tomorrowReset.getDate() + 1);\n      tomorrowReset.setHours(resetHour, resetMinute, 0, 0);\n\n      endOfTodayTargetTime = (now.getTime() < todayReset.getTime())\n        ? todayReset\n        : tomorrowReset;\n    }\n\n    const localMsLeft = endOfTodayTargetTime.getTime() - now.getTime();\n    timeLeftTodayMinutes = Math.max(0, Math.floor(localMsLeft / (1000 * 60)));\n\n    let probNotFinishingPercentage = 0;\n\n    if (remainingUncompletedTaskMinutes === 0) {\n      probNotFinishingPercentage = 0;\n    } else if (timeLeftTodayMinutes <= 0) {\n      probNotFinishingPercentage = 100;\n    } else {\n      const P_base_workload = Math.min(1, remainingUncompletedTaskMinutes / timeLeftTodayMinutes);\n      \n      const totalSessionTimeSeconds = accumulatedFocusTimeSeconds + displayedIdleTime;\n      let inefficiency_penalty_multiplier = 1; // Default to no penalty\n      if (totalSessionTimeSeconds > 0) {\n        const efficiency_metric = accumulatedFocusTimeSeconds / totalSessionTimeSeconds;\n        inefficiency_penalty_multiplier = 1 + (1 - efficiency_metric); // Ranges [1, 2]\n      }\n\n      const raw_probability = P_base_workload * inefficiency_penalty_multiplier;\n      probNotFinishingPercentage = Math.min(100, Math.round(raw_probability * 100));\n    }\n\n    return {\n      totalPlannedTime: totalPlannedDuration,\n      accumulatedFocusTimeSeconds: accumulatedFocusTimeSeconds, \n      estimatedRemainingTaskTimeMinutes: remainingUncompletedTaskMinutes,\n      probNotFinishing: probNotFinishingPercentage,\n    };\n  }, [tasks, currentTaskIndex, timeRemaining, isBreakTime, displayedIdleTime, dailyResetTime, customFinishTime]); // Added customFinishTime dependency\n\n  const dailyStats = calculateDailyStats();\n  const activeTaskObject = currentTaskIndex !== -1 && tasks[currentTaskIndex] ? tasks[currentTaskIndex] : null;\n  const currentDisplayTaskName = isBreakTime ? \"Break Time!\" : (activeTaskObject ? activeTaskObject.name : \"No Active Task\");\n  const activeTaskOriginalId = activeTaskObject ? activeTaskObject.id : null;\n\n  const handleClearAllTasks = useCallback(() => {\n    setTasks([]);\n    localStorage.removeItem('tasks'); // Also clear from localStorage immediately\n    toast({ title: \"Tasks Cleared\", description: \"All tasks have been removed.\", variant: \"destructive\" });\n  }, []);\n\n  // Spirals handlers (to be implemented)\n  const handleAddSpiral = useCallback((spiralName) => {\n    if (!spiralName.trim()) {\n        toast({title: \"Invalid Spiral\", description: \"Spiral name cannot be empty.\", variant: \"destructive\"});\n        return;\n    }\n    setSpirals(prev => [...prev, { id: Date.now(), name: spiralName.trim() }]);\n    toast({title: \"Spiral Added\", description: `\"${spiralName.trim()}\" added to spirals.`});\n  }, []);\n\n  const handleRemoveSpiral = useCallback((spiralId) => {\n    const spiralToRemove = spirals.find(s => s.id === spiralId);\n    setSpirals(prev => prev.filter(s => s.id !== spiralId));\n    if (spiralToRemove) {\n        toast({title: \"Spiral Removed\", description: `\"${spiralToRemove.name}\" removed.`, variant: \"destructive\"});\n    }\n  }, [spirals]);\n\n  const handleMoveSpiralToTasks = useCallback((spiralId) => {\n    const spiralToMove = spirals.find(s => s.id === spiralId);\n    if (!spiralToMove) return;\n\n    setPromptConfig({\n      title: \"Move Spiral to Task\",\n      message: `Enter estimated duration (minutes) for task \"${spiralToMove.name}\":`,\n      inputLabel: \"Duration (minutes):\",\n      defaultValue: \"30\",\n      confirmText: \"Move to Tasks\",\n      cancelText: \"Cancel\",\n      placeholder: \"e.g., 30\",\n      onConfirm: (durationText) => {\n        if (durationText === null) return; \n        const duration = parseInt(durationText, 10);\n\n        if (duration && duration > 0) {\n          handleAddTask({ name: spiralToMove.name, duration });\n          setSpirals(prev => prev.filter(s => s.id !== spiralId));\n          toast({ title: \"Spiral Moved\", description: `\"${spiralToMove.name}\" moved to tasks.` });\n        } else {\n          toast({ title: \"Invalid Duration\", description: \"Please enter a positive number for duration.\", variant: \"destructive\" });\n        }\n      }\n    });\n    setIsPromptOpen(true); \n  }, [spirals, handleAddTask, setIsPromptOpen, setPromptConfig]);\n\n  const handleMasterPlayPause = () => {\n    if (isTimerActive) { // If timer is supposed to be active (running or paused awaiting resume)\n      handlePauseTimer(); // This will set isTimerActive = false and clear interval\n    } else { // Timer is not supposed to be active (fully stopped or explicitly paused)\n      // Check if we can resume an existing task or break\n      if (timeRemaining > 0 && ((currentTaskIndex !== -1 && tasks[currentTaskIndex] && !tasks[currentTaskIndex].completed && !isBreakTime) || isBreakTime)) {\n        handleResumeTimer(); // This will set isTimerActive = true\n      } else {\n        // Otherwise, try to start the first available (uncompleted) task\n        const firstUncompletedTaskIndex = tasks.findIndex(t => !t.completed);\n        if (firstUncompletedTaskIndex !== -1) {\n          startTimer(firstUncompletedTaskIndex); // startTimer sets isTimerActive = true\n        } else {\n          toast({title: \"No Tasks\", description: \"Add a task or all tasks are complete.\", variant:\"default\"});\n        }\n      }\n    }\n  };\n\n  // JSX will be in the next part\n  return (\n    <div className=\"h-screen flex flex-col overflow-hidden bg-gradient-to-br from-dark to-dark-100 text-lightText p-3 sm:p-4 md:p-5\">\n      {/* Header with natural height */}\n      <header className=\"bg-gradient-to-r from-dark-100 to-dark-200 p-3.5 rounded-lg shadow-md mb-4 ring-1 ring-dark-300/40 flex flex-col justify-center transition-all duration-300 hover:shadow-lg\">\n        <h1 className=\"text-xl md:text-2xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\">Annoying Pomodoro</h1>\n        \n        {motivationalQuote && (\n          <div className=\"relative mx-auto mt-1.5 mb-2 max-w-xl\">\n            <div className=\"bg-dark-300/50 p-2 rounded-md italic text-center text-subtleText text-xs md:text-sm\">\n              <span className=\"text-cyanAccent\">\"</span>{motivationalQuote}<span className=\"text-cyanAccent\">\"</span>\n            </div>\n            <div className=\"absolute -bottom-1.5 left-1/2 transform -translate-x-1/2 w-3 h-3 rotate-45 bg-dark-300/50\"></div>\n          </div>\n        )}\n        \n        {/* Enhanced Stats Display - adjusted for 5 items */}\n        <div className=\"mt-2 pt-2 border-t border-dark-300/60 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 justify-around items-center gap-3 sm:gap-4\">\n          <div className=\"flex flex-col items-center group\">\n            <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\">\n              <Award className=\"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\" />\n              Score\n            </div>\n            <span className=\"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\">{score}</span>\n          </div>\n          <div className=\"flex flex-col items-center group\">\n            <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\">\n              <CheckCircle className=\"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\" />\n              Tasks Done\n            </div>\n            <span className=\"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\">{tasks.filter(t => t.completed).length}</span>\n          </div>\n          <div className=\"flex flex-col items-center group\">\n            <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\">\n              <Timer className=\"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\" />\n              Focus Time\n            </div>\n            <span className=\"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\">{formatDurationToHoursMinutes(dailyStats.accumulatedFocusTimeSeconds)}</span>\n          </div>\n          <div className=\"flex flex-col items-center group\">\n            <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\">\n              <Coffee className=\"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\" />\n              Idle Time\n            </div>\n            <span className=\"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\">{formatDurationToHoursMinutes(displayedIdleTime)}</span>\n          </div>\n          <div className=\"flex flex-col items-center group\">\n            <div className=\"flex items-center text-subtleText text-xs md:text-sm uppercase tracking-wider mb-0.5\">\n              <AlertTriangle className=\"h-4 w-4 mr-1 text-cyanAccent transition-transform duration-300 group-hover:scale-110\" />\n              P(Not Finish)\n            </div>\n            <span className=\"text-timerAccent font-bold text-lg md:text-xl transition-all duration-300 group-hover:text-brightAccent\">{dailyStats.probNotFinishing}%</span>\n          </div>\n        </div>\n      </header>\n\n      {/* Main content area with side navigation - flex-grow for height */}\n      <div className=\"flex flex-row flex-grow overflow-hidden w-full gap-3 sm:gap-5\">\n        {/* Side Navigation - Improved styling */}\n        <div className=\"flex flex-col gap-2 w-28 sm:w-32\">\n          <Button \n            variant={activeView === 'focus' ? 'default' : 'outline'} \n            onClick={() => setActiveView('focus')}\n            className={`py-2.5 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm transition-all duration-300 pl-2 sm:pl-3\n                      ${activeView === 'focus' ? 'shadow-sm ring-1 ring-cyanAccent/60' : 'hover:bg-dark-200/40 hover:ring-1 hover:ring-dark-300/60'}`}\n          >\n            <Timer className={`h-5 w-5 mb-0.5 ${activeView === 'focus' ? 'text-white animate-pulse-subtle' : 'text-subtleText'}`} />\n            <span>Focus</span>\n          </Button>\n          <Button \n            variant={activeView === 'plan' ? 'default' : 'outline'} \n            onClick={() => setActiveView('plan')}\n            className={`py-2.5 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm transition-all duration-300 pl-2 sm:pl-3\n                      ${activeView === 'plan' ? 'shadow-sm ring-1 ring-cyanAccent/60' : 'hover:bg-dark-200/40 hover:ring-1 hover:ring-dark-300/60'}`}\n          >\n            <CheckCircle className={`h-5 w-5 mb-0.5 ${activeView === 'plan' ? 'text-white animate-pulse-subtle' : 'text-subtleText'}`} />\n            <span>Plan</span>\n          </Button>\n          <Button \n            variant={activeView === 'spirals' ? 'default' : 'outline'} \n            onClick={() => setActiveView('spirals')}\n            className={`py-2.5 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm transition-all duration-300 pl-2 sm:pl-3\n                      ${activeView === 'spirals' ? 'shadow-sm ring-1 ring-cyanAccent/60' : 'hover:bg-dark-200/40 hover:ring-1 hover:ring-dark-300/60'}`}\n          >\n            <Award className={`h-5 w-5 mb-0.5 ${activeView === 'spirals' ? 'text-white animate-pulse-subtle' : 'text-subtleText'}`} />\n            <span>Spirals</span>\n          </Button>\n          <Button \n            variant={activeView === 'settings' ? 'default' : 'outline'} \n            onClick={() => setActiveView('settings')}\n            className={`py-2.5 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm transition-all duration-300 pl-2 sm:pl-3\n                      ${activeView === 'settings' ? 'shadow-sm ring-1 ring-cyanAccent/60' : 'hover:bg-dark-200/40 hover:ring-1 hover:ring-dark-300/60'}`}\n          >\n            <Settings className={`h-5 w-5 mb-0.5 ${activeView === 'settings' ? 'text-white animate-pulse-subtle' : 'text-subtleText'}`} />\n            <span>Settings</span>\n          </Button>\n          \n          <Button \n            variant={activeView === 'dashboard' ? 'default' : 'outline'} \n            onClick={() => setActiveView('dashboard')}\n            className=\"py-3 h-1/4 flex flex-col items-center justify-center text-xs sm:text-sm\"\n          >\n            <BarChart className=\"h-5 w-5 mb-1\" />\n            <span>Dashboard</span>\n          </Button>\n        </div>\n\n        {/* Main view area with padding */}\n        <main className=\"flex-grow overflow-auto p-2 sm:p-3 rounded-md bg-dark-100/20 backdrop-blur-sm shadow-inner\">\n          {/* Content will be conditionally rendered here based on activeView */}\n          {activeView === 'focus' && (\n            <Card className=\"bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500\">\n              <CardHeader className=\"text-center py-3 sm:py-3.5 border-b border-dark-300/25\">\n                <CardTitle className={`text-xl sm:text-2xl font-semibold transition-colors duration-300 ${currentTaskIndex === -1 && currentDisplayTaskName === \"No Active Task\" ? \"text-subtleText\" : \"text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\"}`}>\n                  Current Task: <span className={currentTaskIndex !== -1 ? \"text-brightAccent\" : \"\"}>{currentDisplayTaskName}</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"text-center flex-grow flex flex-col justify-center p-4\">\n                {/* Timer display with circle background */}\n                <div className=\"relative mx-auto mb-5\">\n                  <div className=\"absolute inset-0 rounded-full bg-dark-300/25 flex items-center justify-center\"></div>\n                  <div className={`relative z-10 flex flex-col items-center justify-center rounded-full\n                                  ${isBreakTime ? 'bg-gradient-to-br from-emerald-800/15 to-emerald-600/05' : 'bg-gradient-to-br from-dark-300/15 to-dark-200/05'}\n                                  w-48 h-48 sm:w-52 sm:h-52 md:w-56 md:h-56 shadow-inner border border-dark-300/25`}>\n                    <div id=\"timer-clock-react\" className={`text-5xl sm:text-6xl font-mono font-bold ${timerDisplayColor()} tabular-nums transition-colors duration-500`}>\n                  {formatTime(timeRemaining)}\n                </div>\n                    {isTimerActive && (\n                      <div className=\"text-subtleText text-[10px] sm:text-xs mt-1.5\">\n                        {isBreakTime ? 'BREAK IN PROGRESS' : 'FOCUS IN PROGRESS'}\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Control buttons with improved layout */}\n                <div className=\"flex flex-wrap justify-center items-center gap-2 mb-3\">\n                  <Button \n                    variant={!isTimerActive && timeRemaining === 0 && currentTaskIndex === -1 ? \"default\" : \"buttonGray\"}\n                    size=\"default\"\n                    className={`flex-grow sm:flex-grow-0 min-w-[90px] sm:min-w-[100px] py-1.5 text-sm md:text-base font-medium shadow-sm\n                              ${!isTimerActive && timeRemaining === 0 && tasks.findIndex(t => !t.completed) !== -1 ? \n                                'bg-gradient-to-r from-cyanAccent to-brightAccent hover:opacity-90 transition-all duration-300' : ''}\n                              ${isTimerActive ? 'hover:bg-red-700/50 transition-all duration-300' : ''}`}\n                    onClick={handleMasterPlayPause}\n                    disabled={!isTimerActive && timeRemaining === 0 && tasks.findIndex(t => !t.completed) === -1}\n                  >\n                    {isTimerActive ? \"Pause\" : (timeRemaining > 0 ? \"Resume\" : \"Start\")}\n                  </Button>\n                  <Button \n                      variant={isBreakTime ? \"buttonGray\" : \"buttonGreen\"}\n                    size=\"default\"\n                    className={`flex-grow sm:flex-grow-0 min-w-[90px] sm:min-w-[100px] py-1.5 text-sm md:text-base font-medium shadow-sm\n                              ${!isBreakTime ? 'bg-gradient-to-r from-green-600/90 to-emerald-500/90 hover:opacity-90' : ''}\n                              transition-all duration-300`}\n                      onClick={() => {\n                        if (isBreakTime) {\n                          handleSkipBreak();\n                        } else {\n                          handleTaskDone();\n                        }\n                      }}\n                      disabled={\n                        isBreakTime ? \n                          !isTimerActive : \n                          (\n                            currentTaskIndex === -1 || \n                            !tasks[currentTaskIndex] || \n                            tasks[currentTaskIndex].completed\n                          )\n                      }\n                  >\n                      {isBreakTime ? \"Skip Break\" : \"Done!\"}\n                  </Button>\n                </div>\n                <div>\n                  <Button \n                    variant=\"buttonGray\" \n                    size=\"sm\" \n                    className=\"min-w-[90px] sm:min-w-[100px] py-1.5 text-sm md:text-base font-medium shadow-sm hover:bg-amber-600/40 transition-colors duration-300\"\n                    onClick={handleExtendTimer}\n                    disabled={\n                      isBreakTime \n                        ? !allowExtendBreak \n                        : (\n                            timeRemaining > 0 ||\n                            currentTaskIndex === -1 || \n                        !tasks[currentTaskIndex] || \n                        !tasks[currentTaskIndex].started || \n                            tasks[currentTaskIndex].completed\n                          )\n                    }\n                  >\n                    Extend\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {activeView === 'plan' && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 h-full\">\n              <Card className=\"lg:col-span-1 bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 flex flex-col shadow-md hover:shadow-lg transition-all duration-500\">\n                <CardHeader className=\"py-3 border-b border-dark-300/25\">\n                  <CardTitle className=\"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\">Plan Your Day</CardTitle>\n                </CardHeader>\n                <CardContent className=\"flex-grow flex flex-col overflow-hidden p-3.5\">\n                  <TaskForm onAddTask={handleAddTask} />\n                  <div className=\"mt-4 pt-4 border-t border-dark-300/40 space-y-2.5 flex-grow overflow-y-auto\">\n                    <h3 className=\"text-sm font-semibold text-cyanAccent mb-2\">Daily Stats</h3>\n                    <div className=\"bg-dark-300/25 rounded-md p-3 space-y-2.5 text-xs\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-subtleText flex items-center\">\n                          <span className=\"inline-block w-1.5 h-1.5 rounded-full bg-cyanAccent mr-1.5\"></span>\n                          Total Tasks:\n                        </span>\n                        <span className='text-timerAccent font-semibold'>{tasks.length}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-subtleText flex items-center\">\n                          <span className=\"inline-block w-1.5 h-1.5 rounded-full bg-purple-500 mr-1.5\"></span>\n                          Total Planned:\n                        </span>\n                        <span className='text-timerAccent font-semibold'>{dailyStats.totalPlannedTime} min</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-subtleText flex items-center\">\n                          <span className=\"inline-block w-1.5 h-1.5 rounded-full bg-green-500 mr-1.5\"></span>\n                          Remaining:\n                        </span>\n                        <span className='text-timerAccent font-semibold'>{dailyStats.estimatedRemainingTaskTimeMinutes} min</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-subtleText flex items-center\">\n                          <span className=\"inline-block w-1.5 h-1.5 rounded-full bg-amber-500 mr-1.5\"></span>\n                          P(Not Finishing):\n                        </span>\n                        <span className='text-timerAccent font-semibold'>{dailyStats.probNotFinishing}%</span>\n                      </div>\n                    </div>\n\n                    {/* Custom Finish Time */}\n                    <div className=\"mt-4 pt-4 border-t border-dark-300/40 space-y-2.5\">\n                      <h3 className=\"text-sm font-semibold text-cyanAccent mb-2\">Custom Session End Time</h3>\n                      <div className=\"bg-dark-300/25 rounded-md p-3 space-y-2.5 text-xs\">\n                         <div className=\"flex justify-between items-center mb-3\">\n                            <div className=\"flex items-center\">\n                                <Clock className=\"h-3.5 w-3.5 mr-1 text-cyanAccent\" />\n                                <span className=\"font-medium text-xs md:text-sm\">Set End Time</span>\n                            </div>\n                            <div className=\"bg-dark-200/80 text-subtleText rounded px-2 py-0.5 text-[10px] md:text-xs flex items-center\">\n                                {customFinishTime || 'Not Set'}\n                            </div>\n                         </div>\n                         <div className=\"flex items-center gap-2\">\n                            <input\n                                type=\"time\"\n                                value={customFinishTime || ''}\n                                onChange={(e) => setCustomFinishTime(e.target.value)}\n                                className=\"w-full bg-dark-200/70 border border-dark-300/50 rounded p-1.5 text-xs md:text-sm focus:ring-cyanAccent focus:border-cyanAccent appearance-none\"\n                                style={{ colorScheme: theme === 'dark' ? 'dark' : 'light' }} // Ensures native time picker matches theme\n                             />\n                            <Button\n                                variant=\"destructive\"\n                                size=\"sm\"\n                                onClick={() => setCustomFinishTime(null)}\n                                disabled={!customFinishTime}\n                                className=\"py-1 px-2 text-xs\"\n                            >\n                                Clear\n                            </Button>\n                         </div>\n                         <div className=\"text-[9px] md:text-[10px] text-subtleText/70 mt-1.5 pl-0.5\">\n                            Set a temporary end time for today's session. Overrides Daily Reset Time for P(Not Finish).\n                         </div>\n                      </div>\n                    </div>\n\n                    {/* Clear All Tasks Button */}\n                    <div className=\"mt-4 pt-4 border-t border-dark-300/40\">\n                       <Button\n                           variant=\"destructive\"\n                           size=\"sm\"\n                           onClick={handleClearAllTasks}\n                           disabled={tasks.length === 0}\n                           className=\"w-full py-2 text-xs\"\n                       >\n                           Clear All Tasks\n                       </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"lg:col-span-2 bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 flex flex-col shadow-md hover:shadow-lg transition-all duration-500\">\n                <CardHeader className=\"py-3 border-b border-dark-300/25\">\n                  <CardTitle className=\"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\">Today's Tasks</CardTitle>\n                </CardHeader>\n                <CardContent className=\"flex-grow overflow-hidden p-3.5\">\n                  <TaskList \n                      tasks={tasks} \n                      onRemoveTask={handleRemoveTask} \n                      onStartTask={(taskId) => {\n                          const currentTasks = tasks; \n                          const taskIndex = currentTasks.findIndex(t => t.id === taskId);\n                          \n                          if (taskIndex !== -1) {\n                              if (taskIndex < 0 || taskIndex >= currentTasks.length || !currentTasks[taskIndex]) {\n                                  console.error(\"[App onStartTask] taskIndex out of bounds for current tasks.\", \n                                      { taskId, taskIndex, currentTasksLength: currentTasks.length });\n                                  toast({ \n                                      title: \"Task Sync Issue\", \n                                      description: \"State inconsistency before starting timer. Please try again.\", \n                                      variant: \"destructive\" \n                                  });\n                                  return;\n                              }\n                              startTimer(taskIndex);\n                          } else {\n                              console.error(\"[App onStartTask] Task ID not found in current tasks:\", { taskId });\n                              toast({ \n                                  title: \"Task Not Found\", \n                                  description: \"The selected task could not be found to start.\", \n                                  variant: \"destructive\" \n                              });\n                          }\n                      }}\n                      currentTaskIndex={currentTaskIndex} \n                      activeTaskOriginalId={activeTaskOriginalId} \n                      isTimerActive={isTimerActive} \n                      isBreakTime={isBreakTime}\n                      timeRemaining={timeRemaining}\n                  />\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {activeView === 'spirals' && (\n            <Card className=\"bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500\">\n              <CardHeader className=\"py-3 border-b border-dark-300/25\">\n                <CardTitle className=\"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\">Spirals (Ideas for Later)</CardTitle>\n              </CardHeader>\n              <CardContent className=\"flex-grow flex flex-col overflow-hidden p-3.5 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNTAgOTBjMjIuMDkxIDAgNDAtMTcuOTA5IDQwLTQwUzcyLjA5MSAxMCA1MCAxMCAxMCAyNy45MDkgMTAgNTBzMTcuOTA5IDQwIDQwIDQweiIgc3Ryb2tlPSIjMkQzNzQ4IiBmaWxsPSJub25lIiBvcGFjaXR5PSIuMDMiLz48L3N2Zz4=')] bg-[length:80px_80px]\">\n                <SpiralForm onAddSpiral={handleAddSpiral} />\n                <div className=\"mt-4 flex-grow overflow-y-auto\">\n                  <SpiralList \n                    spirals={spirals} \n                    onRemoveSpiral={handleRemoveSpiral} \n                    onMoveSpiralToTasks={handleMoveSpiralToTasks} \n                  />\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {activeView === 'settings' && (\n            <Card className=\"bg-gradient-to-br from-dark-100/90 to-dark-200/90 ring-1 ring-dark-300/50 h-full flex flex-col shadow-md hover:shadow-lg transition-all duration-500\">\n              <CardHeader className=\"py-3 border-b border-dark-300/25\">\n                <CardTitle className=\"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyanAccent to-brightAccent\">Settings</CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-3.5 overflow-auto\">\n                {/* Settings content goes here */}\n                <div className=\"space-y-6\">\n                  {/* ... Settings content ... */}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n          \n          {activeView === 'dashboard' && (\n            <DashboardView />\n          )}\n        </main>\n      </div>\n\n      {/* Toaster component for displaying toast notifications */}\n      <Toaster />\n      <PromptDialog \n        isOpen={isPromptOpen}\n        onOpenChange={setIsPromptOpen}\n        title={promptConfig.title}\n        message={promptConfig.message}\n        inputLabel={promptConfig.inputLabel}\n        defaultValue={promptConfig.defaultValue}\n        confirmText={promptConfig.confirmText}\n        cancelText={promptConfig.cancelText}\n        onConfirm={promptConfig.onConfirm}\n        placeholder={promptConfig.placeholder}\n      />\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}